ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"fx_utility_logical_sector_flush.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text._fx_utility_logical_sector_flush,"ax",%progbits
  20              		.align	1
  21              		.global	_fx_utility_logical_sector_flush
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	_fx_utility_logical_sector_flush:
  27              	.LVL0:
  28              	.LFB8:
  29              		.file 1 "Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c"
   1:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
   2:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
   3:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
   5:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*       This software is licensed under the Microsoft Software License   */
   6:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*       and in the root directory of this software.                      */
   9:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  10:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  11:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  12:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  13:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  14:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  15:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**                                                                       */
  16:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /** FileX Component                                                       */
  17:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**                                                                       */
  18:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**   Utility                                                             */
  19:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**                                                                       */
  20:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  21:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  22:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  23:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #define FX_SOURCE_CODE
  24:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  25:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  26:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /* Include necessary system files.  */
  27:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  28:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #include "fx_api.h"
  29:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #include "fx_system.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 2


  30:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #include "fx_utility.h"
  31:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  32:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  33:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  34:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  35:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  FUNCTION                                               RELEASE        */
  36:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  37:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    _fx_utility_logical_sector_flush                    PORTABLE C      */
  38:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                           6.1.10       */
  39:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  AUTHOR                                                                */
  40:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  41:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    William E. Lamie, Microsoft Corporation                             */
  42:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  43:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  DESCRIPTION                                                           */
  44:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  45:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    This function handles logical sector flush requests for all FileX   */
  46:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    components. It will process all dirty logical sectors in the        */
  47:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    logical sector cache within the range specified. This function      */
  48:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    optionally invalidates sectors.                                     */
  49:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  50:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  INPUT                                                                 */
  51:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  52:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    media_ptr                             Media control block pointer   */
  53:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    starting_sector                       Starting sector number        */
  54:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    sectors                               Number of sectors             */
  55:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    invalidate                            Invalidate flag               */
  56:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                            (FX_TRUE -> invalidate)     */
  57:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  58:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  OUTPUT                                                                */
  59:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  60:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    return status                                                       */
  61:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  62:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  CALLS                                                                 */
  63:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  64:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    I/O Driver                                                          */
  65:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  66:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  CALLED BY                                                             */
  67:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  68:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    FileX System Functions                                              */
  69:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  70:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  RELEASE HISTORY                                                       */
  71:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  72:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*    DATE              NAME                      DESCRIPTION             */
  73:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  74:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  05-19-2020     William E. Lamie         Initial Version 6.0           */
  75:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  09-30-2020     William E. Lamie         Modified comment(s), and      */
  76:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                            added conditional to        */
  77:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                            disable cache,              */
  78:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                            resulting in version 6.1    */
  79:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*  01-31-2022     William E. Lamie         Modified comment(s), fixed    */
  80:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                            errors without cache,       */
  81:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                            resulting in version 6.1.10 */
  82:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /*                                                                        */
  83:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** /**************************************************************************/
  84:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** UINT  _fx_utility_logical_sector_flush(FX_MEDIA *media_ptr, ULONG64 starting_sector, ULONG64 sector
  85:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** {
  30              		.loc 1 85 1 view -0
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 3


  31              		.cfi_startproc
  32              		@ args = 12, pretend = 0, frame = 40
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 85 1 is_stmt 0 view .LVU1
  35 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 36
  38              		.cfi_offset 4, -36
  39              		.cfi_offset 5, -32
  40              		.cfi_offset 6, -28
  41              		.cfi_offset 7, -24
  42              		.cfi_offset 8, -20
  43              		.cfi_offset 9, -16
  44              		.cfi_offset 10, -12
  45              		.cfi_offset 11, -8
  46              		.cfi_offset 14, -4
  47 0004 8BB0     		sub	sp, sp, #44
  48              	.LCFI1:
  49              		.cfi_def_cfa_offset 80
  50 0006 8246     		mov	r10, r0
  51 0008 0292     		str	r2, [sp, #8]
  52 000a 1946     		mov	r1, r3
  53 000c 0393     		str	r3, [sp, #12]
  54 000e 149E     		ldr	r6, [sp, #80]
  55 0010 DDF85480 		ldr	r8, [sp, #84]
  56 0014 DDF858B0 		ldr	fp, [sp, #88]
  86:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  87:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifndef FX_DISABLE_CACHE
  88:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** FX_CACHED_SECTOR *cache_entry;
  57              		.loc 1 88 1 is_stmt 1 view .LVU2
  89:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** UINT              cache_size;
  58              		.loc 1 89 1 view .LVU3
  90:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** UINT              i, bit_set, use_starting_sector;
  59              		.loc 1 90 1 view .LVU4
  91:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** ULONG             index;
  60              		.loc 1 91 1 view .LVU5
  92:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** ULONG             remaining_valid;
  61              		.loc 1 92 1 view .LVU6
  93:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** ULONG             remaining_dirty;
  62              		.loc 1 93 1 view .LVU7
  94:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** ULONG64           ending_sector;
  63              		.loc 1 94 1 view .LVU8
  95:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** ULONG             valid_bit_map;
  64              		.loc 1 95 1 view .LVU9
  96:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  97:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
  98:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     /* Extended port-specific processing macro, which is by default defined to white space.  */
  99:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     FX_UTILITY_LOGICAL_SECTOR_FLUSH_EXTENSION
 100:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 101:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     /* Calculate the ending sector.  */
 102:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     ending_sector =  starting_sector + sectors - 1;
  65              		.loc 1 102 5 view .LVU10
  66              		.loc 1 102 38 is_stmt 0 view .LVU11
  67 0018 9319     		adds	r3, r2, r6
  68 001a 41EB0802 		adc	r2, r1, r8
  69              	.LVL1:
  70              		.loc 1 102 19 view .LVU12
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 4


  71 001e 013B     		subs	r3, r3, #1
  72 0020 0593     		str	r3, [sp, #20]
  73 0022 42F1FF33 		adc	r3, r2, #-1
  74 0026 0693     		str	r3, [sp, #24]
  75              	.LVL2:
 103:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 104:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     /* Pickup the number of dirty sectors currently in the cache.  */
 105:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     remaining_dirty =  media_ptr -> fx_media_sector_cache_dirty_count;
  76              		.loc 1 105 5 is_stmt 1 view .LVU13
  77              		.loc 1 105 21 is_stmt 0 view .LVU14
  78 0028 D0F82490 		ldr	r9, [r0, #36]
  79              	.LVL3:
 106:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 107:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     /* If trace is enabled, insert this event into the trace buffer.  */
 108:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     FX_TRACE_IN_LINE_INSERT(FX_TRACE_INTERNAL_MEDIA_FLUSH, media_ptr, media_ptr -> fx_media_sector_
 109:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 110:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     /* Determine what type of cache configuration we have.  */
 111:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     if (media_ptr -> fx_media_sector_cache_hashed == FX_FALSE)
  80              		.loc 1 111 5 is_stmt 1 view .LVU15
  81              		.loc 1 111 19 is_stmt 0 view .LVU16
  82 002c 0369     		ldr	r3, [r0, #16]
  83              	.LVL4:
  84              		.loc 1 111 19 view .LVU17
  85 002e 0193     		str	r3, [sp, #4]
  86              		.loc 1 111 8 view .LVU18
  87 0030 002B     		cmp	r3, #0
  88 0032 76D1     		bne	.L2
 112:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     {
 113:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 114:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Linear cache present, simply walk through the search list until
 115:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****            an unused cache entry is present.  */
 116:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 117:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Flush and invalidate the internal logical sector cache.  */
 118:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         cache_size =            media_ptr -> fx_media_sector_cache_size;
  89              		.loc 1 118 9 is_stmt 1 view .LVU19
  90              		.loc 1 118 20 is_stmt 0 view .LVU20
  91 0034 4369     		ldr	r3, [r0, #20]
  92              	.LVL5:
 119:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         cache_entry =           media_ptr -> fx_media_sector_cache_list_ptr;
  93              		.loc 1 119 9 is_stmt 1 view .LVU21
  94              		.loc 1 119 21 is_stmt 0 view .LVU22
  95 0036 C469     		ldr	r4, [r0, #28]
  96              	.LVL6:
 120:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 121:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Look at the cache entries that have been written to.  */
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         while ((cache_size--) && (cache_entry -> fx_cached_sector))
  97              		.loc 1 122 9 is_stmt 1 view .LVU23
  98 0038 4F46     		mov	r7, r9
  99 003a 8946     		mov	r9, r1
 100              	.LVL7:
 101              		.loc 1 122 15 is_stmt 0 view .LVU24
 102 003c 2FE0     		b	.L3
 103              	.LVL8:
 104              	.L42:
 123:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 124:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 125:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if invalidation is not required and there are no
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 5


 126:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                more dirty sectors. */
 127:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if ((remaining_dirty == 0) && (invalidate == FX_FALSE))
 128:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 129:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 130:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Yes, nothing left to do.  */
 131:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 break;
 132:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 133:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 134:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if there are any more sectors to process.  */
 135:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if (sectors == 0)
 136:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 137:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 138:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* No more sectors required to process.  */
 139:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 break;
 140:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 141:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 142:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if this cached sector is within the specified range and is valid.  */
 143:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if ((cache_entry -> fx_cached_sector_valid) &&
 144:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector >= starting_sector) &&
 145:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector <= ending_sector))
 146:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 147:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 148:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Yes, the cache entry is valid and within the specified range. Determine if
 149:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                    the requested sector has been written to.  */
 150:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 if (cache_entry -> fx_cached_sector_buffer_dirty)
 151:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 152:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 153:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Yes, write the cached sector out to the media.  */
 154:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 155:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Check for write protect at the media level (set by driver).  */
 156:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     if (media_ptr -> fx_media_driver_write_protect == FX_FALSE)
 157:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 158:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 159:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifndef FX_MEDIA_STATISTICS_DISABLE
 160:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 161:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Increment the number of driver write sector(s) requests.  */
 162:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_write_requests++;
 163:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 164:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 165:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Build write request to the driver.  */
 166:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_request =          FX_DRIVER_WRITE;
 167:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_status =           FX_IO_ERROR;
 168:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_buffer =           cache_entry -> fx_cached_se
 169:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 170:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_logical_sector =   cache_entry -> fx_cached_se
 171:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #else
 172:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_logical_sector =   (ULONG)cache_entry -> fx_ca
 173:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 174:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_sectors =          1;
 175:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_sector_type =      cache_entry -> fx_cached_se
 176:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 177:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Sectors other than FX_DATA_SECTOR will never be dirty when FX_FAULT_TOLE
 178:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifndef FX_FAULT_TOLERANT
 179:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Determine if the system write flag needs to be set.  */
 180:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         if (cache_entry -> fx_cached_sector_type != FX_DATA_SECTOR)
 181:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 182:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 6


 183:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Yes, a system sector write is present so set the flag.  The driver
 184:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                can use this flag to make extra safeguards in writing the sector
 185:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                out, yielding more fault tolerance.  */
 186:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             media_ptr -> fx_media_driver_system_write =  FX_TRUE;
 105              		.loc 1 186 29 is_stmt 1 view .LVU25
 106              		.loc 1 186 71 is_stmt 0 view .LVU26
 107 003e 0123     		movs	r3, #1
 108 0040 CAF8B030 		str	r3, [r10, #176]
 109              	.L8:
 187:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         }
 188:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif /* FX_FAULT_TOLERANT */
 189:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 190:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* If trace is enabled, insert this event into the trace buffer.  */
 191:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         FX_TRACE_IN_LINE_INSERT(FX_TRACE_INTERNAL_IO_DRIVER_WRITE, media_ptr, cache
 192:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 193:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Invoke the driver to write the sector.  */
 194:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (media_ptr -> fx_media_driver_entry) (media_ptr);
 110              		.loc 1 194 25 is_stmt 1 view .LVU27
 111              		.loc 1 194 36 is_stmt 0 view .LVU28
 112 0044 DAF8BC30 		ldr	r3, [r10, #188]
 113 0048 5046     		mov	r0, r10
 114 004a 9847     		blx	r3
 115              	.LVL9:
 195:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 196:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Clear the system write flag.  */
 197:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_system_write =  FX_FALSE;
 116              		.loc 1 197 25 is_stmt 1 view .LVU29
 117              		.loc 1 197 67 is_stmt 0 view .LVU30
 118 004c 0023     		movs	r3, #0
 119 004e CAF8B030 		str	r3, [r10, #176]
 198:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 199:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Check for successful completion.  */
 200:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         if (media_ptr -> fx_media_driver_status)
 120              		.loc 1 200 25 is_stmt 1 view .LVU31
 121              		.loc 1 200 39 is_stmt 0 view .LVU32
 122 0052 DAF88C30 		ldr	r3, [r10, #140]
 123              		.loc 1 200 28 view .LVU33
 124 0056 002B     		cmp	r3, #0
 125 0058 40F04881 		bne	.L34
 201:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 202:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 203:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Error writing a cached sector out.  Return the
 204:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                error status.  */
 205:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             return(media_ptr -> fx_media_driver_status);
 206:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         }
 207:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 208:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Clear the buffer dirty flag since it has been flushed
 209:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                            out.  */
 210:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         cache_entry -> fx_cached_sector_buffer_dirty =  FX_FALSE;
 126              		.loc 1 210 25 is_stmt 1 view .LVU34
 127              		.loc 1 210 70 is_stmt 0 view .LVU35
 128 005c 2374     		strb	r3, [r4, #16]
 211:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 212:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Decrement the number of dirty sectors currently in the cache.  */
 213:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_sector_cache_dirty_count--;
 129              		.loc 1 213 25 is_stmt 1 view .LVU36
 130              		.loc 1 213 35 is_stmt 0 view .LVU37
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 7


 131 005e DAF82430 		ldr	r3, [r10, #36]
 132              		.loc 1 213 71 view .LVU38
 133 0062 013B     		subs	r3, r3, #1
 134 0064 CAF82430 		str	r3, [r10, #36]
 214:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         remaining_dirty--;
 135              		.loc 1 214 25 is_stmt 1 view .LVU39
 136              		.loc 1 214 40 is_stmt 0 view .LVU40
 137 0068 013F     		subs	r7, r7, #1
 138              	.LVL10:
 139              	.L7:
 215:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 216:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 }
 217:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 218:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Determine if the invalidate option is specified.  */
 219:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 if (invalidate)
 140              		.loc 1 219 17 is_stmt 1 view .LVU41
 141              		.loc 1 219 20 is_stmt 0 view .LVU42
 142 006a BBF1000F 		cmp	fp, #0
 143 006e 11D0     		beq	.L9
 220:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 221:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 222:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Invalidate the cache entry.  */
 223:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     cache_entry -> fx_cached_sector_valid =  FX_FALSE;
 144              		.loc 1 223 21 is_stmt 1 view .LVU43
 145              		.loc 1 223 59 is_stmt 0 view .LVU44
 146 0070 0023     		movs	r3, #0
 147 0072 6374     		strb	r3, [r4, #17]
 224:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 225:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Place all ones in the sector number.  */
 226:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     cache_entry -> fx_cached_sector =  (~(ULONG64)0);
 148              		.loc 1 226 21 is_stmt 1 view .LVU45
 149              		.loc 1 226 53 is_stmt 0 view .LVU46
 150 0074 4FF0FF32 		mov	r2, #-1
 151 0078 4FF0FF33 		mov	r3, #-1
 152 007c C4E90223 		strd	r2, [r4, #8]
 227:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 228:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Determine if this sector is still dirty, this could be the case if
 229:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                        write protection was turned on.  */
 230:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     if (cache_entry -> fx_cached_sector_buffer_dirty)
 153              		.loc 1 230 21 is_stmt 1 view .LVU47
 154              		.loc 1 230 37 is_stmt 0 view .LVU48
 155 0080 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 156              		.loc 1 230 24 view .LVU49
 157 0082 3BB1     		cbz	r3, .L9
 231:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 232:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 233:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Yes, clear the dirty flag.  */
 234:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         cache_entry -> fx_cached_sector_buffer_dirty =  FX_FALSE;
 158              		.loc 1 234 25 is_stmt 1 view .LVU50
 159              		.loc 1 234 70 is_stmt 0 view .LVU51
 160 0084 0023     		movs	r3, #0
 161 0086 2374     		strb	r3, [r4, #16]
 235:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 236:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Decrement the number of dirty sectors currently in the cache.  */
 237:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_sector_cache_dirty_count--;
 162              		.loc 1 237 25 is_stmt 1 view .LVU52
 163              		.loc 1 237 35 is_stmt 0 view .LVU53
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 8


 164 0088 DAF82430 		ldr	r3, [r10, #36]
 165              		.loc 1 237 71 view .LVU54
 166 008c 013B     		subs	r3, r3, #1
 167 008e CAF82430 		str	r3, [r10, #36]
 238:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         remaining_dirty--;
 168              		.loc 1 238 25 is_stmt 1 view .LVU55
 169              		.loc 1 238 40 is_stmt 0 view .LVU56
 170 0092 013F     		subs	r7, r7, #1
 171              	.LVL11:
 172              	.L9:
 239:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 240:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 }
 241:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 242:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Decrement the number of sectors in the range that have been processed.  */
 243:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 sectors--;
 173              		.loc 1 243 17 is_stmt 1 view .LVU57
 174              		.loc 1 243 24 is_stmt 0 view .LVU58
 175 0094 013E     		subs	r6, r6, #1
 176              	.LVL12:
 177              		.loc 1 243 24 view .LVU59
 178 0096 48F1FF38 		adc	r8, r8, #-1
 179              	.LVL13:
 180              	.L6:
 244:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 245:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 246:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Move to the next entry in the sector cache.  */
 247:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             cache_entry =  cache_entry -> fx_cached_sector_next_used;
 181              		.loc 1 247 13 is_stmt 1 view .LVU60
 182              		.loc 1 247 25 is_stmt 0 view .LVU61
 183 009a 6469     		ldr	r4, [r4, #20]
 184              	.LVL14:
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 185              		.loc 1 122 27 view .LVU62
 186 009c 2B46     		mov	r3, r5
 187              	.LVL15:
 188              	.L3:
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 189              		.loc 1 122 15 is_stmt 1 view .LVU63
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 190              		.loc 1 122 27 is_stmt 0 view .LVU64
 191 009e 5D1E     		subs	r5, r3, #1
 192              	.LVL16:
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 193              		.loc 1 122 15 view .LVU65
 194 00a0 002B     		cmp	r3, #0
 195 00a2 00F02581 		beq	.L35
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 196              		.loc 1 122 47 discriminator 1 view .LVU66
 197 00a6 A268     		ldr	r2, [r4, #8]
 198 00a8 E368     		ldr	r3, [r4, #12]
 122:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 199              		.loc 1 122 31 discriminator 1 view .LVU67
 200 00aa 52EA0301 		orrs	r1, r2, r3
 201 00ae 00F02B81 		beq	.L1
 127:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 202              		.loc 1 127 13 is_stmt 1 view .LVU68
 127:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 9


 203              		.loc 1 127 16 is_stmt 0 view .LVU69
 204 00b2 1FB9     		cbnz	r7, .L4
 127:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 205              		.loc 1 127 40 discriminator 1 view .LVU70
 206 00b4 BBF1000F 		cmp	fp, #0
 207 00b8 00F01581 		beq	.L33
 208              	.L4:
 135:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 209              		.loc 1 135 13 is_stmt 1 view .LVU71
 135:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 210              		.loc 1 135 16 is_stmt 0 view .LVU72
 211 00bc 56EA0801 		orrs	r1, r6, r8
 212 00c0 00F02281 		beq	.L1
 143:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector >= starting_sector) &&
 213              		.loc 1 143 13 is_stmt 1 view .LVU73
 143:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector >= starting_sector) &&
 214              		.loc 1 143 30 is_stmt 0 view .LVU74
 215 00c4 617C     		ldrb	r1, [r4, #17]	@ zero_extendqisi2
 143:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector >= starting_sector) &&
 216              		.loc 1 143 16 view .LVU75
 217 00c6 0029     		cmp	r1, #0
 218 00c8 E7D0     		beq	.L6
 143:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector >= starting_sector) &&
 219              		.loc 1 143 57 discriminator 1 view .LVU76
 220 00ca 0299     		ldr	r1, [sp, #8]
 221 00cc 8A42     		cmp	r2, r1
 222 00ce 73EB0901 		sbcs	r1, r3, r9
 223 00d2 E2D3     		bcc	.L6
 144:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 (cache_entry -> fx_cached_sector <= ending_sector))
 224              		.loc 1 144 70 view .LVU77
 225 00d4 0599     		ldr	r1, [sp, #20]
 226 00d6 9142     		cmp	r1, r2
 227 00d8 069A     		ldr	r2, [sp, #24]
 228 00da 72EB0303 		sbcs	r3, r2, r3
 229 00de DCD3     		bcc	.L6
 150:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 230              		.loc 1 150 17 is_stmt 1 view .LVU78
 150:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 231              		.loc 1 150 33 is_stmt 0 view .LVU79
 232 00e0 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 150:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 233              		.loc 1 150 20 view .LVU80
 234 00e2 002B     		cmp	r3, #0
 235 00e4 C1D0     		beq	.L7
 156:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 236              		.loc 1 156 21 is_stmt 1 view .LVU81
 156:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 237              		.loc 1 156 35 is_stmt 0 view .LVU82
 238 00e6 DAF8A830 		ldr	r3, [r10, #168]
 156:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 239              		.loc 1 156 24 view .LVU83
 240 00ea 002B     		cmp	r3, #0
 241 00ec BDD1     		bne	.L7
 162:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 242              		.loc 1 162 25 is_stmt 1 view .LVU84
 162:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 243              		.loc 1 162 35 is_stmt 0 view .LVU85
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 10


 244 00ee DAF8B031 		ldr	r3, [r10, #432]
 162:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 245              		.loc 1 162 68 view .LVU86
 246 00f2 0133     		adds	r3, r3, #1
 247 00f4 CAF8B031 		str	r3, [r10, #432]
 166:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_status =           FX_IO_ERROR;
 248              		.loc 1 166 25 is_stmt 1 view .LVU87
 166:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_status =           FX_IO_ERROR;
 249              		.loc 1 166 62 is_stmt 0 view .LVU88
 250 00f8 0123     		movs	r3, #1
 251 00fa CAF88830 		str	r3, [r10, #136]
 167:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_buffer =           cache_entry -> fx_cached_se
 252              		.loc 1 167 25 is_stmt 1 view .LVU89
 167:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_buffer =           cache_entry -> fx_cached_se
 253              		.loc 1 167 61 is_stmt 0 view .LVU90
 254 00fe 9022     		movs	r2, #144
 255 0100 CAF88C20 		str	r2, [r10, #140]
 168:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 256              		.loc 1 168 25 is_stmt 1 view .LVU91
 168:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 257              		.loc 1 168 85 is_stmt 0 view .LVU92
 258 0104 2268     		ldr	r2, [r4]
 168:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 259              		.loc 1 168 61 view .LVU93
 260 0106 CAF89020 		str	r2, [r10, #144]
 172:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 261              		.loc 1 172 25 is_stmt 1 view .LVU94
 172:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 262              		.loc 1 172 92 is_stmt 0 view .LVU95
 263 010a A268     		ldr	r2, [r4, #8]
 172:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 264              		.loc 1 172 69 view .LVU96
 265 010c CAF89420 		str	r2, [r10, #148]
 174:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_sector_type =      cache_entry -> fx_cached_se
 266              		.loc 1 174 25 is_stmt 1 view .LVU97
 174:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         media_ptr -> fx_media_driver_sector_type =      cache_entry -> fx_cached_se
 267              		.loc 1 174 62 is_stmt 0 view .LVU98
 268 0110 CAF89830 		str	r3, [r10, #152]
 175:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 269              		.loc 1 175 25 is_stmt 1 view .LVU99
 175:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 270              		.loc 1 175 85 is_stmt 0 view .LVU100
 271 0114 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 175:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 272              		.loc 1 175 66 view .LVU101
 273 0116 CAF8B830 		str	r3, [r10, #184]
 180:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 274              		.loc 1 180 25 is_stmt 1 view .LVU102
 180:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 275              		.loc 1 180 41 is_stmt 0 view .LVU103
 276 011a A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 180:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 277              		.loc 1 180 28 view .LVU104
 278 011c 042B     		cmp	r3, #4
 279 011e 8ED1     		bne	.L42
 280 0120 90E7     		b	.L8
 281              	.LVL17:
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 11


 282              	.L2:
 248:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         }
 249:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     }
 250:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     else
 251:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     {
 252:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 253:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Hashed cache is present. Pickup the cache size.  */
 254:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         cache_size =            media_ptr -> fx_media_sector_cache_size;
 283              		.loc 1 254 9 is_stmt 1 view .LVU105
 284              		.loc 1 254 20 is_stmt 0 view .LVU106
 285 0122 4369     		ldr	r3, [r0, #20]
 286 0124 0493     		str	r3, [sp, #16]
 287              	.LVL18:
 255:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 256:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Initialize the loop control parameters.  */
 257:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         bit_set =  0;
 288              		.loc 1 257 9 is_stmt 1 view .LVU107
 258:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         valid_bit_map =  media_ptr -> fx_media_sector_cache_hashed_sector_valid;
 289              		.loc 1 258 9 view .LVU108
 290              		.loc 1 258 23 is_stmt 0 view .LVU109
 291 0126 036A     		ldr	r3, [r0, #32]
 292              	.LVL19:
 293              		.loc 1 258 23 view .LVU110
 294 0128 0793     		str	r3, [sp, #28]
 295              	.LVL20:
 259:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 260:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Determine how to process the hashed cache based on the number of sectors
 261:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****            to process. If the sequential sector range is less than the bit map size,
 262:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****            simply use the starting sector to derive the index into the cache.  */
 263:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         if (sectors < 32)
 296              		.loc 1 263 9 is_stmt 1 view .LVU111
 297              		.loc 1 263 12 is_stmt 0 view .LVU112
 298 012a 202E     		cmp	r6, #32
 299 012c 78F10003 		sbcs	r3, r8, #0
 300              	.LVL21:
 301              		.loc 1 263 12 view .LVU113
 302 0130 C0F0D480 		bcc	.L11
 264:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 265:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             use_starting_sector =  FX_TRUE;
 266:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         }
 267:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         else
 268:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 269:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             use_starting_sector =  FX_FALSE;
 303              		.loc 1 269 33 view .LVU114
 304 0134 0023     		movs	r3, #0
 305 0136 0993     		str	r3, [sp, #36]
 306              	.L12:
 265:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         }
 307              		.loc 1 265 33 view .LVU115
 308 0138 0023     		movs	r3, #0
 309 013a 0893     		str	r3, [sp, #32]
 310 013c A5E0     		b	.L31
 311              	.LVL22:
 312              	.L16:
 270:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         }
 271:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 272:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         /* Determine if there is anything valid in the cache.  */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 12


 273:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         while (valid_bit_map)
 274:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 275:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 276:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if invalidation is not required and there are no
 277:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                more dirty sectors. */
 278:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if ((remaining_dirty == 0) && (invalidate == FX_FALSE))
 279:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 280:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 281:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Yes, nothing left to do.  */
 282:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 break;
 283:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 284:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 285:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if there are any more sectors to process.  */
 286:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if ((sectors == 0) || (starting_sector > ending_sector))
 287:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 288:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 289:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* No more sectors required to process.  */
 290:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 break;
 291:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 292:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 293:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine how to compute the hash index.  */
 294:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if (use_starting_sector)
 295:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 296:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 297:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Calculate the hash value of this sector using the lower bits.  */
 298:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 index =  (ULONG)(starting_sector & media_ptr -> fx_media_sector_cache_hash_mask);
 299:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 300:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Calculate the bit set indicating there is one or more valid sectors at this cach
 301:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 bit_set =  (index % 32);
 302:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 303:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Compute the actual array index by multiplying by the cache depth.  */
 304:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 index =  (bit_set * FX_SECTOR_CACHE_DEPTH);
 305:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 306:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             else
 307:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 308:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 309:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Walk the bit map to find the next valid entry.  */
 310:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 311:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Find the next set bit.  */
 312:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 while ((valid_bit_map & 1) == 0)
 313:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 314:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 315:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Otherwise, shift down the bit in the bit map.  */
 316:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     valid_bit_map =  valid_bit_map >> 1;
 313              		.loc 1 316 21 is_stmt 1 view .LVU116
 314              		.loc 1 316 35 is_stmt 0 view .LVU117
 315 013e 5B08     		lsrs	r3, r3, #1
 316              	.LVL23:
 317:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 318:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Increment the set bit marker.  */
 319:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     bit_set++;
 317              		.loc 1 319 21 is_stmt 1 view .LVU118
 318              		.loc 1 319 28 is_stmt 0 view .LVU119
 319 0140 0132     		adds	r2, r2, #1
 320              	.LVL24:
 321              	.L14:
 312:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 13


 322              		.loc 1 312 23 is_stmt 1 view .LVU120
 323 0142 13F0010F 		tst	r3, #1
 324 0146 FAD0     		beq	.L16
 320:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 }
 321:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 322:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Compute the first actual index into the hashed cache.  */
 323:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 index =  (bit_set * FX_SECTOR_CACHE_DEPTH);
 325              		.loc 1 323 23 is_stmt 0 view .LVU121
 326 0148 0793     		str	r3, [sp, #28]
 327 014a 0892     		str	r2, [sp, #32]
 328              		.loc 1 323 17 is_stmt 1 view .LVU122
 329              		.loc 1 323 23 is_stmt 0 view .LVU123
 330 014c 9700     		lsls	r7, r2, #2
 331              	.LVL25:
 332              		.loc 1 323 23 view .LVU124
 333 014e BBE0     		b	.L15
 334              	.LVL26:
 335              	.L39:
 336              		.loc 1 323 23 view .LVU125
 337 0150 079B     		ldr	r3, [sp, #28]
 338 0152 089A     		ldr	r2, [sp, #32]
 339 0154 F5E7     		b	.L14
 340              	.LVL27:
 341              	.L18:
 324:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 325:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 326:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* At this point, bit_set represents the next group of hashed sectors that could
 327:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                have valid cache entries and index represents the index into the sector cache
 328:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                of that sector group.  */
 329:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 330:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Clear the remaining valid sectors for this entry in the bit map.  */
 331:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             remaining_valid =  0;
 332:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 333:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Loop to check the corresponding hash entries.  */
 334:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             do
 335:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 336:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 337:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Setup pointer to the cache entry.  */
 338:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 cache_entry =  &(media_ptr -> fx_media_sector_cache[index]);
 339:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 340:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Loop to examine the full depth of the hashed cache.  */
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 for (i = 0; i < 4; i++)
 342:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 343:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 344:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Determine if this cached sector is within the specified range and is valid. 
 345:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     if ((cache_entry -> fx_cached_sector_valid) &&
 346:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector >= starting_sector) &&
 347:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector <= ending_sector))
 348:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 349:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 350:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Determine if the requested sector has been written to.  */
 351:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         if (cache_entry -> fx_cached_sector_buffer_dirty)
 352:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 353:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 354:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 355:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Yes, write the cached sector out to the media.  */
 356:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 14


 357:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Check for write protect at the media level (set by driver).  */
 358:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             if (media_ptr -> fx_media_driver_write_protect == FX_FALSE)
 359:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 360:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 361:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifndef FX_MEDIA_STATISTICS_DISABLE
 362:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 363:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Increment the number of driver write sector(s) requests.  */
 364:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_write_requests++;
 365:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 366:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 367:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Build Write request to the driver.  */
 368:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_request =          FX_DRIVER_WRITE;
 369:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_status =           FX_IO_ERROR;
 370:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_buffer =           cache_entry -> fx_c
 371:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 372:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_logical_sector =   cache_entry -> fx_c
 373:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #else
 374:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_logical_sector =   (ULONG)cache_entry 
 375:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 376:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_sectors =          1;
 377:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_sector_type =      cache_entry -> fx_c
 378:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 379:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Sectors other than FX_DATA_SECTOR will never be dirty when FX_FA
 380:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifndef FX_FAULT_TOLERANT
 381:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Determine if the system write flag needs to be set.  */
 382:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 if (cache_entry -> fx_cached_sector_type != FX_DATA_SECTOR)
 383:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 384:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 385:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                     /* Yes, a system sector write is present so set the flag.  The 
 386:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                        can use this flag to make extra safeguards in writing the se
 387:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                        out, yielding more fault tolerance.  */
 388:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                     media_ptr -> fx_media_driver_system_write =  FX_TRUE;
 389:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 }
 390:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif /* FX_FAULT_TOLERANT */
 391:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 392:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* If trace is enabled, insert this event into the trace buffer.  *
 393:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 FX_TRACE_IN_LINE_INSERT(FX_TRACE_INTERNAL_IO_DRIVER_WRITE, media_pt
 394:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 395:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Invoke the driver to write the sector.  */
 396:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 (media_ptr -> fx_media_driver_entry) (media_ptr);
 397:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 398:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Clear the system write flag.  */
 399:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_system_write =  FX_FALSE;
 400:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 401:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Check for successful completion.  */
 402:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 if (media_ptr -> fx_media_driver_status)
 403:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 404:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 405:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                     /* Error writing a cached sector out.  Return the
 406:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                        error status.  */
 407:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                     return(media_ptr -> fx_media_driver_status);
 408:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 }
 409:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 410:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Clear the buffer dirty flag since it has been flushed
 411:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                    out.  */
 412:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 cache_entry -> fx_cached_sector_buffer_dirty =  FX_FALSE;
 413:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 15


 414:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Decrement the number of dirty sectors currently in the cache.  *
 415:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_sector_cache_dirty_count--;
 416:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 417:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             }
 418:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         }
 419:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 420:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Determine if the invalidate option is specified.  */
 421:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         if (invalidate)
 422:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 423:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 424:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Invalidate the cache entry.  */
 425:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             cache_entry -> fx_cached_sector_valid =  FX_FALSE;
 426:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 427:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Place all ones in the sector number.  */
 428:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             cache_entry -> fx_cached_sector =  (~(ULONG64)0);
 429:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 430:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Determine if this sector is still dirty, this could be the case if
 431:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                write protection was turned on.  */
 432:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             if (cache_entry -> fx_cached_sector_buffer_dirty)
 433:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 434:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 435:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Yes, clear the dirty flag.  */
 436:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 cache_entry -> fx_cached_sector_buffer_dirty =  FX_FALSE;
 437:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 438:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 /* Decrement the number of dirty sectors currently in the cache.  *
 439:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_sector_cache_dirty_count--;
 440:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 441:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             }
 442:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         }
 443:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 444:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Decrement the number of sectors in the range that have been processed.  
 445:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         sectors--;
 446:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 447:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     else
 448:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 449:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 450:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Determine if the sector is valid.  */
 451:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         if (cache_entry -> fx_cached_sector_valid)
 342              		.loc 1 451 25 is_stmt 1 view .LVU126
 343              		.loc 1 451 28 is_stmt 0 view .LVU127
 344 0156 13B1     		cbz	r3, .L22
 452:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 453:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 454:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             /* Increment the number of still remaining but out of range sectors.  *
 455:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             remaining_valid++;
 345              		.loc 1 455 29 is_stmt 1 view .LVU128
 346              		.loc 1 455 44 is_stmt 0 view .LVU129
 347 0158 019B     		ldr	r3, [sp, #4]
 348 015a 0133     		adds	r3, r3, #1
 349 015c 0193     		str	r3, [sp, #4]
 350              	.LVL28:
 351              	.L22:
 456:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         }
 457:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 458:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 459:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Determine if invalidation is not required and there are no
 460:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                        more dirty sectors. */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 16


 461:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     if ((remaining_dirty == 0) && (invalidate == FX_FALSE))
 352              		.loc 1 461 21 is_stmt 1 view .LVU130
 353              		.loc 1 461 24 is_stmt 0 view .LVU131
 354 015e B9F1000F 		cmp	r9, #0
 355 0162 01D1     		bne	.L23
 356              		.loc 1 461 48 discriminator 1 view .LVU132
 357 0164 002F     		cmp	r7, #0
 358 0166 66D0     		beq	.L24
 359              	.L23:
 462:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 463:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 464:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* Yes, nothing left to do.  */
 465:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         break;
 466:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 467:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 468:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Determine if there are any more sectors to process.  */
 469:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     if ((sectors == 0) && (invalidate == FX_FALSE))
 360              		.loc 1 469 21 is_stmt 1 view .LVU133
 361              		.loc 1 469 24 is_stmt 0 view .LVU134
 362 0168 56EA0803 		orrs	r3, r6, r8
 363 016c 01D1     		bne	.L25
 364              		.loc 1 469 40 discriminator 1 view .LVU135
 365 016e 002F     		cmp	r7, #0
 366 0170 61D0     		beq	.L24
 367              	.L25:
 470:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     {
 471:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 472:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         /* No more sectors required to process.  */
 473:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         break;
 474:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 475:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 476:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     /* Move to the next cache entry.  */
 477:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     cache_entry++;
 368              		.loc 1 477 21 is_stmt 1 discriminator 2 view .LVU136
 369              		.loc 1 477 32 is_stmt 0 discriminator 2 view .LVU137
 370 0172 1834     		adds	r4, r4, #24
 371              	.LVL29:
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 372              		.loc 1 341 36 is_stmt 1 discriminator 2 view .LVU138
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 373              		.loc 1 341 37 is_stmt 0 discriminator 2 view .LVU139
 374 0174 0135     		adds	r5, r5, #1
 375              	.LVL30:
 376              	.L17:
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 377              		.loc 1 341 29 is_stmt 1 discriminator 1 view .LVU140
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 378              		.loc 1 341 17 is_stmt 0 discriminator 1 view .LVU141
 379 0176 032D     		cmp	r5, #3
 380 0178 5DD8     		bhi	.L24
 345:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector >= starting_sector) &&
 381              		.loc 1 345 21 is_stmt 1 view .LVU142
 345:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector >= starting_sector) &&
 382              		.loc 1 345 38 is_stmt 0 view .LVU143
 383 017a 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 345:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector >= starting_sector) &&
 384              		.loc 1 345 24 view .LVU144
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 17


 385 017c 002B     		cmp	r3, #0
 386 017e EAD0     		beq	.L18
 346:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector <= ending_sector))
 387              		.loc 1 346 38 discriminator 1 view .LVU145
 388 0180 A168     		ldr	r1, [r4, #8]
 389 0182 E268     		ldr	r2, [r4, #12]
 345:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector >= starting_sector) &&
 390              		.loc 1 345 65 discriminator 1 view .LVU146
 391 0184 0298     		ldr	r0, [sp, #8]
 392 0186 8142     		cmp	r1, r0
 393 0188 0398     		ldr	r0, [sp, #12]
 394 018a 72EB0000 		sbcs	r0, r2, r0
 395 018e E2D3     		bcc	.L18
 346:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         (cache_entry -> fx_cached_sector <= ending_sector))
 396              		.loc 1 346 78 view .LVU147
 397 0190 0598     		ldr	r0, [sp, #20]
 398 0192 8842     		cmp	r0, r1
 399 0194 0699     		ldr	r1, [sp, #24]
 400 0196 71EB0202 		sbcs	r2, r1, r2
 401 019a DCD3     		bcc	.L18
 351:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 402              		.loc 1 351 25 is_stmt 1 view .LVU148
 351:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 403              		.loc 1 351 41 is_stmt 0 view .LVU149
 404 019c 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 351:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 405              		.loc 1 351 28 view .LVU150
 406 019e 93B3     		cbz	r3, .L19
 358:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 407              		.loc 1 358 29 is_stmt 1 view .LVU151
 358:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 408              		.loc 1 358 43 is_stmt 0 view .LVU152
 409 01a0 DAF8A830 		ldr	r3, [r10, #168]
 358:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 410              		.loc 1 358 32 view .LVU153
 411 01a4 7BBB     		cbnz	r3, .L19
 364:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 412              		.loc 1 364 33 is_stmt 1 view .LVU154
 364:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 413              		.loc 1 364 43 is_stmt 0 view .LVU155
 414 01a6 DAF8B031 		ldr	r3, [r10, #432]
 364:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 415              		.loc 1 364 76 view .LVU156
 416 01aa 0133     		adds	r3, r3, #1
 417 01ac CAF8B031 		str	r3, [r10, #432]
 368:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_status =           FX_IO_ERROR;
 418              		.loc 1 368 33 is_stmt 1 view .LVU157
 368:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_status =           FX_IO_ERROR;
 419              		.loc 1 368 70 is_stmt 0 view .LVU158
 420 01b0 0123     		movs	r3, #1
 421 01b2 CAF88830 		str	r3, [r10, #136]
 369:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_buffer =           cache_entry -> fx_c
 422              		.loc 1 369 33 is_stmt 1 view .LVU159
 369:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_buffer =           cache_entry -> fx_c
 423              		.loc 1 369 69 is_stmt 0 view .LVU160
 424 01b6 9022     		movs	r2, #144
 425 01b8 CAF88C20 		str	r2, [r10, #140]
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 18


 370:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 426              		.loc 1 370 33 is_stmt 1 view .LVU161
 370:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 427              		.loc 1 370 93 is_stmt 0 view .LVU162
 428 01bc 2268     		ldr	r2, [r4]
 370:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #ifdef FX_DRIVER_USE_64BIT_LBA
 429              		.loc 1 370 69 view .LVU163
 430 01be CAF89020 		str	r2, [r10, #144]
 374:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 431              		.loc 1 374 33 is_stmt 1 view .LVU164
 374:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 432              		.loc 1 374 100 is_stmt 0 view .LVU165
 433 01c2 A268     		ldr	r2, [r4, #8]
 374:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif
 434              		.loc 1 374 77 view .LVU166
 435 01c4 CAF89420 		str	r2, [r10, #148]
 376:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_sector_type =      cache_entry -> fx_c
 436              		.loc 1 376 33 is_stmt 1 view .LVU167
 376:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 media_ptr -> fx_media_driver_sector_type =      cache_entry -> fx_c
 437              		.loc 1 376 70 is_stmt 0 view .LVU168
 438 01c8 CAF89830 		str	r3, [r10, #152]
 377:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 439              		.loc 1 377 33 is_stmt 1 view .LVU169
 377:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 440              		.loc 1 377 93 is_stmt 0 view .LVU170
 441 01cc A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 377:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 442              		.loc 1 377 74 view .LVU171
 443 01ce CAF8B830 		str	r3, [r10, #184]
 382:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 444              		.loc 1 382 33 is_stmt 1 view .LVU172
 382:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 445              		.loc 1 382 49 is_stmt 0 view .LVU173
 446 01d2 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 382:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 447              		.loc 1 382 36 view .LVU174
 448 01d4 042B     		cmp	r3, #4
 449 01d6 02D0     		beq	.L20
 388:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 }
 450              		.loc 1 388 37 is_stmt 1 view .LVU175
 388:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 }
 451              		.loc 1 388 79 is_stmt 0 view .LVU176
 452 01d8 0123     		movs	r3, #1
 453 01da CAF8B030 		str	r3, [r10, #176]
 454              	.L20:
 396:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 455              		.loc 1 396 33 is_stmt 1 view .LVU177
 396:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 456              		.loc 1 396 44 is_stmt 0 view .LVU178
 457 01de DAF8BC30 		ldr	r3, [r10, #188]
 458 01e2 5046     		mov	r0, r10
 459 01e4 9847     		blx	r3
 460              	.LVL31:
 399:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 461              		.loc 1 399 33 is_stmt 1 view .LVU179
 399:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 462              		.loc 1 399 75 is_stmt 0 view .LVU180
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 19


 463 01e6 0023     		movs	r3, #0
 464 01e8 CAF8B030 		str	r3, [r10, #176]
 402:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 465              		.loc 1 402 33 is_stmt 1 view .LVU181
 402:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 466              		.loc 1 402 47 is_stmt 0 view .LVU182
 467 01ec DAF88C30 		ldr	r3, [r10, #140]
 402:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 {
 468              		.loc 1 402 36 view .LVU183
 469 01f0 002B     		cmp	r3, #0
 470 01f2 40F08880 		bne	.L40
 412:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 471              		.loc 1 412 33 is_stmt 1 view .LVU184
 412:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 472              		.loc 1 412 78 is_stmt 0 view .LVU185
 473 01f6 2374     		strb	r3, [r4, #16]
 415:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 474              		.loc 1 415 33 is_stmt 1 view .LVU186
 415:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 475              		.loc 1 415 43 is_stmt 0 view .LVU187
 476 01f8 DAF82430 		ldr	r3, [r10, #36]
 415:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 477              		.loc 1 415 79 view .LVU188
 478 01fc 013B     		subs	r3, r3, #1
 479 01fe CAF82430 		str	r3, [r10, #36]
 416:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             }
 480              		.loc 1 416 33 is_stmt 1 view .LVU189
 416:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             }
 481              		.loc 1 416 48 is_stmt 0 view .LVU190
 482 0202 09F1FF39 		add	r9, r9, #-1
 483              	.LVL32:
 484              	.L19:
 421:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 485              		.loc 1 421 25 is_stmt 1 view .LVU191
 421:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         {
 486              		.loc 1 421 28 is_stmt 0 view .LVU192
 487 0206 97B1     		cbz	r7, .L21
 425:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 488              		.loc 1 425 29 is_stmt 1 view .LVU193
 425:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 489              		.loc 1 425 67 is_stmt 0 view .LVU194
 490 0208 0023     		movs	r3, #0
 491 020a 6374     		strb	r3, [r4, #17]
 428:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 492              		.loc 1 428 29 is_stmt 1 view .LVU195
 428:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 493              		.loc 1 428 61 is_stmt 0 view .LVU196
 494 020c 4FF0FF32 		mov	r2, #-1
 495 0210 4FF0FF33 		mov	r3, #-1
 496 0214 C4E90223 		strd	r2, [r4, #8]
 432:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 497              		.loc 1 432 29 is_stmt 1 view .LVU197
 432:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 498              		.loc 1 432 45 is_stmt 0 view .LVU198
 499 0218 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 432:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             {
 500              		.loc 1 432 32 view .LVU199
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 20


 501 021a 43B1     		cbz	r3, .L21
 436:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 502              		.loc 1 436 33 is_stmt 1 view .LVU200
 436:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 503              		.loc 1 436 78 is_stmt 0 view .LVU201
 504 021c 0023     		movs	r3, #0
 505 021e 2374     		strb	r3, [r4, #16]
 439:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 506              		.loc 1 439 33 is_stmt 1 view .LVU202
 439:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 507              		.loc 1 439 43 is_stmt 0 view .LVU203
 508 0220 DAF82430 		ldr	r3, [r10, #36]
 439:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                                 remaining_dirty--;
 509              		.loc 1 439 79 view .LVU204
 510 0224 013B     		subs	r3, r3, #1
 511 0226 CAF82430 		str	r3, [r10, #36]
 440:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             }
 512              		.loc 1 440 33 is_stmt 1 view .LVU205
 440:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                             }
 513              		.loc 1 440 48 is_stmt 0 view .LVU206
 514 022a 09F1FF39 		add	r9, r9, #-1
 515              	.LVL33:
 516              	.L21:
 445:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 517              		.loc 1 445 25 is_stmt 1 view .LVU207
 445:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 518              		.loc 1 445 32 is_stmt 0 view .LVU208
 519 022e 013E     		subs	r6, r6, #1
 520              	.LVL34:
 445:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 521              		.loc 1 445 32 view .LVU209
 522 0230 48F1FF38 		adc	r8, r8, #-1
 523              	.LVL35:
 445:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                     }
 524              		.loc 1 445 32 view .LVU210
 525 0234 93E7     		b	.L22
 526              	.LVL36:
 527              	.L24:
 478:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 }
 479:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 480:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Move the index to the next position since the bit map can only represent 32
 481:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                    cache entries.  */
 482:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 index =  index + (32 * FX_SECTOR_CACHE_DEPTH);
 528              		.loc 1 482 23 view .LVU211
 529 0236 3B46     		mov	r3, r7
 530 0238 5F46     		mov	r7, fp
 531 023a 9B46     		mov	fp, r3
 532              	.LVL37:
 533              		.loc 1 482 17 is_stmt 1 view .LVU212
 534              		.loc 1 482 23 is_stmt 0 view .LVU213
 535 023c 8037     		adds	r7, r7, #128
 536              	.LVL38:
 483:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             } while (index < cache_size);
 537              		.loc 1 483 21 is_stmt 1 view .LVU214
 538              		.loc 1 483 13 is_stmt 0 view .LVU215
 539 023e 049B     		ldr	r3, [sp, #16]
 540 0240 BB42     		cmp	r3, r7
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 21


 541 0242 0AD9     		bls	.L43
 542              	.LVL39:
 543              	.L27:
 334:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 544              		.loc 1 334 13 is_stmt 1 view .LVU216
 338:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 545              		.loc 1 338 17 view .LVU217
 338:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 546              		.loc 1 338 29 is_stmt 0 view .LVU218
 547 0244 07EB4704 		add	r4, r7, r7, lsl #1
 548 0248 E400     		lsls	r4, r4, #3
 549 024a 04F54A64 		add	r4, r4, #3232
 550 024e 5444     		add	r4, r4, r10
 551              	.LVL40:
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 552              		.loc 1 341 17 is_stmt 1 view .LVU219
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 553              		.loc 1 341 24 is_stmt 0 view .LVU220
 554 0250 0025     		movs	r5, #0
 555 0252 5B46     		mov	r3, fp
 556 0254 BB46     		mov	fp, r7
 557 0256 1F46     		mov	r7, r3
 558              	.LVL41:
 341:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 {
 559              		.loc 1 341 17 view .LVU221
 560 0258 8DE7     		b	.L17
 561              	.LVL42:
 562              	.L43:
 484:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 485:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if invalidation was required and there are no more valid sectors
 486:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                associated with this bit position.  */
 487:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if ((invalidate) && (remaining_valid == 0))
 563              		.loc 1 487 13 is_stmt 1 view .LVU222
 564              		.loc 1 487 16 is_stmt 0 view .LVU223
 565 025a BBF1000F 		cmp	fp, #0
 566 025e 0BD0     		beq	.L28
 567              		.loc 1 487 30 discriminator 1 view .LVU224
 568 0260 019B     		ldr	r3, [sp, #4]
 569 0262 4BB9     		cbnz	r3, .L28
 488:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 489:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 490:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Clear this bit position.  */
 491:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 media_ptr -> fx_media_sector_cache_hashed_sector_valid &=  ~(((ULONG)1) << bit_set)
 570              		.loc 1 491 17 is_stmt 1 view .LVU225
 571              		.loc 1 491 89 is_stmt 0 view .LVU226
 572 0264 0123     		movs	r3, #1
 573 0266 089A     		ldr	r2, [sp, #32]
 574 0268 03FA02F2 		lsl	r2, r3, r2
 575              		.loc 1 491 72 view .LVU227
 576 026c DAF82030 		ldr	r3, [r10, #32]
 577 0270 23EA0203 		bic	r3, r3, r2
 578 0274 CAF82030 		str	r3, [r10, #32]
 579              	.L28:
 492:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 493:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 494:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             /* Determine if the starting sector is being used for examination of the hash.  */
 495:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             if (use_starting_sector)
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 22


 580              		.loc 1 495 13 is_stmt 1 view .LVU228
 581              		.loc 1 495 16 is_stmt 0 view .LVU229
 582 0278 099B     		ldr	r3, [sp, #36]
 583 027a 43B3     		cbz	r3, .L29
 496:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 497:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 498:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Move to the next sector.  */
 499:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 starting_sector++;
 584              		.loc 1 499 17 is_stmt 1 view .LVU230
 585              		.loc 1 499 32 is_stmt 0 view .LVU231
 586 027c 029B     		ldr	r3, [sp, #8]
 587 027e 0133     		adds	r3, r3, #1
 588 0280 0293     		str	r3, [sp, #8]
 589              	.LVL43:
 590              		.loc 1 499 32 view .LVU232
 591 0282 039B     		ldr	r3, [sp, #12]
 592 0284 43F10003 		adc	r3, r3, #0
 593 0288 0393     		str	r3, [sp, #12]
 594              	.LVL44:
 595              	.L31:
 273:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         {
 596              		.loc 1 273 15 is_stmt 1 view .LVU233
 597 028a 079B     		ldr	r3, [sp, #28]
 598 028c 4BB3     		cbz	r3, .L44
 278:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 599              		.loc 1 278 13 view .LVU234
 278:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 600              		.loc 1 278 16 is_stmt 0 view .LVU235
 601 028e B9F1000F 		cmp	r9, #0
 602 0292 02D1     		bne	.L13
 278:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 603              		.loc 1 278 40 discriminator 1 view .LVU236
 604 0294 BBF1000F 		cmp	fp, #0
 605 0298 2CD0     		beq	.L36
 606              	.L13:
 286:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 607              		.loc 1 286 13 is_stmt 1 view .LVU237
 286:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 608              		.loc 1 286 16 is_stmt 0 view .LVU238
 609 029a 56EA0803 		orrs	r3, r6, r8
 610 029e 2CD0     		beq	.L37
 286:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 611              		.loc 1 286 32 discriminator 1 view .LVU239
 612 02a0 059B     		ldr	r3, [sp, #20]
 613 02a2 029A     		ldr	r2, [sp, #8]
 614 02a4 9342     		cmp	r3, r2
 615 02a6 069B     		ldr	r3, [sp, #24]
 616 02a8 0399     		ldr	r1, [sp, #12]
 617 02aa 8B41     		sbcs	r3, r3, r1
 618 02ac 28D3     		bcc	.L38
 294:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 619              		.loc 1 294 13 is_stmt 1 view .LVU240
 294:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 620              		.loc 1 294 16 is_stmt 0 view .LVU241
 621 02ae 099B     		ldr	r3, [sp, #36]
 622 02b0 002B     		cmp	r3, #0
 623 02b2 3FF44DAF 		beq	.L39
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 23


 298:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 624              		.loc 1 298 17 is_stmt 1 view .LVU242
 298:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 625              		.loc 1 298 62 is_stmt 0 view .LVU243
 626 02b6 0AF50053 		add	r3, r10, #8192
 627 02ba D3F8A034 		ldr	r3, [r3, #1184]
 298:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 628              		.loc 1 298 23 view .LVU244
 629 02be 1340     		ands	r3, r3, r2
 630              	.LVL45:
 301:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 631              		.loc 1 301 17 is_stmt 1 view .LVU245
 301:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 632              		.loc 1 301 25 is_stmt 0 view .LVU246
 633 02c0 03F01F03 		and	r3, r3, #31
 634              	.LVL46:
 301:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 635              		.loc 1 301 25 view .LVU247
 636 02c4 0893     		str	r3, [sp, #32]
 637              	.LVL47:
 304:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 638              		.loc 1 304 17 is_stmt 1 view .LVU248
 304:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 639              		.loc 1 304 23 is_stmt 0 view .LVU249
 640 02c6 9F00     		lsls	r7, r3, #2
 641              	.LVL48:
 642              	.L15:
 331:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 643              		.loc 1 331 13 is_stmt 1 view .LVU250
 331:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 644              		.loc 1 331 29 is_stmt 0 view .LVU251
 645 02c8 0023     		movs	r3, #0
 646 02ca 0193     		str	r3, [sp, #4]
 647 02cc BAE7     		b	.L27
 648              	.LVL49:
 649              	.L29:
 500:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 501:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             else
 502:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             {
 503:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 504:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Move to next bit in the map.  */
 505:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 valid_bit_map =  valid_bit_map >> 1;
 650              		.loc 1 505 17 is_stmt 1 view .LVU252
 651              		.loc 1 505 31 is_stmt 0 view .LVU253
 652 02ce 079B     		ldr	r3, [sp, #28]
 653 02d0 5B08     		lsrs	r3, r3, #1
 654 02d2 0793     		str	r3, [sp, #28]
 655              	.LVL50:
 506:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 507:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 /* Increment the set bit marker.  */
 508:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                 bit_set++;
 656              		.loc 1 508 17 is_stmt 1 view .LVU254
 657              		.loc 1 508 24 is_stmt 0 view .LVU255
 658 02d4 089B     		ldr	r3, [sp, #32]
 659              	.LVL51:
 660              		.loc 1 508 24 view .LVU256
 661 02d6 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 24


 662 02d8 0893     		str	r3, [sp, #32]
 663              	.LVL52:
 664              		.loc 1 508 24 view .LVU257
 665 02da D6E7     		b	.L31
 666              	.LVL53:
 667              	.L11:
 265:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         }
 668              		.loc 1 265 33 view .LVU258
 669 02dc 0123     		movs	r3, #1
 670 02de 0993     		str	r3, [sp, #36]
 671 02e0 2AE7     		b	.L12
 672              	.LVL54:
 673              	.L44:
 509:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****             }
 510:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****         }
 511:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     }
 512:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #else
 513:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     FX_PARAMETER_NOT_USED(media_ptr);
 514:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     FX_PARAMETER_NOT_USED(starting_sector);
 515:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     FX_PARAMETER_NOT_USED(sectors);
 516:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     FX_PARAMETER_NOT_USED(invalidate);
 517:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** #endif /* FX_DISABLE_CACHE */
 518:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** 
 519:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     /* If we get here, return successful status to the caller.  */
 520:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****     return(FX_SUCCESS);
 674              		.loc 1 520 11 view .LVU259
 675 02e2 0193     		str	r3, [sp, #4]
 676 02e4 10E0     		b	.L1
 677              	.LVL55:
 678              	.L33:
 679              		.loc 1 520 11 view .LVU260
 680 02e6 CDF804B0 		str	fp, [sp, #4]
 681 02ea 0DE0     		b	.L1
 682              	.L34:
 205:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c ****                         }
 683              		.loc 1 205 46 view .LVU261
 684 02ec 0193     		str	r3, [sp, #4]
 685 02ee 0BE0     		b	.L1
 686              	.L35:
 687              		.loc 1 520 11 view .LVU262
 688 02f0 0193     		str	r3, [sp, #4]
 689 02f2 09E0     		b	.L1
 690              	.LVL56:
 691              	.L36:
 692              		.loc 1 520 11 view .LVU263
 693 02f4 CDF804B0 		str	fp, [sp, #4]
 694 02f8 06E0     		b	.L1
 695              	.LVL57:
 696              	.L37:
 697              		.loc 1 520 11 view .LVU264
 698 02fa 0023     		movs	r3, #0
 699 02fc 0193     		str	r3, [sp, #4]
 700 02fe 03E0     		b	.L1
 701              	.L38:
 702 0300 0023     		movs	r3, #0
 703 0302 0193     		str	r3, [sp, #4]
 704 0304 00E0     		b	.L1
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 25


 705              	.LVL58:
 706              	.L40:
 707              		.loc 1 520 11 view .LVU265
 708 0306 0193     		str	r3, [sp, #4]
 709              	.LVL59:
 710              	.L1:
 521:Middlewares/ST/filex/common/src/fx_utility_logical_sector_flush.c **** }
 711              		.loc 1 521 1 view .LVU266
 712 0308 0198     		ldr	r0, [sp, #4]
 713 030a 0BB0     		add	sp, sp, #44
 714              	.LCFI2:
 715              		.cfi_def_cfa_offset 36
 716              		@ sp needed
 717 030c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 718              		.loc 1 521 1 view .LVU267
 719              		.cfi_endproc
 720              	.LFE8:
 722              		.text
 723              	.Letext0:
 724              		.file 2 "Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 725              		.file 3 "Middlewares/ST/threadx/common/inc/tx_api.h"
 726              		.file 4 "Middlewares/ST/filex/common/inc/fx_api.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s 			page 26


DEFINED SYMBOLS
                            *ABS*:00000000 fx_utility_logical_sector_flush.c
C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s:20     .text._fx_utility_logical_sector_flush:00000000 $t
C:\Users\HP\AppData\Local\Temp\ccpqFjf5.s:26     .text._fx_utility_logical_sector_flush:00000000 _fx_utility_logical_sector_flush

NO UNDEFINED SYMBOLS
