ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ux_host_class_storage_transport_cb.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text._ux_host_class_storage_transport_cb,"ax",%progbits
  20              		.align	1
  21              		.global	_ux_host_class_storage_transport_cb
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	_ux_host_class_storage_transport_cb:
  27              	.LVL0:
  28              	.LFB11:
  29              		.file 1 "Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c"
   1:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
   2:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */
   3:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */
   5:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*       This software is licensed under the Microsoft Software License   */
   6:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*       and in the root directory of this software.                      */
   9:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */
  10:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
  11:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  12:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  13:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
  14:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
  15:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**                                                                       */ 
  16:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /** USBX Component                                                        */ 
  17:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**                                                                       */
  18:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**   Storage Class                                                       */
  19:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**                                                                       */
  20:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
  21:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
  22:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  23:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  24:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /* Include necessary system files.  */
  25:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  26:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** #define UX_SOURCE_CODE
  27:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  28:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** #include "ux_api.h"
  29:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** #include "ux_host_class_storage.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 2


  30:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** #include "ux_host_stack.h"
  31:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  32:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  33:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** #if !defined(UX_HOST_STANDALONE)
  34:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/ 
  35:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  36:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  FUNCTION                                               RELEASE        */ 
  37:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  38:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    _ux_host_class_storage_transport_cb                 PORTABLE C      */ 
  39:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                           6.1.11       */
  40:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  AUTHOR                                                                */
  41:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */
  42:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    Chaoqiong Xiao, Microsoft Corporation                               */
  43:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */
  44:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  DESCRIPTION                                                           */
  45:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  46:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    This function is the transport layer for the Control/Bulk           */ 
  47:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    transport. The command is sent on the control endpoint and the      */ 
  48:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    data payload on the bulk endpoint.                                  */ 
  49:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  50:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  INPUT                                                                 */ 
  51:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  52:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    storage                               Pointer to storage class      */ 
  53:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    data_pointer                          Pointer to data               */ 
  54:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  55:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  OUTPUT                                                                */ 
  56:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  57:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    Completion Status                                                   */ 
  58:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  59:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  CALLS                                                                 */ 
  60:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  61:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    _ux_host_stack_transfer_request       Process host stack transfer   */ 
  62:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    _ux_host_stack_transfer_request_abort Abort transfer request        */ 
  63:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    _ux_utility_long_get                  Get 32-bit word               */ 
  64:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    _ux_host_semaphore_get                Get semaphore                 */ 
  65:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  66:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  CALLED BY                                                             */ 
  67:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  68:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    Storage Class                                                       */ 
  69:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  70:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  RELEASE HISTORY                                                       */ 
  71:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  72:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*    DATE              NAME                      DESCRIPTION             */ 
  73:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */ 
  74:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  05-19-2020     Chaoqiong Xiao           Initial Version 6.0           */
  75:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  09-30-2020     Chaoqiong Xiao           Modified comment(s),          */
  76:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            prefixed UX to MS_TO_TICK,  */
  77:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            resulting in version 6.1    */
  78:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  01-31-2022     Chaoqiong Xiao           Modified comment(s),          */
  79:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            fixed CB request index,     */
  80:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            refined macros names,       */
  81:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            resulting in version 6.1.10 */
  82:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*  04-25-2022     Chaoqiong Xiao           Modified comment(s),          */
  83:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            internal clean up,          */
  84:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                            resulting in version 6.1.11 */
  85:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /*                                                                        */
  86:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** /**************************************************************************/
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 3


  87:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** UINT  _ux_host_class_storage_transport_cb(UX_HOST_CLASS_STORAGE *storage, UCHAR *data_pointer)
  88:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** {
  30              		.loc 1 88 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 88 1 is_stmt 0 view .LVU1
  35 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 24
  38              		.cfi_offset 3, -24
  39              		.cfi_offset 4, -20
  40              		.cfi_offset 5, -16
  41              		.cfi_offset 6, -12
  42              		.cfi_offset 7, -8
  43              		.cfi_offset 14, -4
  44 0002 0546     		mov	r5, r0
  45 0004 0F46     		mov	r7, r1
  89:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  90:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** UX_TRANSFER     *transfer_request;
  46              		.loc 1 90 1 is_stmt 1 view .LVU2
  91:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** UINT            status;
  47              		.loc 1 91 1 view .LVU3
  92:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** UCHAR           *ufi;
  48              		.loc 1 92 1 view .LVU4
  93:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** UCHAR           *cbw;
  49              		.loc 1 93 1 view .LVU5
  94:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** ULONG           data_phase_requested_length;
  50              		.loc 1 94 1 view .LVU6
  95:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** UX_ENDPOINT     *control_endpoint;
  51              		.loc 1 95 1 view .LVU7
  96:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     
  97:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
  98:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Reset the data phase memory size.  */
  99:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     storage -> ux_host_class_storage_data_phase_length =  0;
  52              		.loc 1 99 5 view .LVU8
  53              		.loc 1 99 56 is_stmt 0 view .LVU9
  54 0006 0023     		movs	r3, #0
  55 0008 C0F88C30 		str	r3, [r0, #140]
 100:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 101:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* We need to get the default control endpoint transfer request pointer */
 102:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     control_endpoint =  &storage -> ux_host_class_storage_device -> ux_device_control_endpoint;
  56              		.loc 1 102 5 is_stmt 1 view .LVU10
  57              		.loc 1 102 34 is_stmt 0 view .LVU11
  58 000c 8468     		ldr	r4, [r0, #8]
  59              	.LVL1:
 103:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request =  &control_endpoint -> ux_endpoint_transfer_request;
  60              		.loc 1 103 5 is_stmt 1 view .LVU12
  61              		.loc 1 103 22 is_stmt 0 view .LVU13
  62 000e 04F1B406 		add	r6, r4, #180
  63              	.LVL2:
 104:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 105:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Initialize the transfer request with the control SETUP values.  */
 106:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_data_pointer =      UX_NULL;
  64              		.loc 1 106 5 is_stmt 1 view .LVU14
  65              		.loc 1 106 58 is_stmt 0 view .LVU15
  66 0012 C4F8BC30 		str	r3, [r4, #188]
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 4


 107:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_requested_length =  0;
  67              		.loc 1 107 5 is_stmt 1 view .LVU16
  68              		.loc 1 107 62 is_stmt 0 view .LVU17
  69 0016 C4F8C030 		str	r3, [r4, #192]
 108:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_function =          0;
  70              		.loc 1 108 5 is_stmt 1 view .LVU18
  71              		.loc 1 108 54 is_stmt 0 view .LVU19
  72 001a C4F8CC30 		str	r3, [r4, #204]
 109:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_type =              UX_REQUEST_OUT | UX_REQUEST_TYPE_CL
  73              		.loc 1 109 5 is_stmt 1 view .LVU20
  74              		.loc 1 109 50 is_stmt 0 view .LVU21
  75 001e 2122     		movs	r2, #33
  76 0020 C4F8C820 		str	r2, [r4, #200]
 110:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_value =             0;
  77              		.loc 1 110 5 is_stmt 1 view .LVU22
  78              		.loc 1 110 51 is_stmt 0 view .LVU23
  79 0024 C4F8D030 		str	r3, [r4, #208]
 111:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_index =             storage -> ux_host_class_storage_in
  80              		.loc 1 111 5 is_stmt 1 view .LVU24
  81              		.loc 1 111 73 is_stmt 0 view .LVU25
  82 0028 C368     		ldr	r3, [r0, #12]
  83              		.loc 1 111 134 view .LVU26
  84 002a 5B69     		ldr	r3, [r3, #20]
  85              		.loc 1 111 51 view .LVU27
  86 002c C4F8D430 		str	r3, [r4, #212]
 112:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     
 113:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Use a pointer for the ufi portion of the command.  */
 114:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     cbw =  (UCHAR *) storage -> ux_host_class_storage_cbw;
  87              		.loc 1 114 5 is_stmt 1 view .LVU28
  88              	.LVL3:
 115:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     ufi =  cbw + UX_HOST_CLASS_STORAGE_CBW_CB;
  89              		.loc 1 115 5 view .LVU29
  90              		.loc 1 115 9 is_stmt 0 view .LVU30
  91 0030 00F12B03 		add	r3, r0, #43
  92              	.LVL4:
 116:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 117:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Fill in the transfer request parameters.  */
 118:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_data_pointer =      ufi;
  93              		.loc 1 118 5 is_stmt 1 view .LVU31
  94              		.loc 1 118 58 is_stmt 0 view .LVU32
  95 0034 C4F8BC30 		str	r3, [r4, #188]
 119:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     transfer_request -> ux_transfer_request_requested_length =  (ULONG) * (cbw + UX_HOST_CLASS_STOR
  96              		.loc 1 119 5 is_stmt 1 view .LVU33
  97              		.loc 1 119 73 is_stmt 0 view .LVU34
  98 0038 90F82A30 		ldrb	r3, [r0, #42]	@ zero_extendqisi2
  99              	.LVL5:
 100              		.loc 1 119 62 view .LVU35
 101 003c C4F8C030 		str	r3, [r4, #192]
 120:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 121:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Send the ufi block on the control endpoint.  */
 122:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     _ux_host_stack_transfer_request(transfer_request);
 102              		.loc 1 122 5 is_stmt 1 view .LVU36
 103 0040 3046     		mov	r0, r6
 104              	.LVL6:
 105              		.loc 1 122 5 is_stmt 0 view .LVU37
 106 0042 FFF7FEFF 		bl	_ux_host_stack_transfer_request
 107              	.LVL7:
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 5


 123:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 124:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Check the transfer status. If there is a transport error, the host must perform
 125:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****        a reset recovery.  */
 126:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     if (transfer_request -> ux_transfer_request_completion_code != UX_SUCCESS)
 108              		.loc 1 126 5 is_stmt 1 view .LVU38
 109              		.loc 1 126 26 is_stmt 0 view .LVU39
 110 0046 D4F8E800 		ldr	r0, [r4, #232]
 111              		.loc 1 126 8 view .LVU40
 112 004a 00B1     		cbz	r0, .L7
 113              	.LVL8:
 114              	.L1:
 127:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         return(transfer_request -> ux_transfer_request_completion_code);
 128:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 129:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Get the length of the data payload.  */    
 130:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     data_phase_requested_length =  _ux_utility_long_get(cbw + UX_HOST_CLASS_STORAGE_CBW_DATA_LENGTH
 131:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     
 132:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Perform the data stage - if there is any.  */    
 133:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     if (data_phase_requested_length != 0)
 134:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     {
 135:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 136:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Check the direction and determine which endpoint to use.  */
 137:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         if (*(cbw + UX_HOST_CLASS_STORAGE_CBW_FLAGS) == UX_HOST_CLASS_STORAGE_DATA_IN)
 138:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             transfer_request =  &storage -> ux_host_class_storage_bulk_in_endpoint -> ux_endpoint_t
 139:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         else            
 140:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             transfer_request =  &storage -> ux_host_class_storage_bulk_out_endpoint -> ux_endpoint_
 141:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 142:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Fill in the transfer request data payload buffer.  */
 143:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         transfer_request -> ux_transfer_request_data_pointer =  data_pointer;
 144:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 145:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Store the requested length in the transfer request.  */
 146:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         transfer_request -> ux_transfer_request_requested_length =  data_phase_requested_length;
 147:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 148:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Perform data payload transfer (in or out).  */
 149:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         status =  _ux_host_stack_transfer_request(transfer_request);
 150:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 151:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Check the status of the data payload.  */
 152:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         if (status != UX_SUCCESS)
 153:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             return(status);
 154:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 155:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Wait for the completion of the transfer request.  */
 156:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         status =  _ux_host_semaphore_get(&transfer_request -> ux_transfer_request_semaphore, UX_MS_
 157:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 158:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* Get the actual transfer length and update the cumulated stored value for upper layers.  
 159:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****            This could be a non complete packet. But we don't test here because it only matters for
 160:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****            sector read.  */
 161:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         storage -> ux_host_class_storage_data_phase_length += transfer_request -> ux_transfer_reque
 162:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 163:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         /* If the semaphore did not succeed we probably have a timeout.  */
 164:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         if (status != UX_SUCCESS)
 165:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         {
 166:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 167:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             /* All transfers pending need to abort. There may have been a partial transfer.  */
 168:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             _ux_host_stack_transfer_request_abort(transfer_request);
 169:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 170:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             /* Set the completion code.  */
 171:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             transfer_request -> ux_transfer_request_completion_code =  UX_TRANSFER_TIMEOUT;
 172:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 6


 173:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             /* Error trap. */
 174:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             _ux_system_error_handler(UX_SYSTEM_LEVEL_THREAD, UX_SYSTEM_CONTEXT_CLASS, UX_TRANSFER_T
 175:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 176:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             /* If trace is enabled, insert this event into the trace buffer.  */
 177:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             UX_TRACE_IN_LINE_INSERT(UX_TRACE_ERROR, UX_TRANSFER_TIMEOUT, transfer_request, 0, 0, UX
 178:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 179:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             /* There was an error, return to the caller.  */
 180:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             return(UX_TRANSFER_TIMEOUT);
 181:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         }            
 182:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     }
 183:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 184:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     /* Return the status code.  */
 185:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     return(transfer_request -> ux_transfer_request_completion_code);
 186:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** }
 115              		.loc 1 186 1 view .LVU41
 116 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 117              	.LVL9:
 118              	.L7:
 130:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     
 119              		.loc 1 130 5 is_stmt 1 view .LVU42
 130:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     
 120              		.loc 1 130 36 is_stmt 0 view .LVU43
 121 004e 05F12400 		add	r0, r5, #36
 122 0052 FFF7FEFF 		bl	_ux_utility_long_get
 123              	.LVL10:
 133:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     {
 124              		.loc 1 133 5 is_stmt 1 view .LVU44
 133:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****     {
 125              		.loc 1 133 8 is_stmt 0 view .LVU45
 126 0056 0346     		mov	r3, r0
 127 0058 C8B1     		cbz	r0, .L3
 137:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             transfer_request =  &storage -> ux_host_class_storage_bulk_in_endpoint -> ux_endpoint_t
 128              		.loc 1 137 9 is_stmt 1 view .LVU46
 137:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             transfer_request =  &storage -> ux_host_class_storage_bulk_in_endpoint -> ux_endpoint_t
 129              		.loc 1 137 13 is_stmt 0 view .LVU47
 130 005a 95F82820 		ldrb	r2, [r5, #40]	@ zero_extendqisi2
 137:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             transfer_request =  &storage -> ux_host_class_storage_bulk_in_endpoint -> ux_endpoint_t
 131              		.loc 1 137 12 view .LVU48
 132 005e 802A     		cmp	r2, #128
 133 0060 17D0     		beq	.L8
 140:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 134              		.loc 1 140 13 is_stmt 1 view .LVU49
 140:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 135              		.loc 1 140 42 is_stmt 0 view .LVU50
 136 0062 2E69     		ldr	r6, [r5, #16]
 137              	.LVL11:
 140:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 138              		.loc 1 140 30 view .LVU51
 139 0064 3036     		adds	r6, r6, #48
 140              	.LVL12:
 141              	.L5:
 143:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 142              		.loc 1 143 9 is_stmt 1 view .LVU52
 143:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 143              		.loc 1 143 62 is_stmt 0 view .LVU53
 144 0066 B760     		str	r7, [r6, #8]
 146:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 7


 145              		.loc 1 146 9 is_stmt 1 view .LVU54
 146:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 146              		.loc 1 146 66 is_stmt 0 view .LVU55
 147 0068 F360     		str	r3, [r6, #12]
 149:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 148              		.loc 1 149 9 is_stmt 1 view .LVU56
 149:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 149              		.loc 1 149 19 is_stmt 0 view .LVU57
 150 006a 3046     		mov	r0, r6
 151              	.LVL13:
 149:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 152              		.loc 1 149 19 view .LVU58
 153 006c FFF7FEFF 		bl	_ux_host_stack_transfer_request
 154              	.LVL14:
 152:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             return(status);
 155              		.loc 1 152 9 is_stmt 1 view .LVU59
 152:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****             return(status);
 156              		.loc 1 152 12 is_stmt 0 view .LVU60
 157 0070 0028     		cmp	r0, #0
 158 0072 EBD1     		bne	.L1
 156:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 159              		.loc 1 156 9 is_stmt 1 view .LVU61
 156:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 160              		.loc 1 156 19 is_stmt 0 view .LVU62
 161 0074 4FF47A71 		mov	r1, #1000
 162 0078 06F14400 		add	r0, r6, #68
 163              	.LVL15:
 156:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 164              		.loc 1 156 19 view .LVU63
 165 007c FFF7FEFF 		bl	_ux_utility_semaphore_get
 166              	.LVL16:
 161:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 167              		.loc 1 161 9 is_stmt 1 view .LVU64
 161:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 168              		.loc 1 161 80 is_stmt 0 view .LVU65
 169 0080 3269     		ldr	r2, [r6, #16]
 161:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 170              		.loc 1 161 60 view .LVU66
 171 0082 D5F88C30 		ldr	r3, [r5, #140]
 172 0086 1344     		add	r3, r3, r2
 173 0088 C5F88C30 		str	r3, [r5, #140]
 164:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         {
 174              		.loc 1 164 9 is_stmt 1 view .LVU67
 164:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         {
 175              		.loc 1 164 12 is_stmt 0 view .LVU68
 176 008c 20B9     		cbnz	r0, .L9
 177              	.LVL17:
 178              	.L3:
 185:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** }
 179              		.loc 1 185 5 is_stmt 1 view .LVU69
 185:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** }
 180              		.loc 1 185 29 is_stmt 0 view .LVU70
 181 008e 706B     		ldr	r0, [r6, #52]
 182 0090 DCE7     		b	.L1
 183              	.LVL18:
 184              	.L8:
 138:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         else            
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 8


 185              		.loc 1 138 13 is_stmt 1 view .LVU71
 138:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         else            
 186              		.loc 1 138 42 is_stmt 0 view .LVU72
 187 0092 6E69     		ldr	r6, [r5, #20]
 188              	.LVL19:
 138:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         else            
 189              		.loc 1 138 30 view .LVU73
 190 0094 3036     		adds	r6, r6, #48
 191              	.LVL20:
 138:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         else            
 192              		.loc 1 138 30 view .LVU74
 193 0096 E6E7     		b	.L5
 194              	.LVL21:
 195              	.L9:
 168:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 196              		.loc 1 168 13 is_stmt 1 view .LVU75
 197 0098 3046     		mov	r0, r6
 198              	.LVL22:
 168:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 199              		.loc 1 168 13 is_stmt 0 view .LVU76
 200 009a FFF7FEFF 		bl	_ux_host_stack_transfer_request_abort
 201              	.LVL23:
 171:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 202              		.loc 1 171 13 is_stmt 1 view .LVU77
 171:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 203              		.loc 1 171 69 is_stmt 0 view .LVU78
 204 009e 5C24     		movs	r4, #92
 205              	.LVL24:
 171:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         
 206              		.loc 1 171 69 view .LVU79
 207 00a0 7463     		str	r4, [r6, #52]
 174:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c **** 
 208              		.loc 1 174 13 is_stmt 1 view .LVU80
 209 00a2 2246     		mov	r2, r4
 210 00a4 0721     		movs	r1, #7
 211 00a6 0220     		movs	r0, #2
 212 00a8 FFF7FEFF 		bl	_ux_system_error_handler
 213              	.LVL25:
 180:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         }            
 214              		.loc 1 180 13 view .LVU81
 180:Middlewares/ST/usbx/common/usbx_host_classes/src/ux_host_class_storage_transport_cb.c ****         }            
 215              		.loc 1 180 19 is_stmt 0 view .LVU82
 216 00ac 2046     		mov	r0, r4
 217 00ae CDE7     		b	.L1
 218              		.cfi_endproc
 219              	.LFE11:
 221              		.text
 222              	.Letext0:
 223              		.file 2 "Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 224              		.file 3 "Middlewares/ST/threadx/common/inc/tx_api.h"
 225              		.file 4 "Middlewares/ST/usbx/common/core/inc/ux_api.h"
 226              		.file 5 "Middlewares/ST/usbx/common/usbx_host_classes/inc/ux_host_class_storage.h"
 227              		.file 6 "Middlewares/ST/usbx/common/core/inc/ux_host_stack.h"
 228              		.file 7 "Middlewares/ST/usbx/common/core/inc/ux_utility.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 ux_host_class_storage_transport_cb.c
C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s:20     .text._ux_host_class_storage_transport_cb:00000000 $t
C:\Users\HP\AppData\Local\Temp\ccbmTPJo.s:26     .text._ux_host_class_storage_transport_cb:00000000 _ux_host_class_storage_transport_cb

UNDEFINED SYMBOLS
_ux_host_stack_transfer_request
_ux_utility_long_get
_ux_utility_semaphore_get
_ux_host_stack_transfer_request_abort
_ux_system_error_handler
