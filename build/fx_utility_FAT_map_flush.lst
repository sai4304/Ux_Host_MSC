ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"fx_utility_FAT_map_flush.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text._fx_utility_FAT_map_flush,"ax",%progbits
  20              		.align	1
  21              		.global	_fx_utility_FAT_map_flush
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	_fx_utility_FAT_map_flush:
  27              	.LVL0:
  28              	.LFB8:
  29              		.file 1 "Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c"
   1:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
   2:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
   3:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
   5:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*       This software is licensed under the Microsoft Software License   */
   6:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*       and in the root directory of this software.                      */
   9:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  10:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  11:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  12:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  13:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  14:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  15:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**                                                                       */
  16:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /** FileX Component                                                       */
  17:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**                                                                       */
  18:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**   Utility                                                             */
  19:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**                                                                       */
  20:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  21:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  22:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  23:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** #define FX_SOURCE_CODE
  24:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  25:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  26:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /* Include necessary system files.  */
  27:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  28:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** #include "fx_api.h"
  29:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** #include "fx_system.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 2


  30:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** #include "fx_utility.h"
  31:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  32:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  33:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  34:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  35:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  FUNCTION                                               RELEASE        */
  36:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  37:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    _fx_utility_FAT_map_flush                           PORTABLE C      */
  38:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                           6.1          */
  39:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  AUTHOR                                                                */
  40:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  41:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    William E. Lamie, Microsoft Corporation                             */
  42:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  43:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  DESCRIPTION                                                           */
  44:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  45:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    This function updates mirrors changes in the primary FAT to each of */
  46:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    secondary FATs in the media.                                        */
  47:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  48:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  INPUT                                                                 */
  49:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  50:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    media_ptr                             Media control block pointer   */
  51:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  52:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  OUTPUT                                                                */
  53:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  54:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    return status                                                       */
  55:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  56:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  CALLS                                                                 */
  57:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  58:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    _fx_utility_logical_sector_read       Read FAT sector into memory   */
  59:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    _fx_utility_logical_sector_write      Write FAT sector back to disk */
  60:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  61:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  CALLED BY                                                             */
  62:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  63:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    FileX System Functions                                              */
  64:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  65:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  RELEASE HISTORY                                                       */
  66:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  67:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*    DATE              NAME                      DESCRIPTION             */
  68:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  69:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  05-19-2020     William E. Lamie         Initial Version 6.0           */
  70:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*  09-30-2020     William E. Lamie         Modified comment(s),          */
  71:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                            resulting in version 6.1    */
  72:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /*                                                                        */
  73:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** /**************************************************************************/
  74:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** UINT  _fx_utility_FAT_map_flush(FX_MEDIA *media_ptr)
  75:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** {
  30              		.loc 1 75 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 75 1 is_stmt 0 view .LVU1
  35 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 32
  38              		.cfi_offset 4, -32
  39              		.cfi_offset 5, -28
  40              		.cfi_offset 6, -24
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 3


  41              		.cfi_offset 7, -20
  42              		.cfi_offset 8, -16
  43              		.cfi_offset 9, -12
  44              		.cfi_offset 10, -8
  45              		.cfi_offset 14, -4
  46 0004 84B0     		sub	sp, sp, #16
  47              	.LCFI1:
  48              		.cfi_def_cfa_offset 48
  49 0006 0546     		mov	r5, r0
  76:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  77:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** ULONG FAT_sector, last_sector;
  50              		.loc 1 77 1 is_stmt 1 view .LVU2
  78:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** UINT  i, status, FATs;
  51              		.loc 1 78 1 view .LVU3
  79:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** UCHAR sectors_per_bit;
  52              		.loc 1 79 1 view .LVU4
  80:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  81:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  82:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     /* Determine how many FAT sectors each bit in the bit map represents.  Depending on
  83:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****        the number of sectors in the primary FAT, each bit in this map may represent one
  84:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****        or more primary FAT sectors. Because of this, it is possible some FAT sectors that
  85:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****        were not changed may get flushed out to the secondary FAT.  However, this method
  86:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****        provides very nice performance benefits during normal operation and is much more
  87:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****        reasonable than performing a total copy of the primary FAT to each secondary FAT
  88:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****        on media flush and media close.  */
  89:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     if (media_ptr -> fx_media_sectors_per_FAT % (FX_FAT_MAP_SIZE << 3) == 0)
  53              		.loc 1 89 5 view .LVU5
  54              		.loc 1 89 19 is_stmt 0 view .LVU6
  55 0008 836D     		ldr	r3, [r0, #88]
  56              		.loc 1 89 47 view .LVU7
  57 000a C3F30902 		ubfx	r2, r3, #0, #10
  58              		.loc 1 89 8 view .LVU8
  59 000e 1AB9     		cbnz	r2, .L2
  90:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
  91:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         sectors_per_bit =  (UCHAR)(media_ptr -> fx_media_sectors_per_FAT / (FX_FAT_MAP_SIZE << 3));
  60              		.loc 1 91 9 is_stmt 1 view .LVU9
  61              		.loc 1 91 25 is_stmt 0 view .LVU10
  62 0010 C3F38729 		ubfx	r9, r3, #10, #8
  63              	.LVL1:
  64              	.L3:
  92:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
  93:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     else
  94:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
  95:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         sectors_per_bit =  (UCHAR)(media_ptr -> fx_media_sectors_per_FAT / (FX_FAT_MAP_SIZE << 3) +
  96:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
  97:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
  98:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     /* Loop through the FAT update map to mirror primary FAT sectors to secondary FAT(s).  */
  99:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     for (i = 0; i < FX_FAT_MAP_SIZE << 3; i++)
  65              		.loc 1 99 5 is_stmt 1 view .LVU11
  66              		.loc 1 99 12 is_stmt 0 view .LVU12
  67 0014 0027     		movs	r7, #0
  68              		.loc 1 99 5 view .LVU13
  69 0016 33E0     		b	.L4
  70              	.LVL2:
  71              	.L2:
  95:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
  72              		.loc 1 95 9 is_stmt 1 view .LVU14
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 4


  95:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
  73              		.loc 1 95 28 is_stmt 0 view .LVU15
  74 0018 C3F38729 		ubfx	r9, r3, #10, #8
  95:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
  75              		.loc 1 95 25 view .LVU16
  76 001c 09F10109 		add	r9, r9, #1
  77 0020 5FFA89F9 		uxtb	r9, r9
  78              	.LVL3:
  95:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
  79              		.loc 1 95 25 view .LVU17
  80 0024 F6E7     		b	.L3
  81              	.LVL4:
  82              	.L18:
 100:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 101:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 102:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         /* Determine if there are FAT changes specified by this entry.  */
 103:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         if ((media_ptr -> fx_media_fat_secondary_update_map[i >> 3] & (1 << (i & 7))) == 0)
 104:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 105:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 106:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             /* No, look at the next bit map entry.  */
 107:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             continue;
 108:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         }
 109:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 110:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         /* Setup the parameters for performing the update.  */
 111:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         FAT_sector =    i * sectors_per_bit + media_ptr -> fx_media_reserved_sectors;
 112:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         last_sector =   FAT_sector + sectors_per_bit;
 113:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 114:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         /* Make sure the last update sector is within range.  */
 115:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         if (last_sector > (media_ptr -> fx_media_sectors_per_FAT + media_ptr -> fx_media_reserved_s
 116:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 117:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             last_sector =  media_ptr -> fx_media_sectors_per_FAT + media_ptr -> fx_media_reserved_s
 118:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         }
 119:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 120:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         /* Loop to mirror primary FAT sectors to secondary FAT(s).  */
 121:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         for (; FAT_sector < last_sector; FAT_sector++)
  83              		.loc 1 121 42 is_stmt 1 view .LVU18
  84              		.loc 1 121 52 is_stmt 0 view .LVU19
  85 0026 08F10108 		add	r8, r8, #1
  86              	.LVL5:
  87              	.L11:
  88              		.loc 1 121 16 is_stmt 1 discriminator 1 view .LVU20
  89              		.loc 1 121 9 is_stmt 0 discriminator 1 view .LVU21
  90 002a D045     		cmp	r8, r10
  91 002c 27D2     		bcs	.L5
 122:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 123:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 124:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             /* Read the FAT sector.  */
 125:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             status =  _fx_utility_logical_sector_read(media_ptr, (ULONG64) FAT_sector,
  92              		.loc 1 125 13 is_stmt 1 view .LVU22
  93              		.loc 1 125 23 is_stmt 0 view .LVU23
  94 002e 4646     		mov	r6, r8
 126:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                                                       media_ptr -> fx_media_memory_buffer, ((ULONG)
  95              		.loc 1 126 65 view .LVU24
  96 0030 AB68     		ldr	r3, [r5, #8]
 125:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                                                       media_ptr -> fx_media_memory_buffer, ((ULONG)
  97              		.loc 1 125 23 view .LVU25
  98 0032 0222     		movs	r2, #2
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 5


  99 0034 0292     		str	r2, [sp, #8]
 100 0036 0122     		movs	r2, #1
 101 0038 0192     		str	r2, [sp, #4]
 102 003a 0093     		str	r3, [sp]
 103 003c 4246     		mov	r2, r8
 104 003e 0023     		movs	r3, #0
 105 0040 2846     		mov	r0, r5
 106 0042 FFF7FEFF 		bl	_fx_utility_logical_sector_read
 107              	.LVL6:
 127:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 128:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             /* Determine if an error occurred.  */
 129:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             if (status != FX_SUCCESS)
 108              		.loc 1 129 13 is_stmt 1 view .LVU26
 109              		.loc 1 129 16 is_stmt 0 view .LVU27
 110 0046 0346     		mov	r3, r0
 111 0048 0028     		cmp	r0, #0
 112 004a 3CD1     		bne	.L1
 130:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             {
 131:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 /* Return the error status.  */
 132:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 return(status);
 133:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             }
 134:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 135:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             /* Pickup how many secondary FATs there are.  */
 136:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             FATs =  media_ptr -> fx_media_number_of_FATs - 1;
 113              		.loc 1 136 13 is_stmt 1 view .LVU28
 114              		.loc 1 136 31 is_stmt 0 view .LVU29
 115 004c EC6D     		ldr	r4, [r5, #92]
 116              		.loc 1 136 18 view .LVU30
 117 004e 013C     		subs	r4, r4, #1
 118              	.LVL7:
 137:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 138:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             /* Loop to update additional FAT entries.  */
 139:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             while (FATs)
 119              		.loc 1 139 13 is_stmt 1 view .LVU31
 120              	.L9:
 121              		.loc 1 139 19 view .LVU32
 122 0050 002C     		cmp	r4, #0
 123 0052 E8D0     		beq	.L18
 140:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             {
 141:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 142:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 /* Mirror main FAT sector write into the additional FATs.  */
 143:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 status =  _fx_utility_logical_sector_write(media_ptr,
 124              		.loc 1 143 17 view .LVU33
 144:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                                                            ((ULONG64) FAT_sector) + ((ULONG64)FATs 
 125              		.loc 1 144 122 is_stmt 0 view .LVU34
 126 0054 AB6D     		ldr	r3, [r5, #88]
 127              		.loc 1 144 100 view .LVU35
 128 0056 A4FB0323 		umull	r2, r3, r4, r3
 145:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                                                            media_ptr -> fx_media_memory_buffer, ((U
 129              		.loc 1 145 70 view .LVU36
 130 005a A968     		ldr	r1, [r5, #8]
 143:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                                                            ((ULONG64) FAT_sector) + ((ULONG64)FATs 
 131              		.loc 1 143 27 view .LVU37
 132 005c B218     		adds	r2, r6, r2
 133 005e 4FF00200 		mov	r0, #2
 134              	.LVL8:
 143:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                                                            ((ULONG64) FAT_sector) + ((ULONG64)FATs 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 6


 135              		.loc 1 143 27 view .LVU38
 136 0062 0290     		str	r0, [sp, #8]
 137 0064 4FF00100 		mov	r0, #1
 138 0068 0190     		str	r0, [sp, #4]
 139 006a 0091     		str	r1, [sp]
 140 006c 43F10003 		adc	r3, r3, #0
 141 0070 2846     		mov	r0, r5
 142 0072 FFF7FEFF 		bl	_fx_utility_logical_sector_write
 143              	.LVL9:
 146:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 147:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 /* Determine if an error occurred.  */
 148:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 if (status != FX_SUCCESS)
 144              		.loc 1 148 17 is_stmt 1 view .LVU39
 145              		.loc 1 148 20 is_stmt 0 view .LVU40
 146 0076 0346     		mov	r3, r0
 147 0078 28BB     		cbnz	r0, .L1
 149:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 {
 150:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 151:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                     /* Return the error status.  */
 152:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                     return(status);
 153:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 }
 154:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 155:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 /* Decrement the number of FATs.  */
 156:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****                 FATs--;
 148              		.loc 1 156 17 is_stmt 1 view .LVU41
 149              		.loc 1 156 21 is_stmt 0 view .LVU42
 150 007a 013C     		subs	r4, r4, #1
 151              	.LVL10:
 152              		.loc 1 156 21 view .LVU43
 153 007c E8E7     		b	.L9
 154              	.LVL11:
 155              	.L5:
  99:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 156              		.loc 1 99 43 is_stmt 1 discriminator 2 view .LVU44
  99:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 157              		.loc 1 99 44 is_stmt 0 discriminator 2 view .LVU45
 158 007e 0137     		adds	r7, r7, #1
 159              	.LVL12:
 160              	.L4:
  99:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 161              		.loc 1 99 17 is_stmt 1 discriminator 1 view .LVU46
  99:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 162              		.loc 1 99 5 is_stmt 0 discriminator 1 view .LVU47
 163 0080 B7F5806F 		cmp	r7, #1024
 164 0084 15D2     		bcs	.L19
 103:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 165              		.loc 1 103 9 is_stmt 1 view .LVU48
 103:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 166              		.loc 1 103 60 is_stmt 0 view .LVU49
 167 0086 05EBD703 		add	r3, r5, r7, lsr #3
 168 008a 93F81838 		ldrb	r3, [r3, #2072]	@ zero_extendqisi2
 103:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 169              		.loc 1 103 80 view .LVU50
 170 008e 07F00702 		and	r2, r7, #7
 103:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 171              		.loc 1 103 87 view .LVU51
 172 0092 1341     		asrs	r3, r3, r2
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 7


 103:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 173              		.loc 1 103 12 view .LVU52
 174 0094 13F0010F 		tst	r3, #1
 175 0098 F1D0     		beq	.L5
 111:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         last_sector =   FAT_sector + sectors_per_bit;
 176              		.loc 1 111 9 is_stmt 1 view .LVU53
 111:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         last_sector =   FAT_sector + sectors_per_bit;
 177              		.loc 1 111 57 is_stmt 0 view .LVU54
 178 009a 6B6C     		ldr	r3, [r5, #68]
 111:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         last_sector =   FAT_sector + sectors_per_bit;
 179              		.loc 1 111 20 view .LVU55
 180 009c 07FB0938 		mla	r8, r7, r9, r3
 181              	.LVL13:
 112:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 182              		.loc 1 112 9 is_stmt 1 view .LVU56
 112:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 183              		.loc 1 112 21 is_stmt 0 view .LVU57
 184 00a0 09EB0802 		add	r2, r9, r8
 185              	.LVL14:
 115:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 186              		.loc 1 115 9 is_stmt 1 view .LVU58
 115:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 187              		.loc 1 115 38 is_stmt 0 view .LVU59
 188 00a4 A96D     		ldr	r1, [r5, #88]
 115:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 189              		.loc 1 115 66 view .LVU60
 190 00a6 03EB010A 		add	r10, r3, r1
 115:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         {
 191              		.loc 1 115 12 view .LVU61
 192 00aa 9245     		cmp	r10, r2
 193 00ac BDD3     		bcc	.L11
 112:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 194              		.loc 1 112 21 view .LVU62
 195 00ae 9246     		mov	r10, r2
 196              	.LVL15:
 112:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 197              		.loc 1 112 21 view .LVU63
 198 00b0 BBE7     		b	.L11
 199              	.LVL16:
 200              	.L19:
 157:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****             }
 158:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         }
 159:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
 160:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 161:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     /* Clear the bit map that indicates primary FAT updates.  */
 162:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     for (i = 0; i < FX_FAT_MAP_SIZE; i++)
 201              		.loc 1 162 12 view .LVU64
 202 00b2 0023     		movs	r3, #0
 203 00b4 04E0     		b	.L14
 204              	.LVL17:
 205              	.L15:
 163:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 164:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 165:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         /* Clear each entry in the bit map.  */
 166:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****         media_ptr -> fx_media_fat_secondary_update_map[i] =  0;
 206              		.loc 1 166 9 is_stmt 1 discriminator 3 view .LVU65
 207              		.loc 1 166 59 is_stmt 0 discriminator 3 view .LVU66
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 8


 208 00b6 EA18     		adds	r2, r5, r3
 209 00b8 0021     		movs	r1, #0
 210 00ba 82F81818 		strb	r1, [r2, #2072]
 162:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 211              		.loc 1 162 38 is_stmt 1 discriminator 3 view .LVU67
 162:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 212              		.loc 1 162 39 is_stmt 0 discriminator 3 view .LVU68
 213 00be 0133     		adds	r3, r3, #1
 214              	.LVL18:
 215              	.L14:
 162:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 216              		.loc 1 162 17 is_stmt 1 discriminator 1 view .LVU69
 162:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     {
 217              		.loc 1 162 5 is_stmt 0 discriminator 1 view .LVU70
 218 00c0 7F2B     		cmp	r3, #127
 219 00c2 F8D9     		bls	.L15
 167:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     }
 168:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** 
 169:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     /* Return a successful completion.  */
 170:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c ****     return(FX_SUCCESS);
 220              		.loc 1 170 11 view .LVU71
 221 00c4 0023     		movs	r3, #0
 222              	.LVL19:
 223              	.L1:
 171:Middlewares/ST/filex/common/src/fx_utility_FAT_map_flush.c **** }
 224              		.loc 1 171 1 view .LVU72
 225 00c6 1846     		mov	r0, r3
 226 00c8 04B0     		add	sp, sp, #16
 227              	.LCFI2:
 228              		.cfi_def_cfa_offset 32
 229              		@ sp needed
 230 00ca BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 231              		.loc 1 171 1 view .LVU73
 232              		.cfi_endproc
 233              	.LFE8:
 235              		.text
 236              	.Letext0:
 237              		.file 2 "Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 238              		.file 3 "Middlewares/ST/threadx/common/inc/tx_api.h"
 239              		.file 4 "Middlewares/ST/filex/common/inc/fx_api.h"
 240              		.file 5 "Middlewares/ST/filex/common/inc/fx_utility.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccCtKu58.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 fx_utility_FAT_map_flush.c
C:\Users\HP\AppData\Local\Temp\ccCtKu58.s:20     .text._fx_utility_FAT_map_flush:00000000 $t
C:\Users\HP\AppData\Local\Temp\ccCtKu58.s:26     .text._fx_utility_FAT_map_flush:00000000 _fx_utility_FAT_map_flush

UNDEFINED SYMBOLS
_fx_utility_logical_sector_read
_fx_utility_logical_sector_write
