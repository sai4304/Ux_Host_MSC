ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ux_host_stack_new_device_create.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.rodata._ux_host_stack_new_device_create.str1.4,"aMS",%progbits,1
  20              		.align	2
  21              	.LC0:
  22 0000 75785F68 		.ascii	"ux_host_endpoint0_semaphore\000"
  22      6F73745F 
  22      656E6470 
  22      6F696E74 
  22      305F7365 
  23              		.align	2
  24              	.LC1:
  25 001c 75785F68 		.ascii	"ux_host_transfer_request_semaphore\000"
  25      6F73745F 
  25      7472616E 
  25      73666572 
  25      5F726571 
  26              		.section	.text._ux_host_stack_new_device_create,"ax",%progbits
  27              		.align	1
  28              		.global	_ux_host_stack_new_device_create
  29              		.syntax unified
  30              		.thumb
  31              		.thumb_func
  33              	_ux_host_stack_new_device_create:
  34              	.LVL0:
  35              	.LFB11:
  36              		.file 1 "Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c"
   1:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
   2:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
   3:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
   5:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*       This software is licensed under the Microsoft Software License   */
   6:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*       and in the root directory of this software.                      */
   9:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  10:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
  11:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  12:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  13:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
  14:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 2


  15:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**                                                                       */
  16:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /** USBX Component                                                        */
  17:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**                                                                       */
  18:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**   Host Stack                                                          */
  19:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**                                                                       */
  20:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
  21:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
  22:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  23:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  24:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /* Include necessary system files.  */
  25:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  26:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #define UX_SOURCE_CODE
  27:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  28:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #include "ux_api.h"
  29:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #include "ux_host_stack.h"
  30:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  31:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
  32:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
  33:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  34:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  FUNCTION                                               RELEASE        */
  35:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  36:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_new_device_create                    PORTABLE C      */
  37:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                           6.1.12       */
  38:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  AUTHOR                                                                */
  39:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  40:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    Chaoqiong Xiao, Microsoft Corporation                               */
  41:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  42:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  DESCRIPTION                                                           */
  43:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  44:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    This function creates a new device on the USB. It may be called     */
  45:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    either by a hub or by the root hub.                                 */
  46:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  47:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  INPUT                                                                 */
  48:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  49:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    HCD                                   HCD that owns that device     */
  50:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    device_owner                          Either a root hub instance    */
  51:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            or a hub instance           */
  52:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    port_index                            Port the new device is mounted*/
  53:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    device_speed                          Speed at which the device is  */
  54:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            running (low, full, high)   */
  55:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    port_power_available                  Power available on the root   */
  56:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            or hub port. This value is  */
  57:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            used to ensure that the     */
  58:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            device can be configured    */
  59:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            without creating an         */
  60:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            OVER_CURRENT condition on   */
  61:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            the bus                     */
  62:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    created_device                        Destination to fill created   */
  63:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            device instance             */
  64:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  65:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  OUTPUT                                                                */
  66:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  67:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    Completion Status                                                   */
  68:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  69:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    An Error code could be an indication that the device could not be   */
  70:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    created in which case the error is fatal to the enumeration and     */
  71:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    will not be retried. The error code can also indicate a failure     */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 3


  72:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    for the device to respond to the GET_DEVICE_DESCRIPTOR. This error  */
  73:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    is not fatal and the caller should retry the enumeration process    */
  74:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    after the port to which the device is attached has been reset.      */
  75:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  76:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  CALLS                                                                 */
  77:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  78:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_class_device_scan      Scan class devices            */
  79:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_class_interface_scan   Scan class interfaces         */
  80:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_device_address_set     Set device address            */
  81:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_device_descriptor_read Read device descriptor        */
  82:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_configuration_enumerate                              */
  83:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                          Enumerate device config       */
  84:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_host_stack_new_device_get         Get new device                */
  85:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    _ux_utility_semaphore_create          Create a semaphore            */
  86:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    (ux_hcd_entry_function)               HCD entry function            */
  87:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  88:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  CALLED BY                                                             */
  89:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  90:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    USBX Components                                                     */
  91:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  92:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  RELEASE HISTORY                                                       */
  93:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  94:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*    DATE              NAME                      DESCRIPTION             */
  95:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
  96:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  05-19-2020     Chaoqiong Xiao           Initial Version 6.0           */
  97:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  09-30-2020     Chaoqiong Xiao           Modified comment(s),          */
  98:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            optimized based on compile  */
  99:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            definitions,                */
 100:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            resulting in version 6.1    */
 101:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  02-02-2021     Chaoqiong Xiao           Modified comment(s),          */
 102:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            added a new parameter to    */
 103:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            return created device,      */
 104:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            resulting in version 6.1.4  */
 105:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  01-31-2022     Chaoqiong Xiao           Modified comment(s),          */
 106:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            added standalone support,   */
 107:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            reset device power source,  */
 108:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            resulting in version 6.1.10 */
 109:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*  07-29-2022     Chaoqiong Xiao           Modified comment(s),          */
 110:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            freed shared device config  */
 111:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            descriptor after enum scan, */
 112:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                            resulting in version 6.1.12 */
 113:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /*                                                                        */
 114:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** /**************************************************************************/
 115:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** UINT  _ux_host_stack_new_device_create(UX_HCD *hcd, UX_DEVICE *device_owner,
 116:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                                 UINT port_index, UINT device_speed,
 117:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                                 UINT port_max_power,
 118:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                                 UX_DEVICE **created_device)
 119:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** {
  37              		.loc 1 119 1 view -0
  38              		.cfi_startproc
  39              		@ args = 8, pretend = 0, frame = 0
  40              		@ frame_needed = 0, uses_anonymous_args = 0
  41              		.loc 1 119 1 is_stmt 0 view .LVU1
  42 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  43              	.LCFI0:
  44              		.cfi_def_cfa_offset 24
  45              		.cfi_offset 4, -24
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 4


  46              		.cfi_offset 5, -20
  47              		.cfi_offset 6, -16
  48              		.cfi_offset 7, -12
  49              		.cfi_offset 8, -8
  50              		.cfi_offset 14, -4
  51 0004 1E46     		mov	r6, r3
 120:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 121:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** UX_DEVICE           *device;
  52              		.loc 1 121 1 is_stmt 1 view .LVU2
 122:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** UINT                status;
  53              		.loc 1 122 1 view .LVU3
 123:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** UX_ENDPOINT         *control_endpoint;
  54              		.loc 1 123 1 view .LVU4
 124:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 125:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 126:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #if UX_MAX_DEVICES > 1
 127:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Verify the number of devices attached to the HCD already. Normally a HCD
 128:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        can have up to 127 devices but that can be tailored.  */
 129:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (hcd -> ux_hcd_nb_devices > UX_MAX_USB_DEVICES)
  55              		.loc 1 129 5 view .LVU5
  56              		.loc 1 129 13 is_stmt 0 view .LVU6
  57 0006 036E     		ldr	r3, [r0, #96]
  58              	.LVL1:
  59              		.loc 1 129 8 view .LVU7
  60 0008 7F2B     		cmp	r3, #127
  61 000a 51D8     		bhi	.L12
  62 000c 0546     		mov	r5, r0
  63 000e 8846     		mov	r8, r1
  64 0010 1746     		mov	r7, r2
 130:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 131:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 132:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Error trap. */
 133:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         _ux_system_error_handler(UX_SYSTEM_LEVEL_THREAD, UX_SYSTEM_CONTEXT_ENUMERATOR, UX_TOO_MANY_
 134:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 135:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* If trace is enabled, insert this event into the trace buffer.  */
 136:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         UX_TRACE_IN_LINE_INSERT(UX_TRACE_ERROR, UX_TOO_MANY_DEVICES, 0, 0, 0, UX_TRACE_ERRORS, 0, 0
 137:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 138:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         return(UX_TOO_MANY_DEVICES);
 139:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 140:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #endif
 141:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 142:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Get a new device container to store this new device.  */
 143:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     device =  _ux_host_stack_new_device_get();
  65              		.loc 1 143 5 is_stmt 1 view .LVU8
  66              		.loc 1 143 15 is_stmt 0 view .LVU9
  67 0012 FFF7FEFF 		bl	_ux_host_stack_new_device_get
  68              	.LVL2:
 144:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (device == UX_NULL)
  69              		.loc 1 144 5 is_stmt 1 view .LVU10
  70              		.loc 1 144 8 is_stmt 0 view .LVU11
  71 0016 0446     		mov	r4, r0
  72 0018 0028     		cmp	r0, #0
  73 001a 50D0     		beq	.L13
 145:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 146:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 147:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Error trap. */
 148:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         _ux_system_error_handler(UX_SYSTEM_LEVEL_THREAD, UX_SYSTEM_CONTEXT_ENUMERATOR, UX_TOO_MANY_
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 5


 149:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 150:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* If trace is enabled, insert this event into the trace buffer.  */
 151:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         UX_TRACE_IN_LINE_INSERT(UX_TRACE_ERROR, UX_TOO_MANY_DEVICES, 0, 0, 0, UX_TRACE_ERRORS, 0, 0
 152:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 153:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         return(UX_TOO_MANY_DEVICES);
 154:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 155:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 156:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Store the device instance.  */
 157:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     *created_device = device;
  74              		.loc 1 157 5 is_stmt 1 view .LVU12
  75              		.loc 1 157 21 is_stmt 0 view .LVU13
  76 001c 079B     		ldr	r3, [sp, #28]
  77 001e 1860     		str	r0, [r3]
 158:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 159:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Increment the number of devices on this bus.  */
 160:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     hcd -> ux_hcd_nb_devices++;
  78              		.loc 1 160 5 is_stmt 1 view .LVU14
  79              		.loc 1 160 9 is_stmt 0 view .LVU15
  80 0020 2B6E     		ldr	r3, [r5, #96]
  81              		.loc 1 160 29 view .LVU16
  82 0022 0133     		adds	r3, r3, #1
  83 0024 2B66     		str	r3, [r5, #96]
 161:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 162:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* If trace is enabled, insert this event into the trace buffer.  */
 163:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     UX_TRACE_IN_LINE_INSERT(UX_TRACE_HOST_STACK_NEW_DEVICE_CREATE, hcd, device_owner, port_index, d
 164:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 165:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* At this stage the device is attached but not configured.
 166:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        we don't have to worry about power consumption yet.
 167:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        Initialize the device structure.  */
 168:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     device -> ux_device_handle =         (ULONG) (ALIGN_TYPE) device;
  84              		.loc 1 168 5 is_stmt 1 view .LVU17
  85              		.loc 1 168 32 is_stmt 0 view .LVU18
  86 0026 2060     		str	r0, [r4]
 169:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     device -> ux_device_state =          UX_DEVICE_ATTACHED;
  87              		.loc 1 169 5 is_stmt 1 view .LVU19
  88              		.loc 1 169 31 is_stmt 0 view .LVU20
  89 0028 0122     		movs	r2, #1
  90 002a 8260     		str	r2, [r0, #8]
 170:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     device -> ux_device_address =        0;
  91              		.loc 1 170 5 is_stmt 1 view .LVU21
  92              		.loc 1 170 33 is_stmt 0 view .LVU22
  93 002c 0023     		movs	r3, #0
  94 002e C360     		str	r3, [r0, #12]
 171:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     device -> ux_device_speed =          device_speed;
  95              		.loc 1 171 5 is_stmt 1 view .LVU23
  96              		.loc 1 171 31 is_stmt 0 view .LVU24
  97 0030 0661     		str	r6, [r0, #16]
 172:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     UX_DEVICE_MAX_POWER_SET(device, port_max_power);
  98              		.loc 1 172 5 is_stmt 1 view .LVU25
  99              		.loc 1 172 5 view .LVU26
 100 0032 069B     		ldr	r3, [sp, #24]
 101 0034 C0F82031 		str	r3, [r0, #288]
 102              		.loc 1 172 5 view .LVU27
 173:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     UX_DEVICE_PARENT_SET(device, device_owner);
 103              		.loc 1 173 5 view .LVU28
 104              		.loc 1 173 5 view .LVU29
 105 0038 C0F81C81 		str	r8, [r0, #284]
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 6


 106              		.loc 1 173 5 view .LVU30
 174:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     UX_DEVICE_HCD_SET(device, hcd);
 107              		.loc 1 174 35 view .LVU31
 175:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     UX_DEVICE_PORT_LOCATION_SET(device, port_index);
 108              		.loc 1 175 5 view .LVU32
 109              		.loc 1 175 5 view .LVU33
 110 003c C0F81871 		str	r7, [r0, #280]
 111              		.loc 1 175 5 view .LVU34
 176:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     device -> ux_device_power_source =   UX_DEVICE_BUS_POWERED;
 112              		.loc 1 176 5 view .LVU35
 113              		.loc 1 176 38 is_stmt 0 view .LVU36
 114 0040 4261     		str	r2, [r0, #20]
 177:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 178:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Create a semaphore for the device. This is to protect endpoint 0 mostly for OTG HNP polling.
 179:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        a mutex mechanism.  */
 180:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     status =  _ux_host_semaphore_create(&device -> ux_device_protection_semaphore, "ux_host_endpoin
 115              		.loc 1 180 5 is_stmt 1 view .LVU37
 116              		.loc 1 180 15 is_stmt 0 view .LVU38
 117 0042 3449     		ldr	r1, .L17
 118 0044 2430     		adds	r0, r0, #36
 119              	.LVL3:
 120              		.loc 1 180 15 view .LVU39
 121 0046 FFF7FEFF 		bl	_ux_utility_semaphore_create
 122              	.LVL4:
 181:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 182:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Check semaphore creation.  */
 183:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (status != UX_SUCCESS)
 123              		.loc 1 183 5 is_stmt 1 view .LVU40
 124              		.loc 1 183 8 is_stmt 0 view .LVU41
 125 004a 0028     		cmp	r0, #0
 126 004c 5BD1     		bne	.L9
 184:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 185:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 186:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Return error. Device resources that have been allocated until this
 187:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            point should be freed by the caller via _ux_host_stack_device_resources_free.  */
 188:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         return(UX_SEMAPHORE_ERROR);
 189:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 190:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 191:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Initialize the default control endpoint permanently attached
 192:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        to the device.  */
 193:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     control_endpoint =                               &device -> ux_device_control_endpoint;
 127              		.loc 1 193 5 is_stmt 1 view .LVU42
 128              		.loc 1 193 22 is_stmt 0 view .LVU43
 129 004e 04F18407 		add	r7, r4, #132
 130              	.LVL5:
 194:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     control_endpoint -> ux_endpoint =                (ULONG) (ALIGN_TYPE) control_endpoint;
 131              		.loc 1 194 5 is_stmt 1 view .LVU44
 132              		.loc 1 194 37 is_stmt 0 view .LVU45
 133 0052 C4F88470 		str	r7, [r4, #132]
 195:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     control_endpoint -> ux_endpoint_next_endpoint =  UX_NULL;
 134              		.loc 1 195 5 is_stmt 1 view .LVU46
 135              		.loc 1 195 51 is_stmt 0 view .LVU47
 136 0056 0022     		movs	r2, #0
 137 0058 C4F8A820 		str	r2, [r4, #168]
 196:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     control_endpoint -> ux_endpoint_interface =      UX_NULL;
 138              		.loc 1 196 5 is_stmt 1 view .LVU48
 139              		.loc 1 196 47 is_stmt 0 view .LVU49
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 7


 140 005c C4F8AC20 		str	r2, [r4, #172]
 197:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     control_endpoint -> ux_endpoint_device =         device;
 141              		.loc 1 197 5 is_stmt 1 view .LVU50
 142              		.loc 1 197 44 is_stmt 0 view .LVU51
 143 0060 C4F8B040 		str	r4, [r4, #176]
 198:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     control_endpoint -> ux_endpoint_transfer_request.ux_transfer_request_endpoint = control_endpoin
 144              		.loc 1 198 5 is_stmt 1 view .LVU52
 145              		.loc 1 198 83 is_stmt 0 view .LVU53
 146 0064 C4F8B870 		str	r7, [r4, #184]
 199:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 200:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Create a semaphore for this endpoint to be attached to its transfer request.  */
 201:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     status =  _ux_host_semaphore_create(&control_endpoint -> ux_endpoint_transfer_request.ux_transf
 147              		.loc 1 201 5 is_stmt 1 view .LVU54
 148              		.loc 1 201 15 is_stmt 0 view .LVU55
 149 0068 2B49     		ldr	r1, .L17+4
 150 006a 04F1F800 		add	r0, r4, #248
 151              	.LVL6:
 152              		.loc 1 201 15 view .LVU56
 153 006e FFF7FEFF 		bl	_ux_utility_semaphore_create
 154              	.LVL7:
 202:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 203:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Check semaphore creation.  */
 204:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (status != UX_SUCCESS)
 155              		.loc 1 204 5 is_stmt 1 view .LVU57
 156              		.loc 1 204 8 is_stmt 0 view .LVU58
 157 0072 0028     		cmp	r0, #0
 158 0074 4BD1     		bne	.L10
 205:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 206:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 207:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Return error. Device resources that have been allocated until this
 208:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            point should be freed by the caller via _ux_host_stack_device_resources_free.  */
 209:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         return(UX_SEMAPHORE_ERROR);
 210:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 211:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 212:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* If the device is running in high speed the default max packet size for the control endpoint 
 213:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        All other speeds the size is 8.  */
 214:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (device_speed == UX_HIGH_SPEED_DEVICE)
 159              		.loc 1 214 5 is_stmt 1 view .LVU59
 160              		.loc 1 214 8 is_stmt 0 view .LVU60
 161 0076 022E     		cmp	r6, #2
 162 0078 28D0     		beq	.L14
 215:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         control_endpoint -> ux_endpoint_descriptor.wMaxPacketSize =  UX_DEFAULT_HS_MPS;
 216:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     else
 217:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         control_endpoint -> ux_endpoint_descriptor.wMaxPacketSize =  UX_DEFAULT_MPS;
 163              		.loc 1 217 9 is_stmt 1 view .LVU61
 164              		.loc 1 217 67 is_stmt 0 view .LVU62
 165 007a 0823     		movs	r3, #8
 166 007c C4F8A030 		str	r3, [r4, #160]
 167              	.L6:
 218:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 219:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Create the default control endpoint at the HCD level.  */
 220:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     status =  hcd -> ux_hcd_entry_function(hcd, UX_HCD_CREATE_ENDPOINT, (VOID *) control_endpoint);
 168              		.loc 1 220 5 is_stmt 1 view .LVU63
 169              		.loc 1 220 19 is_stmt 0 view .LVU64
 170 0080 2B6F     		ldr	r3, [r5, #112]
 171              		.loc 1 220 15 view .LVU65
 172 0082 3A46     		mov	r2, r7
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 8


 173 0084 0E21     		movs	r1, #14
 174 0086 2846     		mov	r0, r5
 175              	.LVL8:
 176              		.loc 1 220 15 view .LVU66
 177 0088 9847     		blx	r3
 178              	.LVL9:
 221:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 222:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #if defined(UX_HOST_STANDALONE)
 223:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (status == UX_SUCCESS)
 224:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 225:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 226:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Now control endpoint is ready, set state to running. */
 227:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         control_endpoint -> ux_endpoint_state =          UX_ENDPOINT_RUNNING;
 228:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 229:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Setup default control request timeout.  */
 230:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         control_endpoint -> ux_endpoint_transfer_request.ux_transfer_request_timeout_value =
 231:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                             UX_MS_TO_TICK_NON_ZERO(UX_CONTROL_TRANSFER_TIMEOUT);
 232:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 233:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Set default control request mode to wait.  */
 234:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         control_endpoint -> ux_endpoint_transfer_request.ux_transfer_request_flags |=
 235:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                                                     UX_TRANSFER_FLAG_AUTO_WAIT;
 236:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 237:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 238:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Enumeration steps will be done in task state machine.  */
 239:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 240:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #else
 241:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 242:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Going on to do enumeration (requests).  */
 243:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (status == UX_SUCCESS)
 179              		.loc 1 243 5 is_stmt 1 view .LVU67
 180              		.loc 1 243 8 is_stmt 0 view .LVU68
 181 008a 0546     		mov	r5, r0
 182              	.LVL10:
 183              		.loc 1 243 8 view .LVU69
 184 008c 10B3     		cbz	r0, .L15
 185              	.L7:
 244:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 245:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 246:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Now control endpoint is ready, set state to running. */
 247:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         control_endpoint -> ux_endpoint_state =          UX_ENDPOINT_RUNNING;
 248:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 249:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Set the address of the device. The first time a USB device is
 250:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            accessed, it responds to the address 0. We need to change the address
 251:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            to a free device address between 1 and 127 ASAP.  */
 252:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         status =  _ux_host_stack_device_address_set(device);
 253:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         if (status == UX_SUCCESS)
 254:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         {
 255:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 256:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             /* Get the device descriptor.  */
 257:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             status =  _ux_host_stack_device_descriptor_read(device);
 258:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             if (status == UX_SUCCESS)
 259:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             {
 260:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 261:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                 /* Get the configuration descriptor(s) for the device
 262:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                    and parse all the configuration, interface, endpoints...  */
 263:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****                 status =  _ux_host_stack_configuration_enumerate(device);
 264:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 9


 265:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         }
 266:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 267:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 268:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Check the status of the previous operations. If there was an
 269:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        error during any of the phases, the device resources must be
 270:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        freed based on if we want to retry.  */
 271:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     if (status == UX_SUCCESS)
 186              		.loc 1 271 5 is_stmt 1 view .LVU70
 187              		.loc 1 271 8 is_stmt 0 view .LVU71
 188 008e 002D     		cmp	r5, #0
 189 0090 3AD1     		bne	.L1
 272:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     {
 273:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 274:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* The device, configuration(s), interface(s), endpoint(s) are
 275:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            now in order for this device to work. No configuration is set
 276:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            yet. First we need to find a class driver that wants to own
 277:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****            it. There is no need to have an orphan device in a configured state.   */
 278:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         status =  _ux_host_stack_class_device_scan(device);
 190              		.loc 1 278 9 is_stmt 1 view .LVU72
 191              		.loc 1 278 19 is_stmt 0 view .LVU73
 192 0092 2046     		mov	r0, r4
 193              	.LVL11:
 194              		.loc 1 278 19 view .LVU74
 195 0094 FFF7FEFF 		bl	_ux_host_stack_class_device_scan
 196              	.LVL12:
 197 0098 0546     		mov	r5, r0
 198              	.LVL13:
 279:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         if (status == UX_NO_CLASS_MATCH)
 199              		.loc 1 279 9 is_stmt 1 view .LVU75
 200              		.loc 1 279 12 is_stmt 0 view .LVU76
 201 009a 5728     		cmp	r0, #87
 202 009c 2ED0     		beq	.L16
 203              	.L8:
 280:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         {
 281:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 282:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             status =  _ux_host_stack_class_interface_scan(device);
 283:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 284:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         }
 285:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 286:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* Check if there is unnecessary resource to free.  */
 287:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         if (device -> ux_device_packed_configuration &&
 204              		.loc 1 287 9 is_stmt 1 view .LVU77
 205              		.loc 1 287 20 is_stmt 0 view .LVU78
 206 009e E069     		ldr	r0, [r4, #28]
 207              	.LVL14:
 208              		.loc 1 287 12 view .LVU79
 209 00a0 90B3     		cbz	r0, .L1
 288:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             device -> ux_device_packed_configuration_keep_count == 0)
 210              		.loc 1 288 20 discriminator 1 view .LVU80
 211 00a2 236A     		ldr	r3, [r4, #32]
 287:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             device -> ux_device_packed_configuration_keep_count == 0)
 212              		.loc 1 287 54 discriminator 1 view .LVU81
 213 00a4 83BB     		cbnz	r3, .L1
 289:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         {
 290:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             _ux_utility_memory_free(device -> ux_device_packed_configuration);
 214              		.loc 1 290 13 is_stmt 1 view .LVU82
 215 00a6 FFF7FEFF 		bl	_ux_utility_memory_free
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 10


 216              	.LVL15:
 291:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             device -> ux_device_packed_configuration = UX_NULL;
 217              		.loc 1 291 13 view .LVU83
 218              		.loc 1 291 54 is_stmt 0 view .LVU84
 219 00aa 0023     		movs	r3, #0
 220 00ac E361     		str	r3, [r4, #28]
 221 00ae 2BE0     		b	.L1
 222              	.LVL16:
 223              	.L12:
 133:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 224              		.loc 1 133 9 is_stmt 1 view .LVU85
 225 00b0 1122     		movs	r2, #17
 226              	.LVL17:
 133:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 227              		.loc 1 133 9 is_stmt 0 view .LVU86
 228 00b2 0421     		movs	r1, #4
 229              	.LVL18:
 133:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 230              		.loc 1 133 9 view .LVU87
 231 00b4 0220     		movs	r0, #2
 232              	.LVL19:
 133:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 233              		.loc 1 133 9 view .LVU88
 234 00b6 FFF7FEFF 		bl	_ux_system_error_handler
 235              	.LVL20:
 138:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 236              		.loc 1 138 9 is_stmt 1 view .LVU89
 138:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 237              		.loc 1 138 15 is_stmt 0 view .LVU90
 238 00ba 1125     		movs	r5, #17
 239 00bc 24E0     		b	.L1
 240              	.LVL21:
 241              	.L13:
 148:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 242              		.loc 1 148 9 is_stmt 1 view .LVU91
 243 00be 1122     		movs	r2, #17
 244 00c0 0421     		movs	r1, #4
 245 00c2 0220     		movs	r0, #2
 246              	.LVL22:
 148:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 247              		.loc 1 148 9 is_stmt 0 view .LVU92
 248 00c4 FFF7FEFF 		bl	_ux_system_error_handler
 249              	.LVL23:
 153:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 250              		.loc 1 153 9 is_stmt 1 view .LVU93
 153:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 251              		.loc 1 153 15 is_stmt 0 view .LVU94
 252 00c8 1125     		movs	r5, #17
 253              	.LVL24:
 153:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 254              		.loc 1 153 15 view .LVU95
 255 00ca 1DE0     		b	.L1
 256              	.LVL25:
 257              	.L14:
 215:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     else
 258              		.loc 1 215 9 is_stmt 1 view .LVU96
 215:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     else
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 11


 259              		.loc 1 215 67 is_stmt 0 view .LVU97
 260 00cc 4023     		movs	r3, #64
 261 00ce C4F8A030 		str	r3, [r4, #160]
 262 00d2 D5E7     		b	.L6
 263              	.LVL26:
 264              	.L15:
 247:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 265              		.loc 1 247 9 is_stmt 1 view .LVU98
 247:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 266              		.loc 1 247 47 is_stmt 0 view .LVU99
 267 00d4 0123     		movs	r3, #1
 268 00d6 C4F88830 		str	r3, [r4, #136]
 252:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         if (status == UX_SUCCESS)
 269              		.loc 1 252 9 is_stmt 1 view .LVU100
 252:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         if (status == UX_SUCCESS)
 270              		.loc 1 252 19 is_stmt 0 view .LVU101
 271 00da 2046     		mov	r0, r4
 272              	.LVL27:
 252:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         if (status == UX_SUCCESS)
 273              		.loc 1 252 19 view .LVU102
 274 00dc FFF7FEFF 		bl	_ux_host_stack_device_address_set
 275              	.LVL28:
 253:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         {
 276              		.loc 1 253 9 is_stmt 1 view .LVU103
 253:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         {
 277              		.loc 1 253 12 is_stmt 0 view .LVU104
 278 00e0 0546     		mov	r5, r0
 279 00e2 0028     		cmp	r0, #0
 280 00e4 D3D1     		bne	.L7
 257:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             if (status == UX_SUCCESS)
 281              		.loc 1 257 13 is_stmt 1 view .LVU105
 257:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             if (status == UX_SUCCESS)
 282              		.loc 1 257 23 is_stmt 0 view .LVU106
 283 00e6 2046     		mov	r0, r4
 284              	.LVL29:
 257:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             if (status == UX_SUCCESS)
 285              		.loc 1 257 23 view .LVU107
 286 00e8 FFF7FEFF 		bl	_ux_host_stack_device_descriptor_read
 287              	.LVL30:
 258:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             {
 288              		.loc 1 258 13 is_stmt 1 view .LVU108
 258:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             {
 289              		.loc 1 258 16 is_stmt 0 view .LVU109
 290 00ec 0546     		mov	r5, r0
 291 00ee 0028     		cmp	r0, #0
 292 00f0 CDD1     		bne	.L7
 263:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             }
 293              		.loc 1 263 17 is_stmt 1 view .LVU110
 263:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             }
 294              		.loc 1 263 27 is_stmt 0 view .LVU111
 295 00f2 2046     		mov	r0, r4
 296              	.LVL31:
 263:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             }
 297              		.loc 1 263 27 view .LVU112
 298 00f4 FFF7FEFF 		bl	_ux_host_stack_configuration_enumerate
 299              	.LVL32:
 300 00f8 0546     		mov	r5, r0
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 12


 301              	.LVL33:
 263:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****             }
 302              		.loc 1 263 27 view .LVU113
 303 00fa C8E7     		b	.L7
 304              	.L16:
 282:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 305              		.loc 1 282 13 is_stmt 1 view .LVU114
 282:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 306              		.loc 1 282 23 is_stmt 0 view .LVU115
 307 00fc 2046     		mov	r0, r4
 308              	.LVL34:
 282:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 309              		.loc 1 282 23 view .LVU116
 310 00fe FFF7FEFF 		bl	_ux_host_stack_class_interface_scan
 311              	.LVL35:
 312 0102 0546     		mov	r5, r0
 313              	.LVL36:
 282:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 314              		.loc 1 282 23 view .LVU117
 315 0104 CBE7     		b	.L8
 316              	.LVL37:
 317              	.L9:
 188:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 318              		.loc 1 188 15 view .LVU118
 319 0106 1525     		movs	r5, #21
 320              	.LVL38:
 321              	.L1:
 292:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         }
 293:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 294:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         /* If trace is enabled, register this object.  */
 295:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****         UX_TRACE_OBJECT_REGISTER(UX_TRACE_HOST_OBJECT_TYPE_DEVICE, hcd, device_owner, port_index, 0
 296:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 297:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** #endif
 298:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** 
 299:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     /* Return status. If there's an error, device resources that have been 
 300:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****        allocated until this point should be freed by the caller via _ux_host_stack_device_resources
 301:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     return(status);
 302:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c **** }
 322              		.loc 1 302 1 view .LVU119
 323 0108 2846     		mov	r0, r5
 324 010a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 325              	.LVL39:
 326              	.L10:
 209:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 327              		.loc 1 209 15 view .LVU120
 328 010e 1525     		movs	r5, #21
 329              	.LVL40:
 209:Middlewares/ST/usbx/common/core/src/ux_host_stack_new_device_create.c ****     }
 330              		.loc 1 209 15 view .LVU121
 331 0110 FAE7     		b	.L1
 332              	.L18:
 333 0112 00BF     		.align	2
 334              	.L17:
 335 0114 00000000 		.word	.LC0
 336 0118 1C000000 		.word	.LC1
 337              		.cfi_endproc
 338              	.LFE11:
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 13


 340              		.text
 341              	.Letext0:
 342              		.file 2 "Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 343              		.file 3 "Middlewares/ST/threadx/common/inc/tx_api.h"
 344              		.file 4 "Middlewares/ST/usbx/common/core/inc/ux_api.h"
 345              		.file 5 "Middlewares/ST/usbx/common/core/inc/ux_host_stack.h"
 346              		.file 6 "Middlewares/ST/usbx/common/core/inc/ux_utility.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccXH47t5.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 ux_host_stack_new_device_create.c
C:\Users\HP\AppData\Local\Temp\ccXH47t5.s:20     .rodata._ux_host_stack_new_device_create.str1.4:00000000 $d
C:\Users\HP\AppData\Local\Temp\ccXH47t5.s:27     .text._ux_host_stack_new_device_create:00000000 $t
C:\Users\HP\AppData\Local\Temp\ccXH47t5.s:33     .text._ux_host_stack_new_device_create:00000000 _ux_host_stack_new_device_create
C:\Users\HP\AppData\Local\Temp\ccXH47t5.s:335    .text._ux_host_stack_new_device_create:00000114 $d

UNDEFINED SYMBOLS
_ux_host_stack_new_device_get
_ux_utility_semaphore_create
_ux_host_stack_class_device_scan
_ux_utility_memory_free
_ux_system_error_handler
_ux_host_stack_device_address_set
_ux_host_stack_device_descriptor_read
_ux_host_stack_configuration_enumerate
_ux_host_stack_class_interface_scan
