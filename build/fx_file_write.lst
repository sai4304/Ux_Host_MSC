ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"fx_file_write.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	__aeabi_uldivmod
  20              		.section	.text._fx_file_write,"ax",%progbits
  21              		.align	1
  22              		.global	_fx_file_write
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	_fx_file_write:
  28              	.LVL0:
  29              	.LFB8:
  30              		.file 1 "Middlewares/ST/filex/common/src/fx_file_write.c"
   1:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
   2:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
   3:Middlewares/ST/filex/common/src/fx_file_write.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
   5:Middlewares/ST/filex/common/src/fx_file_write.c **** /*       This software is licensed under the Microsoft Software License   */
   6:Middlewares/ST/filex/common/src/fx_file_write.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:Middlewares/ST/filex/common/src/fx_file_write.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:Middlewares/ST/filex/common/src/fx_file_write.c **** /*       and in the root directory of this software.                      */
   9:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  10:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
  11:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  12:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  13:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
  14:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
  15:Middlewares/ST/filex/common/src/fx_file_write.c **** /**                                                                       */
  16:Middlewares/ST/filex/common/src/fx_file_write.c **** /** FileX Component                                                       */
  17:Middlewares/ST/filex/common/src/fx_file_write.c **** /**                                                                       */
  18:Middlewares/ST/filex/common/src/fx_file_write.c **** /**   File                                                                */
  19:Middlewares/ST/filex/common/src/fx_file_write.c **** /**                                                                       */
  20:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
  21:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
  22:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  23:Middlewares/ST/filex/common/src/fx_file_write.c **** #define FX_SOURCE_CODE
  24:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  25:Middlewares/ST/filex/common/src/fx_file_write.c **** /* Include necessary system files.  */
  26:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  27:Middlewares/ST/filex/common/src/fx_file_write.c **** #include "fx_api.h"
  28:Middlewares/ST/filex/common/src/fx_file_write.c **** #include "fx_system.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 2


  29:Middlewares/ST/filex/common/src/fx_file_write.c **** #include "fx_file.h"
  30:Middlewares/ST/filex/common/src/fx_file_write.c **** #include "fx_directory.h"
  31:Middlewares/ST/filex/common/src/fx_file_write.c **** #include "fx_utility.h"
  32:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
  33:Middlewares/ST/filex/common/src/fx_file_write.c **** #include "fx_fault_tolerant.h"
  34:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
  35:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  36:Middlewares/ST/filex/common/src/fx_file_write.c **** 
  37:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
  38:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  39:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  FUNCTION                                               RELEASE        */
  40:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  41:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_file_write                                      PORTABLE C      */
  42:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                           6.1          */
  43:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  AUTHOR                                                                */
  44:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  45:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    William E. Lamie, Microsoft Corporation                             */
  46:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  47:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  DESCRIPTION                                                           */
  48:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  49:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    This function writes the specified number of bytes into the file's  */
  50:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    data area.  The status of the write operation is returned to the    */
  51:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    caller.  In addition, various internal file pointers in the file    */
  52:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    control block are also updated.                                     */
  53:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  54:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  INPUT                                                                 */
  55:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  56:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    file_ptr                              File control block pointer    */
  57:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    buffer_ptr                            Buffer pointer                */
  58:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    size                                  Number of bytes to write      */
  59:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  60:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  OUTPUT                                                                */
  61:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  62:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    return status                                                       */
  63:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  64:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  CALLS                                                                 */
  65:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  66:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_directory_entry_write             Update the file's size        */
  67:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_exFAT_bitmap_flush        Flush exFAT allocation bitmap */
  68:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_exFAT_bitmap_free_cluster_find                          */
  69:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                          Find exFAT free cluster       */
  70:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_exFAT_cluster_state_get   Get cluster state             */
  71:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_exFAT_cluster_state_set   Set cluster state             */
  72:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_FAT_entry_read            Read a FAT entry              */
  73:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_FAT_entry_write           Write a FAT entry             */
  74:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_FAT_flush                 Flush written FAT entries     */
  75:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_logical_sector_flush      Flush written logical sectors */
  76:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_logical_sector_read       Read a logical sector         */
  77:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_logical_sector_write      Write a logical sector        */
  78:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_utility_memory_copy               Fast memory copy routine      */
  79:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_fault_tolerant_transaction_start  Start fault tolerant          */
  80:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                            transaction                 */
  81:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_fault_tolerant_transaction_end    End fault tolerant transaction*/
  82:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_fault_tolerant_recover            Recover FAT chain             */
  83:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_fault_tolerant_reset_log_file     Reset the log file            */
  84:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    _fx_fault_tolerant_set_FAT_chain      Set data of FAT chain         */
  85:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 3


  86:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  CALLED BY                                                             */
  87:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  88:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    Application Code                                                    */
  89:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  90:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  RELEASE HISTORY                                                       */
  91:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  92:Middlewares/ST/filex/common/src/fx_file_write.c **** /*    DATE              NAME                      DESCRIPTION             */
  93:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  94:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  05-19-2020     William E. Lamie         Initial Version 6.0           */
  95:Middlewares/ST/filex/common/src/fx_file_write.c **** /*  09-30-2020     William E. Lamie         Modified comment(s), verified */
  96:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                            memcpy usage,               */
  97:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                            resulting in version 6.1    */
  98:Middlewares/ST/filex/common/src/fx_file_write.c **** /*                                                                        */
  99:Middlewares/ST/filex/common/src/fx_file_write.c **** /**************************************************************************/
 100:Middlewares/ST/filex/common/src/fx_file_write.c **** UINT  _fx_file_write(FX_FILE *file_ptr, VOID *buffer_ptr, ULONG size)
 101:Middlewares/ST/filex/common/src/fx_file_write.c **** {
  31              		.loc 1 101 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 32
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		.loc 1 101 1 is_stmt 0 view .LVU1
  36 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 36
  39              		.cfi_offset 4, -36
  40              		.cfi_offset 5, -32
  41              		.cfi_offset 6, -28
  42              		.cfi_offset 7, -24
  43              		.cfi_offset 8, -20
  44              		.cfi_offset 9, -16
  45              		.cfi_offset 10, -12
  46              		.cfi_offset 11, -8
  47              		.cfi_offset 14, -4
  48 0004 8DB0     		sub	sp, sp, #52
  49              	.LCFI1:
  50              		.cfi_def_cfa_offset 88
  51 0006 0491     		str	r1, [sp, #16]
  52 0008 1646     		mov	r6, r2
 102:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 103:Middlewares/ST/filex/common/src/fx_file_write.c **** UINT                   status;
  53              		.loc 1 103 1 is_stmt 1 view .LVU2
 104:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG64                bytes_remaining;
  54              		.loc 1 104 1 view .LVU3
 105:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  i;
  55              		.loc 1 105 1 view .LVU4
 106:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  copy_bytes;
  56              		.loc 1 106 1 view .LVU5
 107:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  bytes_per_cluster;
  57              		.loc 1 107 1 view .LVU6
 108:Middlewares/ST/filex/common/src/fx_file_write.c **** UCHAR                 *source_ptr;
  58              		.loc 1 108 1 view .LVU7
 109:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  first_new_cluster;
  59              		.loc 1 109 1 view .LVU8
 110:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  last_cluster;
  60              		.loc 1 110 1 view .LVU9
 111:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  cluster, next_cluster;
  61              		.loc 1 111 1 view .LVU10
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 4


 112:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  FAT_index;
  62              		.loc 1 112 1 view .LVU11
 113:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  FAT_value;
  63              		.loc 1 113 1 view .LVU12
 114:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  clusters;
  64              		.loc 1 114 1 view .LVU13
 115:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  total_clusters;
  65              		.loc 1 115 1 view .LVU14
 116:Middlewares/ST/filex/common/src/fx_file_write.c **** UINT                   sectors;
  66              		.loc 1 116 1 view .LVU15
 117:Middlewares/ST/filex/common/src/fx_file_write.c **** FX_MEDIA              *media_ptr;
  67              		.loc 1 117 1 view .LVU16
 118:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 119:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 120:Middlewares/ST/filex/common/src/fx_file_write.c **** UCHAR                  cluster_state;
 121:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 122:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 123:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_FAULT_TOLERANT_DATA
 124:Middlewares/ST/filex/common/src/fx_file_write.c **** FX_INT_SAVE_AREA
 125:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
 126:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 127:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifndef FX_DONT_UPDATE_OPEN_FILES
 128:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  open_count;
  68              		.loc 1 128 1 view .LVU17
 129:Middlewares/ST/filex/common/src/fx_file_write.c **** FX_FILE               *search_ptr;
  69              		.loc 1 129 1 view .LVU18
 130:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
 131:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 132:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef TX_ENABLE_EVENT_TRACE
 133:Middlewares/ST/filex/common/src/fx_file_write.c **** TX_TRACE_BUFFER_ENTRY *trace_event;
 134:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  trace_timestamp;
 135:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
 136:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 137:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 138:Middlewares/ST/filex/common/src/fx_file_write.c **** UCHAR                  data_append = FX_FALSE;      /* Whether or not new data would extend beyond 
 139:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       Operations such as append or overwrite could 
 140:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       original size, resulting in data-appending op
 141:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  copy_head_cluster = 0;       /* The first cluster of the original chain that
 142:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  copy_tail_cluster = 0;       /* The last cluster of the original chain that 
 143:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  insertion_back;              /* The insertion point (back) */
 144:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  insertion_front = 0;         /* The insertion point (front) */
 145:Middlewares/ST/filex/common/src/fx_file_write.c **** ULONG                  replace_clusters = 0;        /* The number of clusters to be replaced. */
 146:Middlewares/ST/filex/common/src/fx_file_write.c **** UCHAR                  dont_use_fat_old = FX_FALSE; /* Used by exFAT logic to indicate whether or n
 147:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 148:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 149:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 150:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* First, determine if the file is still open.  */
 151:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_id != FX_FILE_ID)
  70              		.loc 1 151 5 view .LVU19
  71              		.loc 1 151 18 is_stmt 0 view .LVU20
  72 000a 0268     		ldr	r2, [r0]
  73              	.LVL1:
  74              		.loc 1 151 8 view .LVU21
  75 000c A24B     		ldr	r3, .L80
  76 000e 9A42     		cmp	r2, r3
  77 0010 40F0B182 		bne	.L54
  78 0014 0446     		mov	r4, r0
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 5


 152:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 153:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 154:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Return the file not open error status.  */
 155:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(FX_NOT_OPEN);
 156:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 157:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 158:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Setup pointer to media structure.  */
 159:Middlewares/ST/filex/common/src/fx_file_write.c ****     media_ptr =  file_ptr -> fx_file_media_ptr;
  79              		.loc 1 159 5 is_stmt 1 view .LVU22
  80              		.loc 1 159 15 is_stmt 0 view .LVU23
  81 0016 856D     		ldr	r5, [r0, #88]
  82              	.LVL2:
 160:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 161:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifndef FX_MEDIA_STATISTICS_DISABLE
 162:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 163:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Increment the number of times this service has been called.  */
 164:Middlewares/ST/filex/common/src/fx_file_write.c ****     media_ptr -> fx_media_file_writes++;
  83              		.loc 1 164 5 is_stmt 1 view .LVU24
  84              		.loc 1 164 15 is_stmt 0 view .LVU25
  85 0018 D5F85431 		ldr	r3, [r5, #340]
  86              		.loc 1 164 38 view .LVU26
  87 001c 0133     		adds	r3, r3, #1
  88 001e C5F85431 		str	r3, [r5, #340]
 165:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
 166:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 167:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 168:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 169:Middlewares/ST/filex/common/src/fx_file_write.c ****     if ((media_ptr -> fx_media_FAT_type != FX_exFAT) &&
 170:Middlewares/ST/filex/common/src/fx_file_write.c ****         (file_ptr -> fx_file_current_file_offset + size > 0xFFFFFFFFULL))
 171:Middlewares/ST/filex/common/src/fx_file_write.c **** #else
 172:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_current_file_offset + size > 0xFFFFFFFFULL)
  89              		.loc 1 172 5 is_stmt 1 view .LVU27
  90              		.loc 1 172 18 is_stmt 0 view .LVU28
  91 0022 036C     		ldr	r3, [r0, #64]
  92 0024 426C     		ldr	r2, [r0, #68]
  93              		.loc 1 172 49 view .LVU29
  94 0026 4FF0000B 		mov	fp, #0
  95 002a 0596     		str	r6, [sp, #20]
  96 002c 9B19     		adds	r3, r3, r6
  97 002e 42F10002 		adc	r2, r2, #0
  98              		.loc 1 172 8 view .LVU30
  99 0032 4FF0FF31 		mov	r1, #-1
 100              	.LVL3:
 101              		.loc 1 172 8 view .LVU31
 102 0036 9942     		cmp	r1, r3
 103 0038 7BEB0203 		sbcs	r3, fp, r2
 104 003c C0F0A082 		bcc	.L55
 173:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 174:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 175:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 176:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Return the no more space error, since the new file size would be larger than
 177:Middlewares/ST/filex/common/src/fx_file_write.c ****            the 32-bit field to represent it in the file's directory entry.  */
 178:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(FX_NO_MORE_SPACE);
 179:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 180:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 181:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 182:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Initialize next cluster of tail. */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 6


 183:Middlewares/ST/filex/common/src/fx_file_write.c ****     insertion_back = media_ptr -> fx_media_fat_last;
 184:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 185:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 186:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* If trace is enabled, insert this event into the trace buffer.  */
 187:Middlewares/ST/filex/common/src/fx_file_write.c ****     FX_TRACE_IN_LINE_INSERT(FX_TRACE_FILE_WRITE, file_ptr, buffer_ptr, size, 0, FX_TRACE_FILE_EVENT
 188:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 189:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Protect against other threads accessing the media.  */
 190:Middlewares/ST/filex/common/src/fx_file_write.c ****     FX_PROTECT
 105              		.loc 1 190 5 is_stmt 1 view .LVU32
 106 0040 2A68     		ldr	r2, [r5]
 107 0042 964B     		ldr	r3, .L80+4
 108 0044 9A42     		cmp	r2, r3
 109 0046 01D0     		beq	.L63
 110 0048 1127     		movs	r7, #17
 111 004a 95E2     		b	.L1
 112              	.L63:
 113              		.loc 1 190 5 discriminator 2 view .LVU33
 114 004c 05F5E473 		add	r3, r5, #456
 115 0050 0693     		str	r3, [sp, #24]
 116 0052 1846     		mov	r0, r3
 117              	.LVL4:
 118              		.loc 1 190 5 is_stmt 0 discriminator 2 view .LVU34
 119 0054 FFF7FEFF 		bl	_tx_mutex_get
 120              	.LVL5:
 121 0058 0028     		cmp	r0, #0
 122 005a 40F09382 		bne	.L57
 191:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 192:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Check for write protect at the media level (set by driver).  */
 193:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (media_ptr -> fx_media_driver_write_protect)
 123              		.loc 1 193 5 is_stmt 1 view .LVU35
 124              		.loc 1 193 19 is_stmt 0 view .LVU36
 125 005e D5F8A830 		ldr	r3, [r5, #168]
 126 0062 0793     		str	r3, [sp, #28]
 127              		.loc 1 193 8 view .LVU37
 128 0064 002B     		cmp	r3, #0
 129 0066 4FD1     		bne	.L64
 194:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 195:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 196:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Release media protection.  */
 197:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_UNPROTECT
 198:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 199:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Return write protect error.  */
 200:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(FX_WRITE_PROTECT);
 201:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 202:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 203:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Make sure this file is open for writing.  */
 204:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_open_mode != FX_OPEN_FOR_WRITE)
 130              		.loc 1 204 5 is_stmt 1 view .LVU38
 131              		.loc 1 204 18 is_stmt 0 view .LVU39
 132 0068 A368     		ldr	r3, [r4, #8]
 133              		.loc 1 204 8 view .LVU40
 134 006a 012B     		cmp	r3, #1
 135 006c 51D1     		bne	.L65
 205:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 206:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 207:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Release media protection.  */
 208:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_UNPROTECT
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 7


 209:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 210:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Return the access error exception - a write was attempted from
 211:Middlewares/ST/filex/common/src/fx_file_write.c ****            a file opened for reading!  */
 212:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(FX_ACCESS_ERROR);
 213:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 214:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 215:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 216:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 217:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Start transaction. */
 218:Middlewares/ST/filex/common/src/fx_file_write.c ****     _fx_fault_tolerant_transaction_start(media_ptr);
 219:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 220:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 221:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Calculate the number of bytes per cluster.  */
 222:Middlewares/ST/filex/common/src/fx_file_write.c ****     bytes_per_cluster =  ((ULONG)media_ptr -> fx_media_bytes_per_sector) *
 136              		.loc 1 222 5 is_stmt 1 view .LVU41
 137              		.loc 1 222 44 is_stmt 0 view .LVU42
 138 006e AA6A     		ldr	r2, [r5, #40]
 223:Middlewares/ST/filex/common/src/fx_file_write.c ****         ((ULONG)media_ptr -> fx_media_sectors_per_cluster);
 139              		.loc 1 223 27 view .LVU43
 140 0070 6B6D     		ldr	r3, [r5, #84]
 222:Middlewares/ST/filex/common/src/fx_file_write.c ****         ((ULONG)media_ptr -> fx_media_sectors_per_cluster);
 141              		.loc 1 222 23 view .LVU44
 142 0072 03FB02F2 		mul	r2, r3, r2
 143              	.LVL6:
 224:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 225:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Check for invalid value.  */
 226:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (bytes_per_cluster == 0)
 144              		.loc 1 226 5 is_stmt 1 view .LVU45
 145              		.loc 1 226 8 is_stmt 0 view .LVU46
 146 0076 002A     		cmp	r2, #0
 147 0078 50D0     		beq	.L66
 227:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 228:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 229:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 230:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 231:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 232:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 233:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Release media protection.  */
 234:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_UNPROTECT
 235:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 236:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Invalid media, return error.  */
 237:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(FX_MEDIA_INVALID);
 238:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 239:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 240:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Initialized first new cluster. */
 241:Middlewares/ST/filex/common/src/fx_file_write.c ****     first_new_cluster =  0;
 148              		.loc 1 241 5 is_stmt 1 view .LVU47
 149              	.LVL7:
 242:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 243:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 244:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Calculate clusters need to be replaced when fault tolerant is enabled. */
 245:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (media_ptr -> fx_media_fault_tolerant_enabled)
 246:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 247:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 248:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (file_ptr -> fx_file_current_file_offset == file_ptr -> fx_file_current_file_size)
 249:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 250:Middlewares/ST/filex/common/src/fx_file_write.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 8


 251:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Appending data. No need to replace existing clusters. */
 252:Middlewares/ST/filex/common/src/fx_file_write.c ****             replace_clusters = 0;
 253:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 254:Middlewares/ST/filex/common/src/fx_file_write.c ****         else if (file_ptr -> fx_file_current_file_offset == file_ptr -> fx_file_maximum_size_used)
 255:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 256:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 257:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Similar to append data. No actual data after fx_file_maximum_size_used.
 258:Middlewares/ST/filex/common/src/fx_file_write.c ****              * No need to replace existing clusters. */
 259:Middlewares/ST/filex/common/src/fx_file_write.c ****             replace_clusters = 0;
 260:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 261:Middlewares/ST/filex/common/src/fx_file_write.c ****         else if (((file_ptr -> fx_file_current_file_offset / media_ptr -> fx_media_bytes_per_sector
 262:Middlewares/ST/filex/common/src/fx_file_write.c ****                  ((file_ptr -> fx_file_current_file_offset + size - 1) / media_ptr -> fx_media_byte
 263:Middlewares/ST/filex/common/src/fx_file_write.c ****                  ((file_ptr -> fx_file_current_file_offset + size) <= file_ptr -> fx_file_current_f
 264:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 265:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 266:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Overwriting data in one sector. No need to replace existing clusters. */
 267:Middlewares/ST/filex/common/src/fx_file_write.c ****             replace_clusters = 0;
 268:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 269:Middlewares/ST/filex/common/src/fx_file_write.c ****         else if ((file_ptr -> fx_file_current_available_size - file_ptr -> fx_file_current_file_off
 270:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 271:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 272:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Replace all clusters from current_cluster. */
 273:Middlewares/ST/filex/common/src/fx_file_write.c ****             replace_clusters = (UINT)(file_ptr -> fx_file_total_clusters - file_ptr -> fx_file_curr
 274:Middlewares/ST/filex/common/src/fx_file_write.c ****             copy_head_cluster = file_ptr -> fx_file_current_physical_cluster;
 275:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 276:Middlewares/ST/filex/common/src/fx_file_write.c ****             data_append = FX_TRUE;
 277:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 278:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
 279:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 280:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 281:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Replace clusters from current_cluster to the end of written cluster. */
 282:Middlewares/ST/filex/common/src/fx_file_write.c ****             replace_clusters = (UINT)((file_ptr -> fx_file_current_file_offset + size + bytes_per_c
 283:Middlewares/ST/filex/common/src/fx_file_write.c ****                                       file_ptr -> fx_file_current_relative_cluster);
 284:Middlewares/ST/filex/common/src/fx_file_write.c ****             copy_head_cluster = file_ptr -> fx_file_current_physical_cluster;
 285:Middlewares/ST/filex/common/src/fx_file_write.c ****             data_append = FX_FALSE;
 286:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 287:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 288:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 289:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 290:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Next, determine if there is enough room to write the specified number of
 291:Middlewares/ST/filex/common/src/fx_file_write.c ****        bytes to the clusters already allocated to this file.  */
 292:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (((file_ptr -> fx_file_current_available_size - file_ptr -> fx_file_current_file_offset) < s
 150              		.loc 1 292 5 view .LVU48
 151              		.loc 1 292 20 is_stmt 0 view .LVU49
 152 007a 276D     		ldr	r7, [r4, #80]
 153 007c D4F85480 		ldr	r8, [r4, #84]
 154              		.loc 1 292 65 view .LVU50
 155 0080 236C     		ldr	r3, [r4, #64]
 156 0082 616C     		ldr	r1, [r4, #68]
 157              		.loc 1 292 54 view .LVU51
 158 0084 B7EB030C 		subs	ip, r7, r3
 159 0088 68EB0100 		sbc	r0, r8, r1
 160              		.loc 1 292 8 view .LVU52
 161 008c B445     		cmp	ip, r6
 162 008e 70F10000 		sbcs	r0, r0, #0
 163 0092 80F0D680 		bcs	.L6
 293:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 9


 294:Middlewares/ST/filex/common/src/fx_file_write.c ****         || (replace_clusters)
 295:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 296:Middlewares/ST/filex/common/src/fx_file_write.c ****        )
 297:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 298:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 299:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* The new request will not fit within the currently allocated clusters.  */
 300:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 301:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Calculate the number of additional clusters that must be allocated for this
 302:Middlewares/ST/filex/common/src/fx_file_write.c ****            write request.  */
 303:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 304:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Find the number of clusters that need to be replaced. */
 305:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (media_ptr -> fx_media_fault_tolerant_enabled)
 306:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 307:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 308:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Mark the recovery phase. */
 309:Middlewares/ST/filex/common/src/fx_file_write.c ****             media_ptr -> fx_media_fault_tolerant_state |= FX_FAULT_TOLERANT_STATE_SET_FAT_CHAIN;
 310:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 311:Middlewares/ST/filex/common/src/fx_file_write.c ****             bytes_remaining = file_ptr -> fx_file_current_file_offset + size;
 312:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 313:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (replace_clusters > 0)
 314:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 315:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 316:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 317:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if ((media_ptr -> fx_media_FAT_type == FX_exFAT) && (file_ptr -> fx_file_dir_entry.
 318:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 319:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Find the insertion points in the exFAT with bitmap case.. this is a simple c
 320:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* The previous cluster is not initialized. Find it. */
 321:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (copy_head_cluster != file_ptr -> fx_file_first_physical_cluster)
 322:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 323:Middlewares/ST/filex/common/src/fx_file_write.c ****                         insertion_front = copy_head_cluster - 1;
 324:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 325:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 326:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Find copy tail cluster. */
 327:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (data_append == FX_FALSE)
 328:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 329:Middlewares/ST/filex/common/src/fx_file_write.c ****                         copy_tail_cluster = file_ptr -> fx_file_first_physical_cluster + (ULONG)((b
 330:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (copy_tail_cluster != file_ptr -> fx_file_last_physical_cluster)
 331:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 332:Middlewares/ST/filex/common/src/fx_file_write.c ****                             insertion_back = copy_tail_cluster + 1;
 333:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 334:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 335:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 336:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else
 337:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 338:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 339:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 340:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Find previous cluster of copy head cluster. */
 341:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* The previous cluster is not initialized. Find it. */
 342:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (copy_head_cluster != file_ptr -> fx_file_first_physical_cluster)
 343:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 344:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 345:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* The copy head cluster is not the first cluster of file. */
 346:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Copy head is not the first cluster of file. */
 347:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (file_ptr -> fx_file_current_relative_cluster < file_ptr -> fx_file_cons
 348:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 349:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 350:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Clusters before current cluster are consecutive. */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 10


 351:Middlewares/ST/filex/common/src/fx_file_write.c ****                             insertion_front = copy_head_cluster - 1;
 352:Middlewares/ST/filex/common/src/fx_file_write.c ****                             bytes_remaining -= file_ptr -> fx_file_current_relative_cluster * bytes
 353:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 354:Middlewares/ST/filex/common/src/fx_file_write.c ****                         else
 355:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 356:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 357:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Skip consecutive clusters first. */
 358:Middlewares/ST/filex/common/src/fx_file_write.c ****                             cluster = file_ptr -> fx_file_first_physical_cluster;
 359:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 360:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Loop the link of FAT to find the previous cluster. */
 361:Middlewares/ST/filex/common/src/fx_file_write.c ****                             while ((cluster >= FX_FAT_ENTRY_START) && (cluster < media_ptr -> fx_me
 362:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 363:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 364:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Reduce remaining bytes. */
 365:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 bytes_remaining -= bytes_per_cluster;
 366:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 367:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Read the current cluster entry from the FAT.  */
 368:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 status =  _fx_utility_FAT_entry_read(media_ptr, cluster, &FAT_value
 369:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 370:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Check the return value.  */
 371:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 if (status != FX_SUCCESS)
 372:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 {
 373:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 374:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 375:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 376:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     /* Release media protection.  */
 377:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     FX_UNPROTECT
 378:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 379:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     /* Return the error status.  */
 380:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     return(status);
 381:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 }
 382:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 383:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 if (FAT_value == copy_head_cluster)
 384:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 {
 385:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     break;
 386:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 }
 387:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 388:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Move to next cluster. */
 389:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 cluster = FAT_value;
 390:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 391:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 392:Middlewares/ST/filex/common/src/fx_file_write.c ****                             if ((cluster >= FX_FAT_ENTRY_START) && (cluster < media_ptr -> fx_media
 393:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 394:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 395:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Find the previous cluster. */
 396:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 insertion_front = cluster;
 397:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 398:Middlewares/ST/filex/common/src/fx_file_write.c ****                             else
 399:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 400:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 401:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 402:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 403:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Release media protection.  */
 404:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_UNPROTECT
 405:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 406:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Return the error status.  */
 407:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 return(FX_NOT_FOUND);
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 11


 408:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 409:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 410:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 411:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 412:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Find copy tail cluster. */
 413:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (bytes_remaining <= bytes_per_cluster)
 414:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 415:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 416:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Only one cluster is modified. */
 417:Middlewares/ST/filex/common/src/fx_file_write.c ****                         copy_tail_cluster = copy_head_cluster;
 418:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 419:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else if (data_append == FX_FALSE)
 420:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 421:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 422:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Search from copy head cluster. */
 423:Middlewares/ST/filex/common/src/fx_file_write.c ****                         cluster = copy_head_cluster;
 424:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FAT_value = FX_FAT_ENTRY_START;
 425:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 426:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Loop the link of FAT to find the previous cluster. */
 427:Middlewares/ST/filex/common/src/fx_file_write.c ****                         while ((cluster >= FX_FAT_ENTRY_START) && (cluster < media_ptr -> fx_media_
 428:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 429:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 430:Middlewares/ST/filex/common/src/fx_file_write.c ****                             if (bytes_remaining <= bytes_per_cluster)
 431:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 432:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 break;
 433:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 434:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 435:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Reduce remaining bytes. */
 436:Middlewares/ST/filex/common/src/fx_file_write.c ****                             bytes_remaining -= bytes_per_cluster;
 437:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 438:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Read the current cluster entry from the FAT.  */
 439:Middlewares/ST/filex/common/src/fx_file_write.c ****                             status =  _fx_utility_FAT_entry_read(media_ptr, cluster, &FAT_value);
 440:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 441:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Check the return value.  */
 442:Middlewares/ST/filex/common/src/fx_file_write.c ****                             if (status != FX_SUCCESS)
 443:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 444:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 445:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 446:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 447:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Release media protection.  */
 448:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_UNPROTECT
 449:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 450:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Return the error status.  */
 451:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 return(status);
 452:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 453:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 454:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Move to next cluster. */
 455:Middlewares/ST/filex/common/src/fx_file_write.c ****                             cluster = FAT_value;
 456:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 457:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 458:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Find the previous cluster. */
 459:Middlewares/ST/filex/common/src/fx_file_write.c ****                         copy_tail_cluster = FAT_value;
 460:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 461:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 462:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Get the cluster next to copy tail. */
 463:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (data_append == FX_FALSE)
 464:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 12


 465:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 466:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Read FAT entry.  */
 467:Middlewares/ST/filex/common/src/fx_file_write.c ****                         status =  _fx_utility_FAT_entry_read(media_ptr, copy_tail_cluster, &inserti
 468:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 469:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Check for a bad status.  */
 470:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (status != FX_SUCCESS)
 471:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 472:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 473:Middlewares/ST/filex/common/src/fx_file_write.c ****                             FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 474:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 475:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Release media protection.  */
 476:Middlewares/ST/filex/common/src/fx_file_write.c ****                             FX_UNPROTECT
 477:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 478:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Return the bad status.  */
 479:Middlewares/ST/filex/common/src/fx_file_write.c ****                             return(status);
 480:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 481:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 482:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else
 483:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 484:Middlewares/ST/filex/common/src/fx_file_write.c ****                         insertion_back = media_ptr -> fx_media_fat_last;
 485:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 486:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 487:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 488:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 489:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 490:Middlewares/ST/filex/common/src/fx_file_write.c ****             else
 491:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 492:Middlewares/ST/filex/common/src/fx_file_write.c ****                 insertion_back = media_ptr -> fx_media_fat_last;
 493:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 494:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 495:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 496:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (file_ptr -> fx_file_current_available_size - file_ptr -> fx_file_current_file_offset < 
 497:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 498:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 499:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Calculate clusters that are needed for data append except ones overwritten. */
 500:Middlewares/ST/filex/common/src/fx_file_write.c ****             clusters =  (UINT)((size + (bytes_per_cluster - 1) -
 164              		.loc 1 500 13 is_stmt 1 view .LVU53
 165              		.loc 1 500 38 is_stmt 0 view .LVU54
 166 0096 B018     		adds	r0, r6, r2
 167 0098 0138     		subs	r0, r0, #1
 168              		.loc 1 500 64 view .LVU55
 169 009a DB1B     		subs	r3, r3, r7
 170 009c 61EB0801 		sbc	r1, r1, r8
 171 00a0 1818     		adds	r0, r3, r0
 501:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 (file_ptr -> fx_file_current_available_size - file_ptr -> fx_file_c
 172              		.loc 1 501 121 view .LVU56
 173 00a2 9146     		mov	r9, r2
 174 00a4 4FF00003 		mov	r3, #0
 175 00a8 41F10001 		adc	r1, r1, #0
 176 00ac FFF7FEFF 		bl	__aeabi_uldivmod
 177              	.LVL8:
 500:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 (file_ptr -> fx_file_current_available_size - file_ptr -> fx_file_c
 178              		.loc 1 500 22 view .LVU57
 179 00b0 8246     		mov	r10, r0
 180              	.LVL9:
 502:Middlewares/ST/filex/common/src/fx_file_write.c ****                                bytes_per_cluster);
 503:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 13


 504:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 505:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
 506:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 507:Middlewares/ST/filex/common/src/fx_file_write.c ****             clusters = 0;
 508:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 509:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 510:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 511:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Determine if we have enough space left.  */
 512:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 513:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (clusters + replace_clusters > media_ptr -> fx_media_available_clusters)
 514:Middlewares/ST/filex/common/src/fx_file_write.c **** #else
 515:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (clusters > media_ptr -> fx_media_available_clusters)
 181              		.loc 1 515 9 is_stmt 1 view .LVU58
 182              		.loc 1 515 34 is_stmt 0 view .LVU59
 183 00b2 EA6F     		ldr	r2, [r5, #124]
 184              		.loc 1 515 12 view .LVU60
 185 00b4 8242     		cmp	r2, r0
 186 00b6 36D3     		bcc	.L67
 516:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 517:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 518:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 519:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 520:Middlewares/ST/filex/common/src/fx_file_write.c ****             FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 521:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 522:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 523:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Release media protection.  */
 524:Middlewares/ST/filex/common/src/fx_file_write.c ****             FX_UNPROTECT
 525:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 526:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Out of disk space.  */
 527:Middlewares/ST/filex/common/src/fx_file_write.c ****             return(FX_NO_MORE_SPACE);
 528:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 529:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 530:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Update the file total cluster count.  */
 531:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_total_clusters =  file_ptr -> fx_file_total_clusters + clusters;
 187              		.loc 1 531 9 is_stmt 1 view .LVU61
 188              		.loc 1 531 56 is_stmt 0 view .LVU62
 189 00b8 2269     		ldr	r2, [r4, #16]
 190              		.loc 1 531 82 view .LVU63
 191 00ba 0244     		add	r2, r2, r0
 192              		.loc 1 531 44 view .LVU64
 193 00bc 2261     		str	r2, [r4, #16]
 532:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 533:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Check for wrap-around when updating the available size.  */
 534:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 535:Middlewares/ST/filex/common/src/fx_file_write.c ****         if ((media_ptr -> fx_media_FAT_type != FX_exFAT) &&
 536:Middlewares/ST/filex/common/src/fx_file_write.c ****             (file_ptr -> fx_file_current_available_size + (ULONG64)bytes_per_cluster * (ULONG64)clu
 537:Middlewares/ST/filex/common/src/fx_file_write.c **** #else
 538:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (file_ptr -> fx_file_current_available_size + (ULONG64)bytes_per_cluster * (ULONG64)clus
 194              		.loc 1 538 9 is_stmt 1 view .LVU65
 195              		.loc 1 538 85 is_stmt 0 view .LVU66
 196 00be A0FB0993 		umull	r9, r3, r0, r9
 197              	.LVL10:
 198              		.loc 1 538 56 view .LVU67
 199 00c2 17EB0907 		adds	r7, r7, r9
 200 00c6 43EB0803 		adc	r3, r3, r8
 201              		.loc 1 538 12 view .LVU68
 202 00ca 4FF0FF32 		mov	r2, #-1
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 14


 203 00ce BA42     		cmp	r2, r7
 204 00d0 4FF00002 		mov	r2, #0
 205 00d4 9A41     		sbcs	r2, r2, r3
 206 00d6 2BD2     		bcs	.L8
 539:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 540:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 541:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 542:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* 32-bit wrap around condition is present.  Just set the available file size to all on
 543:Middlewares/ST/filex/common/src/fx_file_write.c ****                the maximum file size.  */
 544:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_available_size =  0xFFFFFFFFULL;
 207              		.loc 1 544 13 is_stmt 1 view .LVU69
 208              		.loc 1 544 56 is_stmt 0 view .LVU70
 209 00d8 4FF0FF32 		mov	r2, #-1
 210 00dc 0023     		movs	r3, #0
 211 00de C4E91423 		strd	r2, [r4, #80]
 212              	.L9:
 545:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 546:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
 547:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 548:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 549:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Normal condition, update the available size.  */
 550:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_available_size =
 551:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_available_size + (ULONG64)bytes_per_cluster * (ULONG64)
 552:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 553:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 554:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 555:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Account for newly allocated clusters. */
 556:Middlewares/ST/filex/common/src/fx_file_write.c ****         clusters += replace_clusters;
 557:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 558:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 559:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Decrease the available clusters in the media control block. */
 560:Middlewares/ST/filex/common/src/fx_file_write.c ****         media_ptr -> fx_media_available_clusters =  media_ptr -> fx_media_available_clusters - clus
 213              		.loc 1 560 9 is_stmt 1 view .LVU71
 214              		.loc 1 560 63 is_stmt 0 view .LVU72
 215 00e2 EB6F     		ldr	r3, [r5, #124]
 216              		.loc 1 560 94 view .LVU73
 217 00e4 181A     		subs	r0, r3, r0
 218              	.LVL11:
 219              		.loc 1 560 50 view .LVU74
 220 00e6 E867     		str	r0, [r5, #124]
 561:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 562:Middlewares/ST/filex/common/src/fx_file_write.c **** #if defined(FX_ENABLE_EXFAT) && defined(FX_ENABLE_FAULT_TOLERANT)
 563:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Get dont_use_fat value. */
 564:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (media_ptr -> fx_media_FAT_type == FX_exFAT)
 565:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 566:Middlewares/ST/filex/common/src/fx_file_write.c ****             dont_use_fat_old = (UCHAR)file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat;
 567:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 568:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT && FX_ENABLE_FAULT_TOLERANT */
 569:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 570:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Search for the additional clusters we need.  */
 571:Middlewares/ST/filex/common/src/fx_file_write.c ****         total_clusters =     media_ptr -> fx_media_total_clusters;
 221              		.loc 1 571 9 is_stmt 1 view .LVU75
 222              		.loc 1 571 24 is_stmt 0 view .LVU76
 223 00e8 D5F84090 		ldr	r9, [r5, #64]
 224              	.LVL12:
 572:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 573:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 15


 574:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (replace_clusters > 0)
 575:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 576:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 577:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Reset consecutive cluster. */
 578:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_consecutive_cluster = 1;
 579:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 580:Middlewares/ST/filex/common/src/fx_file_write.c ****             last_cluster =   insertion_front;
 581:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 582:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 583:Middlewares/ST/filex/common/src/fx_file_write.c ****             if ((file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1) &&
 584:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_total_clusters > replace_clusters))
 585:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 586:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 587:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Now we should use FAT.  */
 588:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat &= (CHAR)0xfe; /* Clear bit
 589:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 590:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Build FAT chain.  */
 591:Middlewares/ST/filex/common/src/fx_file_write.c ****                 for (i = file_ptr -> fx_file_dir_entry.fx_dir_entry_cluster; i < file_ptr -> fx_fil
 592:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 593:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 594:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status = _fx_utility_FAT_entry_write(media_ptr, i, i + 1);
 595:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 596:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (status != FX_SUCCESS)
 597:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 598:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 599:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 600:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 601:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Release media protection.  */
 602:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_UNPROTECT
 603:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 604:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Return the bad status.  */
 605:Middlewares/ST/filex/common/src/fx_file_write.c ****                         return(status);
 606:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 607:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 608:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 609:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Write the last cluster FAT entry.  */
 610:Middlewares/ST/filex/common/src/fx_file_write.c ****                 status = _fx_utility_FAT_entry_write(media_ptr, i, FX_LAST_CLUSTER_exFAT);
 611:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (status != FX_SUCCESS)
 612:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 613:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 614:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 615:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 616:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Release media protection.  */
 617:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_UNPROTECT
 618:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 619:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Return the bad status.  */
 620:Middlewares/ST/filex/common/src/fx_file_write.c ****                     return(status);
 621:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 622:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 623:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 624:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 625:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
 626:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 627:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 628:Middlewares/ST/filex/common/src/fx_file_write.c ****             last_cluster =   file_ptr -> fx_file_last_physical_cluster;
 225              		.loc 1 628 13 is_stmt 1 view .LVU77
 226              		.loc 1 628 26 is_stmt 0 view .LVU78
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 16


 227 00ec E369     		ldr	r3, [r4, #28]
 228 00ee 0893     		str	r3, [sp, #32]
 229              	.LVL13:
 629:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 630:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 631:Middlewares/ST/filex/common/src/fx_file_write.c ****         FAT_index    =       media_ptr -> fx_media_cluster_search_start;
 230              		.loc 1 631 9 is_stmt 1 view .LVU79
 231              		.loc 1 631 22 is_stmt 0 view .LVU80
 232 00f0 D5F88080 		ldr	r8, [r5, #128]
 233              	.LVL14:
 632:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 633:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Loop to find the needed clusters.  */
 634:Middlewares/ST/filex/common/src/fx_file_write.c ****         while (clusters)
 234              		.loc 1 634 9 is_stmt 1 view .LVU81
 241:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 235              		.loc 1 241 23 is_stmt 0 view .LVU82
 236 00f4 079B     		ldr	r3, [sp, #28]
 237              	.LVL15:
 241:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 238              		.loc 1 241 23 view .LVU83
 239 00f6 0993     		str	r3, [sp, #36]
 240 00f8 4F46     		mov	r7, r9
 241              	.LVL16:
 242              	.L10:
 243              		.loc 1 634 15 is_stmt 1 view .LVU84
 244 00fa BAF1000F 		cmp	r10, #0
 245 00fe 00F09280 		beq	.L68
 635:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 636:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 637:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Decrease the cluster count.  */
 638:Middlewares/ST/filex/common/src/fx_file_write.c ****             clusters--;
 246              		.loc 1 638 13 view .LVU85
 247              		.loc 1 638 21 is_stmt 0 view .LVU86
 248 0102 0AF1FF3A 		add	r10, r10, #-1
 249              	.LVL17:
 250              		.loc 1 638 21 view .LVU87
 251 0106 18E0     		b	.L11
 252              	.LVL18:
 253              	.L64:
 197:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 254              		.loc 1 197 9 is_stmt 1 view .LVU88
 255 0108 0698     		ldr	r0, [sp, #24]
 256 010a FFF7FEFF 		bl	_tx_mutex_put
 257              	.LVL19:
 200:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 258              		.loc 1 200 9 view .LVU89
 200:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 259              		.loc 1 200 15 is_stmt 0 view .LVU90
 260 010e 2327     		movs	r7, #35
 261 0110 32E2     		b	.L1
 262              	.L65:
 208:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 263              		.loc 1 208 9 is_stmt 1 view .LVU91
 264 0112 0698     		ldr	r0, [sp, #24]
 265 0114 FFF7FEFF 		bl	_tx_mutex_put
 266              	.LVL20:
 212:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 17


 267              		.loc 1 212 9 view .LVU92
 212:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 268              		.loc 1 212 15 is_stmt 0 view .LVU93
 269 0118 0627     		movs	r7, #6
 270 011a 2DE2     		b	.L1
 271              	.LVL21:
 272              	.L66:
 234:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 273              		.loc 1 234 9 is_stmt 1 view .LVU94
 274 011c 0698     		ldr	r0, [sp, #24]
 275 011e FFF7FEFF 		bl	_tx_mutex_put
 276              	.LVL22:
 237:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 277              		.loc 1 237 9 view .LVU95
 237:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 278              		.loc 1 237 15 is_stmt 0 view .LVU96
 279 0122 0227     		movs	r7, #2
 280 0124 28E2     		b	.L1
 281              	.LVL23:
 282              	.L67:
 524:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 283              		.loc 1 524 13 is_stmt 1 view .LVU97
 284 0126 0698     		ldr	r0, [sp, #24]
 285              	.LVL24:
 524:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 286              		.loc 1 524 13 is_stmt 0 view .LVU98
 287 0128 FFF7FEFF 		bl	_tx_mutex_put
 288              	.LVL25:
 527:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 289              		.loc 1 527 13 is_stmt 1 view .LVU99
 527:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 290              		.loc 1 527 19 is_stmt 0 view .LVU100
 291 012c 0A27     		movs	r7, #10
 292 012e 23E2     		b	.L1
 293              	.LVL26:
 294              	.L8:
 550:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_available_size + (ULONG64)bytes_per_cluster * (ULONG64)
 295              		.loc 1 550 13 is_stmt 1 view .LVU101
 550:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_available_size + (ULONG64)bytes_per_cluster * (ULONG64)
 296              		.loc 1 550 56 is_stmt 0 view .LVU102
 297 0130 2765     		str	r7, [r4, #80]
 298 0132 6365     		str	r3, [r4, #84]
 299 0134 D5E7     		b	.L9
 300              	.LVL27:
 301              	.L58:
 639:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 640:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (media_ptr -> fx_media_FAT_type == FX_exFAT)
 641:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 642:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 643:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Find a free cluster.  */
 644:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1)
 645:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 646:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 647:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (last_cluster)
 648:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 649:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 650:Middlewares/ST/filex/common/src/fx_file_write.c ****                         cluster_state = FX_EXFAT_BITMAP_CLUSTER_OCCUPIED;
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 18


 651:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FAT_index = last_cluster + 1;
 652:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 653:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (FAT_index < media_ptr -> fx_media_total_clusters + FX_FAT_ENTRY_START)
 654:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 655:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 656:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Get the state of the cluster.  */
 657:Middlewares/ST/filex/common/src/fx_file_write.c ****                             status = _fx_utility_exFAT_cluster_state_get(media_ptr, FAT_index, &clu
 658:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 659:Middlewares/ST/filex/common/src/fx_file_write.c ****                             if (status != FX_SUCCESS)
 660:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 661:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 662:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 663:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 664:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 665:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 666:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Release media protection.  */
 667:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_UNPROTECT
 668:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 669:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Return the bad status.  */
 670:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 return(status);
 671:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 672:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 673:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 674:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Check if we still can do not use FAT.  */
 675:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (cluster_state == FX_EXFAT_BITMAP_CLUSTER_FREE)
 676:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 677:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 678:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Clusters are still consecutive.  */
 679:Middlewares/ST/filex/common/src/fx_file_write.c ****                             file_ptr -> fx_file_consecutive_cluster++;
 680:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 681:Middlewares/ST/filex/common/src/fx_file_write.c ****                         else
 682:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 683:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 684:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Now we should use FAT.  */
 685:Middlewares/ST/filex/common/src/fx_file_write.c ****                             file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat &= (CHAR)0xfe; 
 686:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 687:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Build FAT chain.  */
 688:Middlewares/ST/filex/common/src/fx_file_write.c ****                             for (i = file_ptr -> fx_file_dir_entry.fx_dir_entry_cluster; i < last_c
 689:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 690:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 691:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 status = _fx_utility_FAT_entry_write(media_ptr, i, i + 1);
 692:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 693:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 if (status != FX_SUCCESS)
 694:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 {
 695:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 696:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 697:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 698:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 699:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 700:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     /* Release media protection.  */
 701:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     FX_UNPROTECT
 702:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 703:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     /* Return the bad status.  */
 704:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     return(status);
 705:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 }
 706:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 707:Middlewares/ST/filex/common/src/fx_file_write.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 19


 708:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Write the last cluster FAT entry.  */
 709:Middlewares/ST/filex/common/src/fx_file_write.c ****                             status = _fx_utility_FAT_entry_write(media_ptr, last_cluster, FX_LAST_C
 710:Middlewares/ST/filex/common/src/fx_file_write.c ****                             if (status != FX_SUCCESS)
 711:Middlewares/ST/filex/common/src/fx_file_write.c ****                             {
 712:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 713:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 714:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 715:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 716:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 717:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Release media protection.  */
 718:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 FX_UNPROTECT
 719:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 720:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 /* Return the bad status.  */
 721:Middlewares/ST/filex/common/src/fx_file_write.c ****                                 return(status);
 722:Middlewares/ST/filex/common/src/fx_file_write.c ****                             }
 723:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 724:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Find free cluster from exFAT media.  */
 725:Middlewares/ST/filex/common/src/fx_file_write.c ****                             status = _fx_utility_exFAT_bitmap_free_cluster_find(media_ptr,
 726:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                                 media_ptr -> fx_med
 727:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                                 &FAT_index);
 728:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 729:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 730:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else
 731:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 732:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 733:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Find the first cluster for file.  */
 734:Middlewares/ST/filex/common/src/fx_file_write.c ****                         status = _fx_utility_exFAT_bitmap_free_cluster_find(media_ptr,
 735:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                             media_ptr -> fx_media_c
 736:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                             &FAT_index);
 737:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 738:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 739:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else
 740:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 741:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 742:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Find free cluster from exFAT media.  */
 743:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status = _fx_utility_exFAT_bitmap_free_cluster_find(media_ptr,
 744:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                         media_ptr -> fx_media_clust
 745:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                         &FAT_index);
 746:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 747:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 748:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (status != FX_SUCCESS)
 749:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 750:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 751:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 752:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 753:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 754:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 755:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Release media protection.  */
 756:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_UNPROTECT
 757:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 758:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Return the bad status.  */
 759:Middlewares/ST/filex/common/src/fx_file_write.c ****                     return(status);
 760:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 761:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 762:Middlewares/ST/filex/common/src/fx_file_write.c ****             else
 763:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 764:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 20


 765:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 766:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Loop to find the first available cluster.  */
 767:Middlewares/ST/filex/common/src/fx_file_write.c ****                 do
 768:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 769:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 770:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Make sure we stop looking after one pass through the FAT table.  */
 771:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (!total_clusters)
 772:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 773:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 774:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 775:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 776:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 777:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 778:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Release media protection.  */
 779:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_UNPROTECT
 780:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 781:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Something is wrong with the media - the desired clusters were
 782:Middlewares/ST/filex/common/src/fx_file_write.c ****                            not found in the FAT table.  */
 783:Middlewares/ST/filex/common/src/fx_file_write.c ****                         return(FX_NO_MORE_SPACE);
 784:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 785:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 786:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Read FAT entry.  */
 787:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status =  _fx_utility_FAT_entry_read(media_ptr, FAT_index, &FAT_value);
 788:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 789:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Check for a bad status.  */
 790:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (status != FX_SUCCESS)
 791:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 792:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 793:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 794:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 795:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 796:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 797:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Release media protection.  */
 798:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_UNPROTECT
 799:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 800:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Return the bad status.  */
 801:Middlewares/ST/filex/common/src/fx_file_write.c ****                         return(status);
 802:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 803:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 804:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Decrement the total cluster count.  */
 805:Middlewares/ST/filex/common/src/fx_file_write.c ****                     total_clusters--;
 806:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 807:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Determine if the FAT entry is free.  */
 808:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (FAT_value == FX_FREE_CLUSTER)
 809:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 810:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 811:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Move cluster search pointer forward.  */
 812:Middlewares/ST/filex/common/src/fx_file_write.c ****                         media_ptr -> fx_media_cluster_search_start =  FAT_index + 1;
 813:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 814:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Determine if this needs to be wrapped.  */
 815:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (media_ptr -> fx_media_cluster_search_start >= (media_ptr -> fx_media_to
 816:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 817:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 818:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Wrap the search to the beginning FAT entry.  */
 819:Middlewares/ST/filex/common/src/fx_file_write.c ****                             media_ptr -> fx_media_cluster_search_start =  FX_FAT_ENTRY_START;
 820:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 821:Middlewares/ST/filex/common/src/fx_file_write.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 21


 822:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Break this loop.  */
 823:Middlewares/ST/filex/common/src/fx_file_write.c ****                         break;
 824:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 825:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else
 826:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 827:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 828:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* FAT entry is not free... Advance the FAT index.  */
 829:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FAT_index++;
 830:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 831:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Determine if we need to wrap the FAT index around.  */
 832:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (FAT_index >= (media_ptr -> fx_media_total_clusters + FX_FAT_ENTRY_START
 833:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 834:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 835:Middlewares/ST/filex/common/src/fx_file_write.c ****                             /* Wrap the search to the beginning FAT entry.  */
 836:Middlewares/ST/filex/common/src/fx_file_write.c ****                             FAT_index =  FX_FAT_ENTRY_START;
 302              		.loc 1 836 39 view .LVU103
 303 0136 4FF00208 		mov	r8, #2
 304              	.LVL28:
 305              	.L11:
 767:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 306              		.loc 1 767 17 is_stmt 1 view .LVU104
 771:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 307              		.loc 1 771 21 view .LVU105
 771:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 308              		.loc 1 771 24 is_stmt 0 view .LVU106
 309 013a 87B1     		cbz	r7, .L69
 787:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 310              		.loc 1 787 21 is_stmt 1 view .LVU107
 787:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 311              		.loc 1 787 31 is_stmt 0 view .LVU108
 312 013c 0AAA     		add	r2, sp, #40
 313 013e 4146     		mov	r1, r8
 314 0140 2846     		mov	r0, r5
 315 0142 FFF7FEFF 		bl	_fx_utility_FAT_entry_read
 316              	.LVL29:
 790:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 317              		.loc 1 790 21 is_stmt 1 view .LVU109
 790:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 318              		.loc 1 790 24 is_stmt 0 view .LVU110
 319 0146 0246     		mov	r2, r0
 320 0148 70B9     		cbnz	r0, .L70
 805:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 321              		.loc 1 805 21 is_stmt 1 view .LVU111
 805:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 322              		.loc 1 805 35 is_stmt 0 view .LVU112
 323 014a 013F     		subs	r7, r7, #1
 324              	.LVL30:
 808:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 325              		.loc 1 808 21 is_stmt 1 view .LVU113
 808:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 326              		.loc 1 808 35 is_stmt 0 view .LVU114
 327 014c 0A9B     		ldr	r3, [sp, #40]
 808:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 328              		.loc 1 808 24 view .LVU115
 329 014e 83B1     		cbz	r3, .L71
 829:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 330              		.loc 1 829 25 is_stmt 1 view .LVU116
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 22


 829:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 331              		.loc 1 829 34 is_stmt 0 view .LVU117
 332 0150 08F10108 		add	r8, r8, #1
 333              	.LVL31:
 832:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 334              		.loc 1 832 25 is_stmt 1 view .LVU118
 832:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 335              		.loc 1 832 53 is_stmt 0 view .LVU119
 336 0154 2B6C     		ldr	r3, [r5, #64]
 832:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 337              		.loc 1 832 80 view .LVU120
 338 0156 0233     		adds	r3, r3, #2
 832:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 339              		.loc 1 832 28 view .LVU121
 340 0158 4345     		cmp	r3, r8
 341 015a ECD9     		bls	.L58
 342 015c EDE7     		b	.L11
 343              	.LVL32:
 344              	.L69:
 779:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 345              		.loc 1 779 25 is_stmt 1 view .LVU122
 346 015e 0698     		ldr	r0, [sp, #24]
 347 0160 FFF7FEFF 		bl	_tx_mutex_put
 348              	.LVL33:
 783:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 349              		.loc 1 783 25 view .LVU123
 783:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 350              		.loc 1 783 31 is_stmt 0 view .LVU124
 351 0164 0A27     		movs	r7, #10
 352              	.LVL34:
 783:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 353              		.loc 1 783 31 view .LVU125
 354 0166 07E2     		b	.L1
 355              	.LVL35:
 356              	.L70:
 798:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 357              		.loc 1 798 25 view .LVU126
 358 0168 0746     		mov	r7, r0
 359              	.LVL36:
 798:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 360              		.loc 1 798 25 is_stmt 1 view .LVU127
 361 016a 0698     		ldr	r0, [sp, #24]
 362              	.LVL37:
 798:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 363              		.loc 1 798 25 is_stmt 0 view .LVU128
 364 016c FFF7FEFF 		bl	_tx_mutex_put
 365              	.LVL38:
 801:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 366              		.loc 1 801 25 is_stmt 1 view .LVU129
 801:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 367              		.loc 1 801 31 is_stmt 0 view .LVU130
 368 0170 02E2     		b	.L1
 369              	.LVL39:
 370              	.L71:
 812:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 371              		.loc 1 812 25 is_stmt 1 view .LVU131
 812:Middlewares/ST/filex/common/src/fx_file_write.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 23


 372              		.loc 1 812 81 is_stmt 0 view .LVU132
 373 0172 08F10101 		add	r1, r8, #1
 812:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 374              		.loc 1 812 68 view .LVU133
 375 0176 C5F88010 		str	r1, [r5, #128]
 815:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 376              		.loc 1 815 25 is_stmt 1 view .LVU134
 815:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 377              		.loc 1 815 86 is_stmt 0 view .LVU135
 378 017a 2B6C     		ldr	r3, [r5, #64]
 815:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 379              		.loc 1 815 113 view .LVU136
 380 017c 0233     		adds	r3, r3, #2
 815:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 381              		.loc 1 815 28 view .LVU137
 382 017e 9942     		cmp	r1, r3
 383 0180 02D3     		bcc	.L15
 819:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 384              		.loc 1 819 29 is_stmt 1 view .LVU138
 819:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 385              		.loc 1 819 72 is_stmt 0 view .LVU139
 386 0182 0223     		movs	r3, #2
 387 0184 C5F88030 		str	r3, [r5, #128]
 388              	.L15:
 823:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 389              		.loc 1 823 25 is_stmt 1 view .LVU140
 837:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 838:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 839:Middlewares/ST/filex/common/src/fx_file_write.c ****                 } while (FX_TRUE);
 840:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 841:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 842:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 843:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 844:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Determine if we have found the first new cluster yet.  */
 845:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (first_new_cluster == 0)
 390              		.loc 1 845 13 view .LVU141
 391              		.loc 1 845 16 is_stmt 0 view .LVU142
 392 0188 099B     		ldr	r3, [sp, #36]
 393 018a 0BB9     		cbnz	r3, .L18
 846:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 847:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 848:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Remember the first new cluster. */
 849:Middlewares/ST/filex/common/src/fx_file_write.c ****                 first_new_cluster =  FAT_index;
 394              		.loc 1 849 35 view .LVU143
 395 018c CDF82480 		str	r8, [sp, #36]
 396              	.LVL40:
 397              	.L18:
 850:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 851:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 852:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (media_ptr -> fx_media_fault_tolerant_enabled)
 853:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 854:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 855:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Set the undo log now. */
 856:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (copy_head_cluster == 0)
 857:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 858:Middlewares/ST/filex/common/src/fx_file_write.c ****                         status = _fx_fault_tolerant_set_FAT_chain(media_ptr, dont_use_fat_old, file
 859:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                   first_new_cluster, media_ptr -> f
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 24


 860:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 861:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 862:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else if (dont_use_fat_old && (insertion_back == media_ptr -> fx_media_fat_last)
 863:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 864:Middlewares/ST/filex/common/src/fx_file_write.c ****                         status = _fx_fault_tolerant_set_FAT_chain(media_ptr, dont_use_fat_old, inse
 865:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                   copy_head_cluster, file_ptr -> fx
 866:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 867:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 868:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else
 869:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 870:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 871:Middlewares/ST/filex/common/src/fx_file_write.c ****                         status = _fx_fault_tolerant_set_FAT_chain(media_ptr, dont_use_fat_old, inse
 872:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                   copy_head_cluster, insertion_back
 873:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 874:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 875:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Check for good completion status.  */
 876:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (status !=  FX_SUCCESS)
 877:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 878:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 879:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 880:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 881:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Release media protection.  */
 882:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_UNPROTECT
 883:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 884:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Return the error status.  */
 885:Middlewares/ST/filex/common/src/fx_file_write.c ****                         return(status);
 886:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 887:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 888:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 889:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 890:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 891:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Make a quick check to see if an empty, cluster-less file
 892:Middlewares/ST/filex/common/src/fx_file_write.c ****                is being written to for the first time.  */
 893:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (last_cluster)
 398              		.loc 1 893 13 is_stmt 1 view .LVU144
 399              		.loc 1 893 16 is_stmt 0 view .LVU145
 400 0190 0899     		ldr	r1, [sp, #32]
 401 0192 59B3     		cbz	r1, .L19
 894:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 895:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 896:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Check for the file's cluster.  We won't perform this link until the
 897:Middlewares/ST/filex/common/src/fx_file_write.c ****                    entire FAT chain is built.  */
 898:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (last_cluster != file_ptr -> fx_file_last_physical_cluster)
 402              		.loc 1 898 17 is_stmt 1 view .LVU146
 403              		.loc 1 898 46 is_stmt 0 view .LVU147
 404 0194 E369     		ldr	r3, [r4, #28]
 405              		.loc 1 898 20 view .LVU148
 406 0196 8B42     		cmp	r3, r1
 407 0198 1DD1     		bne	.L72
 408              	.L20:
 899:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 900:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 901:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (!(file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1)
 902:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 903:Middlewares/ST/filex/common/src/fx_file_write.c ****                         || (media_ptr -> fx_media_fault_tolerant_enabled == FX_TRUE)
 904:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 905:Middlewares/ST/filex/common/src/fx_file_write.c ****                        )
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 25


 906:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 907:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 908:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 909:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Normal condition - link the last cluster with the new
 910:Middlewares/ST/filex/common/src/fx_file_write.c ****                            found cluster.  */
 911:Middlewares/ST/filex/common/src/fx_file_write.c ****                         status = _fx_utility_FAT_entry_write(media_ptr, last_cluster, FAT_index);
 912:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 913:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
 914:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
 915:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 916:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 917:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Check for a bad FAT write status.  */
 918:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (status !=  FX_SUCCESS)
 409              		.loc 1 918 17 is_stmt 1 view .LVU149
 410              		.loc 1 918 20 is_stmt 0 view .LVU150
 411 019a 12BB     		cbnz	r2, .L73
 919:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 920:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 921:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 922:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 923:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 924:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 925:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Release media protection.  */
 926:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_UNPROTECT
 927:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 928:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Return the bad status.  */
 929:Middlewares/ST/filex/common/src/fx_file_write.c ****                     return(status);
 930:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 931:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 932:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Determine if we are adding a sector after a write filled the previously
 933:Middlewares/ST/filex/common/src/fx_file_write.c ****                    allocated cluster exactly.  */
 934:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if ((file_ptr -> fx_file_current_relative_sector >=
 412              		.loc 1 934 17 is_stmt 1 view .LVU151
 413              		.loc 1 934 31 is_stmt 0 view .LVU152
 414 019c A26B     		ldr	r2, [r4, #56]
 935:Middlewares/ST/filex/common/src/fx_file_write.c ****                      (media_ptr -> fx_media_sectors_per_cluster - 1)) &&
 415              		.loc 1 935 33 view .LVU153
 416 019e 6B6D     		ldr	r3, [r5, #84]
 417              		.loc 1 935 65 view .LVU154
 418 01a0 013B     		subs	r3, r3, #1
 934:Middlewares/ST/filex/common/src/fx_file_write.c ****                      (media_ptr -> fx_media_sectors_per_cluster - 1)) &&
 419              		.loc 1 934 20 view .LVU155
 420 01a2 9A42     		cmp	r2, r3
 421 01a4 3AD3     		bcc	.L22
 936:Middlewares/ST/filex/common/src/fx_file_write.c ****                     (file_ptr -> fx_file_current_logical_offset >=
 422              		.loc 1 936 31 view .LVU156
 423 01a6 226B     		ldr	r2, [r4, #48]
 937:Middlewares/ST/filex/common/src/fx_file_write.c ****                      media_ptr -> fx_media_bytes_per_sector))
 424              		.loc 1 937 32 view .LVU157
 425 01a8 AB6A     		ldr	r3, [r5, #40]
 935:Middlewares/ST/filex/common/src/fx_file_write.c ****                     (file_ptr -> fx_file_current_logical_offset >=
 426              		.loc 1 935 71 view .LVU158
 427 01aa 9A42     		cmp	r2, r3
 428 01ac 36D3     		bcc	.L22
 938:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 939:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 940:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Yes, we need to adjust all of the pertinent file parameters for
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 26


 941:Middlewares/ST/filex/common/src/fx_file_write.c ****                        writing into this newly allocated cluster.  */
 942:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_physical_cluster =  FAT_index;
 429              		.loc 1 942 21 is_stmt 1 view .LVU159
 430              		.loc 1 942 66 is_stmt 0 view .LVU160
 431 01ae C4F82080 		str	r8, [r4, #32]
 943:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_relative_cluster++;
 432              		.loc 1 943 21 is_stmt 1 view .LVU161
 433              		.loc 1 943 30 is_stmt 0 view .LVU162
 434 01b2 636B     		ldr	r3, [r4, #52]
 435              		.loc 1 943 65 view .LVU163
 436 01b4 0133     		adds	r3, r3, #1
 437 01b6 6363     		str	r3, [r4, #52]
 944:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_relative_sector =   0;
 438              		.loc 1 944 21 is_stmt 1 view .LVU164
 439              		.loc 1 944 65 is_stmt 0 view .LVU165
 440 01b8 0020     		movs	r0, #0
 441              	.LVL41:
 442              		.loc 1 944 65 view .LVU166
 443 01ba A063     		str	r0, [r4, #56]
 945:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_d
 444              		.loc 1 945 21 is_stmt 1 view .LVU167
 445              		.loc 1 945 87 is_stmt 0 view .LVU168
 446 01bc 2A6D     		ldr	r2, [r5, #80]
 946:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(FAT_index - FX_FAT_ENTRY_START)) *
 447              		.loc 1 946 47 view .LVU169
 448 01be A8F10203 		sub	r3, r8, #2
 947:Middlewares/ST/filex/common/src/fx_file_write.c ****                          ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 449              		.loc 1 947 44 view .LVU170
 450 01c2 696D     		ldr	r1, [r5, #84]
 946:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(FAT_index - FX_FAT_ENTRY_START)) *
 451              		.loc 1 946 70 view .LVU171
 452 01c4 A3FB0131 		umull	r3, r1, r3, r1
 945:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_d
 453              		.loc 1 945 118 view .LVU172
 454 01c8 D218     		adds	r2, r2, r3
 455 01ca 41F10001 		adc	r1, r1, #0
 945:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_d
 456              		.loc 1 945 64 view .LVU173
 457 01ce A262     		str	r2, [r4, #40]
 458 01d0 E162     		str	r1, [r4, #44]
 948:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_logical_offset =    0;
 459              		.loc 1 948 21 is_stmt 1 view .LVU174
 460              		.loc 1 948 64 is_stmt 0 view .LVU175
 461 01d2 2063     		str	r0, [r4, #48]
 462 01d4 22E0     		b	.L22
 463              	.LVL42:
 464              	.L72:
 911:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 465              		.loc 1 911 25 is_stmt 1 view .LVU176
 911:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 466              		.loc 1 911 34 is_stmt 0 view .LVU177
 467 01d6 4246     		mov	r2, r8
 468 01d8 2846     		mov	r0, r5
 469              	.LVL43:
 911:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 470              		.loc 1 911 34 view .LVU178
 471 01da FFF7FEFF 		bl	_fx_utility_FAT_entry_write
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 27


 472              	.LVL44:
 473 01de 0246     		mov	r2, r0
 474              	.LVL45:
 911:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 475              		.loc 1 911 34 view .LVU179
 476 01e0 DBE7     		b	.L20
 477              	.L73:
 926:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 478              		.loc 1 926 21 view .LVU180
 479 01e2 1746     		mov	r7, r2
 480              	.LVL46:
 926:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 481              		.loc 1 926 21 is_stmt 1 view .LVU181
 482 01e4 0698     		ldr	r0, [sp, #24]
 483              	.LVL47:
 926:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 484              		.loc 1 926 21 is_stmt 0 view .LVU182
 485 01e6 FFF7FEFF 		bl	_tx_mutex_put
 486              	.LVL48:
 929:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 487              		.loc 1 929 21 is_stmt 1 view .LVU183
 929:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 488              		.loc 1 929 27 is_stmt 0 view .LVU184
 489 01ea C5E1     		b	.L1
 490              	.LVL49:
 491              	.L19:
 949:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 950:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 951:Middlewares/ST/filex/common/src/fx_file_write.c ****             else
 952:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 953:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 954:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* This is the first cluster allocated for the file.  Just
 955:Middlewares/ST/filex/common/src/fx_file_write.c ****                    remember it as being the first and setup the other file
 956:Middlewares/ST/filex/common/src/fx_file_write.c ****                    pointers accordingly.  */
 957:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_first_physical_cluster =    FAT_index;
 492              		.loc 1 957 17 is_stmt 1 view .LVU185
 493              		.loc 1 957 60 is_stmt 0 view .LVU186
 494 01ec C4F81480 		str	r8, [r4, #20]
 958:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_physical_cluster =  FAT_index;
 495              		.loc 1 958 17 is_stmt 1 view .LVU187
 496              		.loc 1 958 62 is_stmt 0 view .LVU188
 497 01f0 C4F82080 		str	r8, [r4, #32]
 959:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_relative_cluster =  0;
 498              		.loc 1 959 17 is_stmt 1 view .LVU189
 499              		.loc 1 959 62 is_stmt 0 view .LVU190
 500 01f4 0020     		movs	r0, #0
 501              	.LVL50:
 502              		.loc 1 959 62 view .LVU191
 503 01f6 6063     		str	r0, [r4, #52]
 960:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_data_
 504              		.loc 1 960 17 is_stmt 1 view .LVU192
 505              		.loc 1 960 83 is_stmt 0 view .LVU193
 506 01f8 2A6D     		ldr	r2, [r5, #80]
 507              	.LVL51:
 961:Middlewares/ST/filex/common/src/fx_file_write.c ****                     (((ULONG64)(FAT_index - FX_FAT_ENTRY_START)) *
 508              		.loc 1 961 43 view .LVU194
 509 01fa A8F10203 		sub	r3, r8, #2
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 28


 962:Middlewares/ST/filex/common/src/fx_file_write.c ****                      ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 510              		.loc 1 962 40 view .LVU195
 511 01fe 696D     		ldr	r1, [r5, #84]
 961:Middlewares/ST/filex/common/src/fx_file_write.c ****                     (((ULONG64)(FAT_index - FX_FAT_ENTRY_START)) *
 512              		.loc 1 961 66 view .LVU196
 513 0200 A3FB0131 		umull	r3, r1, r3, r1
 960:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_data_
 514              		.loc 1 960 114 view .LVU197
 515 0204 D218     		adds	r2, r2, r3
 516 0206 41F10001 		adc	r1, r1, #0
 960:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_data_
 517              		.loc 1 960 60 view .LVU198
 518 020a A262     		str	r2, [r4, #40]
 519 020c E162     		str	r1, [r4, #44]
 963:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 964:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (file_ptr -> fx_file_last_physical_cluster == 0)
 965:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 966:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 967:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_logical_offset =    0;
 520              		.loc 1 967 21 is_stmt 1 view .LVU199
 521              		.loc 1 967 64 is_stmt 0 view .LVU200
 522 020e 2063     		str	r0, [r4, #48]
 968:Middlewares/ST/filex/common/src/fx_file_write.c ****                     file_ptr -> fx_file_current_file_offset =       0;
 523              		.loc 1 968 21 is_stmt 1 view .LVU201
 524              		.loc 1 968 61 is_stmt 0 view .LVU202
 525 0210 0022     		movs	r2, #0
 526 0212 0023     		movs	r3, #0
 527 0214 C4E91023 		strd	r2, [r4, #64]
 969:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 970:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 971:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Also remember this as the first cluster in the directory
 972:Middlewares/ST/filex/common/src/fx_file_write.c ****                    entry.  */
 973:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_dir_entry.fx_dir_entry_cluster =  FAT_index;
 528              		.loc 1 973 17 is_stmt 1 view .LVU203
 529              		.loc 1 973 68 is_stmt 0 view .LVU204
 530 0218 C4F89C80 		str	r8, [r4, #156]
 531              	.L22:
 974:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 975:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
 976:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (media_ptr -> fx_media_FAT_type == FX_exFAT)
 977:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 978:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 979:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Update Bitmap */
 980:Middlewares/ST/filex/common/src/fx_file_write.c ****                 status = _fx_utility_exFAT_cluster_state_set(media_ptr, FAT_index, FX_EXFAT_BITMAP_
 981:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 982:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (status !=  FX_SUCCESS)
 983:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 984:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
 985:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
 986:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 987:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 988:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Release media protection.  */
 989:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_UNPROTECT
 990:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 991:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Return the bad status.  */
 992:Middlewares/ST/filex/common/src/fx_file_write.c ****                     return(status);
 993:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 29


 994:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 995:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Move cluster search pointer forward. */
 996:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_cluster_search_start = FAT_index + 1;
 997:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 998:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Determine if this needs to be wrapped. */
 999:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (media_ptr -> fx_media_cluster_search_start >= media_ptr -> fx_media_total_clust
1000:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1001:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1002:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Wrap the search to the beginning FAT entry. */
1003:Middlewares/ST/filex/common/src/fx_file_write.c ****                     media_ptr -> fx_media_cluster_search_start = FX_FAT_ENTRY_START;
1004:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1005:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1006:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1007:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1008:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Otherwise, remember the new FAT index as the last.  */
1009:Middlewares/ST/filex/common/src/fx_file_write.c ****             last_cluster =  FAT_index;
 532              		.loc 1 1009 13 is_stmt 1 view .LVU205
 533              	.LVL52:
1010:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1011:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Move to the next FAT entry.  */
1012:Middlewares/ST/filex/common/src/fx_file_write.c ****             FAT_index =  media_ptr -> fx_media_cluster_search_start;
 534              		.loc 1 1012 13 view .LVU206
1009:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 535              		.loc 1 1009 26 is_stmt 0 view .LVU207
 536 021c CDF82080 		str	r8, [sp, #32]
 537              		.loc 1 1012 23 view .LVU208
 538 0220 D5F88080 		ldr	r8, [r5, #128]
 539              	.LVL53:
 540              		.loc 1 1012 23 view .LVU209
 541 0224 69E7     		b	.L10
 542              	.LVL54:
 543              	.L68:
1013:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1014:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1015:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (!(file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1)
1016:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1017:Middlewares/ST/filex/common/src/fx_file_write.c ****             || (media_ptr -> fx_media_fault_tolerant_enabled == FX_TRUE)
1018:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1019:Middlewares/ST/filex/common/src/fx_file_write.c ****            )
1020:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1021:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1022:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1023:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1024:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (media_ptr -> fx_media_fault_tolerant_enabled)
1025:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1026:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1027:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Link the last cluster back to original FAT.  */
1028:Middlewares/ST/filex/common/src/fx_file_write.c ****                 status = _fx_utility_FAT_entry_write(media_ptr, last_cluster, insertion_back);
1029:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1030:Middlewares/ST/filex/common/src/fx_file_write.c ****             else
1031:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1032:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1033:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1034:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Place an end-of-file marker on the last cluster.  */
1035:Middlewares/ST/filex/common/src/fx_file_write.c ****                 status = _fx_utility_FAT_entry_write(media_ptr, last_cluster, media_ptr -> fx_media
 544              		.loc 1 1035 17 is_stmt 1 view .LVU210
 545              		.loc 1 1035 26 is_stmt 0 view .LVU211
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 30


 546 0226 05F50053 		add	r3, r5, #8192
 547 022a D3F8AC24 		ldr	r2, [r3, #1196]
 548 022e 0899     		ldr	r1, [sp, #32]
 549 0230 2846     		mov	r0, r5
 550 0232 FFF7FEFF 		bl	_fx_utility_FAT_entry_write
 551              	.LVL55:
1036:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1037:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1038:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for a bad FAT write status.  */
1039:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
 552              		.loc 1 1039 13 is_stmt 1 view .LVU212
 553              		.loc 1 1039 16 is_stmt 0 view .LVU213
 554 0236 0746     		mov	r7, r0
 555              	.LVL56:
 556              		.loc 1 1039 16 view .LVU214
 557 0238 A8B9     		cbnz	r0, .L74
1040:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1041:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1042:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1043:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1044:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1045:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1046:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1047:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1048:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the bad status.  */
1049:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1050:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1051:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1052:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1053:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1054:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1055:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1056:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Determine if the file already had clusters.  */
1057:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (file_ptr -> fx_file_last_physical_cluster)
 558              		.loc 1 1057 9 is_stmt 1 view .LVU215
 559              		.loc 1 1057 22 is_stmt 0 view .LVU216
 560 023a E169     		ldr	r1, [r4, #28]
 561              		.loc 1 1057 12 view .LVU217
 562 023c B9B9     		cbnz	r1, .L75
 563              	.L25:
1058:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1059:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1060:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (!(file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1))
1061:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1062:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1063:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1064:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Now, link the file's old last cluster to the first cluster of the new chain.  */
1065:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1066:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (insertion_front)
1067:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1068:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status = _fx_utility_FAT_entry_write(media_ptr, insertion_front, first_new_clus
1069:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1070:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else if ((media_ptr -> fx_media_fault_tolerant_enabled == FX_FALSE) ||
1071:Middlewares/ST/filex/common/src/fx_file_write.c ****                          ((replace_clusters == 0) && (first_new_cluster)))
1072:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1073:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status = _fx_utility_FAT_entry_write(media_ptr, file_ptr -> fx_file_last_physic
1074:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 31


1075:Middlewares/ST/filex/common/src/fx_file_write.c **** #else
1076:Middlewares/ST/filex/common/src/fx_file_write.c ****                 status = _fx_utility_FAT_entry_write(media_ptr, file_ptr -> fx_file_last_physical_c
1077:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1078:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1079:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Check for a bad FAT write status.  */
1080:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (status !=  FX_SUCCESS)
1081:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1082:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1083:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1084:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1085:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1086:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Release media protection.  */
1087:Middlewares/ST/filex/common/src/fx_file_write.c ****                     FX_UNPROTECT
1088:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1089:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Return the bad status.  */
1090:Middlewares/ST/filex/common/src/fx_file_write.c ****                     return(status);
1091:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1092:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1093:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1094:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1095:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1096:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1097:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_FAULT_TOLERANT
1098:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1099:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1100:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (media_ptr -> fx_media_FAT_type == FX_exFAT)
1101:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1102:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1103:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Flush exFAT bitmap.  */
1104:Middlewares/ST/filex/common/src/fx_file_write.c ****             _fx_utility_exFAT_bitmap_flush(media_ptr);
1105:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1106:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1107:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1108:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Ensure the new FAT chain is properly written to the media.  */
1109:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1110:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Flush the cached individual FAT entries */
1111:Middlewares/ST/filex/common/src/fx_file_write.c ****         _fx_utility_FAT_flush(media_ptr);
1112:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
1113:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1114:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1115:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (media_ptr -> fx_media_fault_tolerant_enabled)
1116:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1117:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1118:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Clear undo phase. */
1119:Middlewares/ST/filex/common/src/fx_file_write.c ****             media_ptr -> fx_media_fault_tolerant_state &= (UCHAR)(~FX_FAULT_TOLERANT_STATE_SET_FAT_
1120:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1121:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Update the last cluster? */
1122:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (insertion_back == media_ptr -> fx_media_fat_last)
1123:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1124:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1125:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Yes. Update the file control block with the last physical cluster.  */
1126:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_last_physical_cluster =  last_cluster;
1127:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1128:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1129:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
1130:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1131:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 32


1132:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1133:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Update the file control block with the last physical cluster.  */
1134:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_last_physical_cluster =  last_cluster;
 564              		.loc 1 1134 13 is_stmt 1 view .LVU218
 565              		.loc 1 1134 55 is_stmt 0 view .LVU219
 566 023e 089B     		ldr	r3, [sp, #32]
 567 0240 E361     		str	r3, [r4, #28]
 568              	.LVL57:
 569              	.L6:
1135:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1136:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1137:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1138:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Check for a need to increment to the next sector within a previously
1139:Middlewares/ST/filex/common/src/fx_file_write.c ****        allocated cluster.  */
1140:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_current_logical_offset >=
 570              		.loc 1 1140 5 is_stmt 1 view .LVU220
 571              		.loc 1 1140 18 is_stmt 0 view .LVU221
 572 0242 226B     		ldr	r2, [r4, #48]
1141:Middlewares/ST/filex/common/src/fx_file_write.c ****         media_ptr -> fx_media_bytes_per_sector)
 573              		.loc 1 1141 19 view .LVU222
 574 0244 AB6A     		ldr	r3, [r5, #40]
1140:Middlewares/ST/filex/common/src/fx_file_write.c ****         media_ptr -> fx_media_bytes_per_sector)
 575              		.loc 1 1140 8 view .LVU223
 576 0246 9A42     		cmp	r2, r3
 577 0248 0BD3     		bcc	.L26
1142:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1143:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1144:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Update the sector specific file parameters to start at the
1145:Middlewares/ST/filex/common/src/fx_file_write.c ****            next logical sector.  */
1146:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_logical_sector++;
 578              		.loc 1 1146 9 is_stmt 1 view .LVU224
 579              		.loc 1 1146 18 is_stmt 0 view .LVU225
 580 024a A36A     		ldr	r3, [r4, #40]
 581 024c E26A     		ldr	r2, [r4, #44]
 582              		.loc 1 1146 51 view .LVU226
 583 024e 0133     		adds	r3, r3, #1
 584 0250 42F10002 		adc	r2, r2, #0
 585 0254 A362     		str	r3, [r4, #40]
 586 0256 E262     		str	r2, [r4, #44]
1147:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_relative_sector++;
 587              		.loc 1 1147 9 is_stmt 1 view .LVU227
 588              		.loc 1 1147 18 is_stmt 0 view .LVU228
 589 0258 A36B     		ldr	r3, [r4, #56]
 590              		.loc 1 1147 52 view .LVU229
 591 025a 0133     		adds	r3, r3, #1
 592 025c A363     		str	r3, [r4, #56]
1148:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_logical_offset =  0;
 593              		.loc 1 1148 9 is_stmt 1 view .LVU230
 594              		.loc 1 1148 52 is_stmt 0 view .LVU231
 595 025e 0023     		movs	r3, #0
 596 0260 2363     		str	r3, [r4, #48]
 597              	.L26:
1149:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1150:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1151:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* At this point there is enough room to perform the file write operation.  */
1152:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1153:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Setup local buffer pointer.  */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 33


1154:Middlewares/ST/filex/common/src/fx_file_write.c ****     source_ptr =  (UCHAR *)buffer_ptr;
1155:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1156:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Setup the remaining number of bytes to write.  */
1157:Middlewares/ST/filex/common/src/fx_file_write.c ****     bytes_remaining =  size;
1158:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1159:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1160:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (replace_clusters > 0)
1161:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1162:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1163:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Force update current cluster and sector. */
1164:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_physical_cluster = first_new_cluster;
1165:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media_data_sector_s
1166:Middlewares/ST/filex/common/src/fx_file_write.c ****             (((ULONG64)(first_new_cluster - FX_FAT_ENTRY_START)) *
1167:Middlewares/ST/filex/common/src/fx_file_write.c ****              ((ULONG)media_ptr -> fx_media_sectors_per_cluster)) +
1168:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_relative_sector;
1169:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1170:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Copy sectors in replaced cluster but not overwritten at the front. */
1171:Middlewares/ST/filex/common/src/fx_file_write.c ****         for (i = 0; i < file_ptr -> fx_file_current_relative_sector; i++)
1172:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1173:Middlewares/ST/filex/common/src/fx_file_write.c ****             status =  _fx_utility_logical_sector_read(media_ptr,
1174:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       ((ULONG)media_ptr -> fx_media_data_sector_sta
1175:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       (((ULONG)(copy_head_cluster - FX_FAT_ENTRY_ST
1176:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        ((ULONG)media_ptr -> fx_media_sectors_per_cl
1177:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       media_ptr -> fx_media_memory_buffer, ((ULONG)
1178:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1179:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1180:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
1181:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1182:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1183:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1184:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1185:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1186:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1187:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1188:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1189:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1190:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1191:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1192:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Write back the current logical sector.  */
1193:Middlewares/ST/filex/common/src/fx_file_write.c ****             status =  _fx_utility_logical_sector_write(media_ptr,
1194:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        ((ULONG)media_ptr -> fx_media_data_sector_st
1195:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        (((ULONG)(file_ptr -> fx_file_current_physic
1196:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                         ((ULONG)media_ptr -> fx_media_sectors_per_c
1197:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        media_ptr -> fx_media_memory_buffer, ((ULONG
1198:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1199:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1200:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
1201:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1202:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1203:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1204:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1205:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1206:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1207:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1208:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1209:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1210:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 34


1211:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1212:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1213:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1214:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1215:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Loop to write all of the bytes.  */
1216:Middlewares/ST/filex/common/src/fx_file_write.c ****     while (bytes_remaining)
1217:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1218:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1219:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Determine if a beginning or ending partial write is required.  */
1220:Middlewares/ST/filex/common/src/fx_file_write.c ****         if ((file_ptr -> fx_file_current_logical_offset) ||
1221:Middlewares/ST/filex/common/src/fx_file_write.c ****             (bytes_remaining < media_ptr -> fx_media_bytes_per_sector))
1222:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1223:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1224:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* A partial sector write is required.  */
1225:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1226:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Read the current logical sector.  */
1227:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1228:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (replace_clusters > 0)
1229:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1230:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (file_ptr -> fx_file_current_physical_cluster == first_new_cluster)
1231:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1232:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1233:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* It's at beginning. */
1234:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status =  _fx_utility_logical_sector_read(media_ptr,
1235:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               ((ULONG)media_ptr -> fx_media_data_se
1236:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               (((ULONG)(copy_head_cluster - FX_FAT_
1237:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                ((ULONG)media_ptr -> fx_media_sector
1238:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               file_ptr -> fx_file_current_relative_
1239:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               media_ptr -> fx_media_memory_buffer, 
1240:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1241:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else if (data_append == FX_FALSE)
1242:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1243:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1244:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* It's at ending. */
1245:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status =  _fx_utility_logical_sector_read(media_ptr,
1246:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               ((ULONG)media_ptr -> fx_media_data_se
1247:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               (((ULONG)(copy_tail_cluster - FX_FAT_
1248:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                                ((ULONG)media_ptr -> fx_media_sector
1249:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               file_ptr -> fx_file_current_relative_
1250:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               media_ptr -> fx_media_memory_buffer, 
1251:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1252:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else
1253:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1254:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1255:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* It's at ending. */
1256:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status =  _fx_utility_logical_sector_read(media_ptr,
1257:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               file_ptr -> fx_file_current_logical_s
1258:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                               media_ptr -> fx_media_memory_buffer, 
1259:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1260:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1261:Middlewares/ST/filex/common/src/fx_file_write.c ****             else
1262:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1263:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1264:Middlewares/ST/filex/common/src/fx_file_write.c ****                 status =  _fx_utility_logical_sector_read(media_ptr,
1265:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                           file_ptr -> fx_file_current_logical_secto
1266:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                           media_ptr -> fx_media_memory_buffer, ((UL
1267:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 35


1268:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1269:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1270:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
1271:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1272:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1273:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1274:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1275:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1276:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1277:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1278:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1279:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1280:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1281:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1282:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1283:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Copy the appropriate number of bytes into the destination buffer.  */
1284:Middlewares/ST/filex/common/src/fx_file_write.c ****             copy_bytes =  media_ptr -> fx_media_bytes_per_sector -
1285:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset;
1286:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1287:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check to see if only a portion of the sector needs to be
1288:Middlewares/ST/filex/common/src/fx_file_write.c ****                copied.  */
1289:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (copy_bytes > bytes_remaining)
1290:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1291:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1292:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Adjust the number of bytes to copy.  */
1293:Middlewares/ST/filex/common/src/fx_file_write.c ****                 copy_bytes =  (ULONG)bytes_remaining;
1294:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1295:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1296:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Actually perform the memory copy.  */
1297:Middlewares/ST/filex/common/src/fx_file_write.c ****             _fx_utility_memory_copy(source_ptr, ((UCHAR *)media_ptr -> fx_media_memory_buffer) +  /
1298:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     file_ptr -> fx_file_current_logical_offset,
1299:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     copy_bytes);
1300:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1301:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Write back the current logical sector.  */
1302:Middlewares/ST/filex/common/src/fx_file_write.c ****             status =  _fx_utility_logical_sector_write(media_ptr, file_ptr -> fx_file_current_logic
1303:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        media_ptr -> fx_media_memory_buffer, ((ULONG
1304:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1305:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1306:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
1307:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1308:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1309:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1310:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1311:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1312:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1313:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1314:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1315:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1316:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1317:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1318:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1319:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1320:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Increment the logical sector byte offset.  */
1321:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_logical_offset =
1322:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset + copy_bytes;
1323:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1324:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Adjust the remaining bytes to read.  */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 36


1325:Middlewares/ST/filex/common/src/fx_file_write.c ****             bytes_remaining =  bytes_remaining - copy_bytes;
1326:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1327:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Adjust the pointer to the source buffer.  */
1328:Middlewares/ST/filex/common/src/fx_file_write.c ****             source_ptr =  source_ptr + copy_bytes;
1329:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1330:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
1331:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1332:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1333:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Attempt to write multiple sectors directly to the media.  */
1334:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1335:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Calculate the number of whole sectors to write.  */
1336:Middlewares/ST/filex/common/src/fx_file_write.c ****             sectors =  (UINT)(bytes_remaining / media_ptr -> fx_media_bytes_per_sector);
 598              		.loc 1 1336 21 view .LVU232
 599 0262 DA46     		mov	r10, fp
 600 0264 95E0     		b	.L27
 601              	.LVL58:
 602              	.L74:
1046:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 603              		.loc 1 1046 17 is_stmt 1 view .LVU233
 604 0266 0698     		ldr	r0, [sp, #24]
 605              	.LVL59:
1046:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 606              		.loc 1 1046 17 is_stmt 0 view .LVU234
 607 0268 FFF7FEFF 		bl	_tx_mutex_put
 608              	.LVL60:
1049:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 609              		.loc 1 1049 17 is_stmt 1 view .LVU235
1049:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 610              		.loc 1 1049 23 is_stmt 0 view .LVU236
 611 026c 84E1     		b	.L1
 612              	.LVL61:
 613              	.L75:
1076:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 614              		.loc 1 1076 17 is_stmt 1 view .LVU237
1076:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 615              		.loc 1 1076 26 is_stmt 0 view .LVU238
 616 026e 099A     		ldr	r2, [sp, #36]
 617 0270 2846     		mov	r0, r5
 618              	.LVL62:
1076:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
 619              		.loc 1 1076 26 view .LVU239
 620 0272 FFF7FEFF 		bl	_fx_utility_FAT_entry_write
 621              	.LVL63:
1080:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 622              		.loc 1 1080 17 is_stmt 1 view .LVU240
1080:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 623              		.loc 1 1080 20 is_stmt 0 view .LVU241
 624 0276 0746     		mov	r7, r0
 625 0278 0028     		cmp	r0, #0
 626 027a E0D0     		beq	.L25
1087:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 627              		.loc 1 1087 21 is_stmt 1 view .LVU242
 628 027c 0698     		ldr	r0, [sp, #24]
 629              	.LVL64:
1087:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 630              		.loc 1 1087 21 is_stmt 0 view .LVU243
 631 027e FFF7FEFF 		bl	_tx_mutex_put
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 37


 632              	.LVL65:
1090:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 633              		.loc 1 1090 21 is_stmt 1 view .LVU244
1090:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 634              		.loc 1 1090 27 is_stmt 0 view .LVU245
 635 0282 79E1     		b	.L1
 636              	.LVL66:
 637              	.L78:
1277:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 638              		.loc 1 1277 17 view .LVU246
 639 0284 0746     		mov	r7, r0
1277:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 640              		.loc 1 1277 17 is_stmt 1 view .LVU247
 641 0286 0698     		ldr	r0, [sp, #24]
 642              	.LVL67:
1277:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 643              		.loc 1 1277 17 is_stmt 0 view .LVU248
 644 0288 FFF7FEFF 		bl	_tx_mutex_put
 645              	.LVL68:
1280:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 646              		.loc 1 1280 17 is_stmt 1 view .LVU249
1280:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 647              		.loc 1 1280 23 is_stmt 0 view .LVU250
 648 028c 74E1     		b	.L1
 649              	.LVL69:
 650              	.L79:
1313:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 651              		.loc 1 1313 17 view .LVU251
 652 028e 0746     		mov	r7, r0
1313:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 653              		.loc 1 1313 17 is_stmt 1 view .LVU252
 654 0290 0698     		ldr	r0, [sp, #24]
 655              	.LVL70:
1313:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 656              		.loc 1 1313 17 is_stmt 0 view .LVU253
 657 0292 FFF7FEFF 		bl	_tx_mutex_put
 658              	.LVL71:
1316:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 659              		.loc 1 1316 17 is_stmt 1 view .LVU254
1316:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 660              		.loc 1 1316 23 is_stmt 0 view .LVU255
 661 0296 6FE1     		b	.L1
 662              	.L81:
 663              		.align	2
 664              	.L80:
 665 0298 454C4946 		.word	1179208773
 666 029c 4944454D 		.word	1296385097
 667              	.LVL72:
 668              	.L29:
 669              		.loc 1 1336 13 is_stmt 1 view .LVU256
 670              		.loc 1 1336 47 is_stmt 0 view .LVU257
 671 02a0 0023     		movs	r3, #0
 672 02a2 3046     		mov	r0, r6
 673 02a4 5146     		mov	r1, r10
 674 02a6 FFF7FEFF 		bl	__aeabi_uldivmod
 675              	.LVL73:
 676 02aa 0890     		str	r0, [sp, #32]
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 38


 677              		.loc 1 1336 21 view .LVU258
 678 02ac 8146     		mov	r9, r0
 679              	.LVL74:
1337:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1338:Middlewares/ST/filex/common/src/fx_file_write.c ****             next_cluster = cluster = file_ptr -> fx_file_current_physical_cluster;
 680              		.loc 1 1338 13 is_stmt 1 view .LVU259
 681              		.loc 1 1338 36 is_stmt 0 view .LVU260
 682 02ae 276A     		ldr	r7, [r4, #32]
 683              	.LVL75:
 684              		.loc 1 1338 26 view .LVU261
 685 02b0 0B97     		str	r7, [sp, #44]
1339:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1340:Middlewares/ST/filex/common/src/fx_file_write.c ****             for (i = (media_ptr -> fx_media_sectors_per_cluster -
 686              		.loc 1 1340 13 is_stmt 1 view .LVU262
 687              		.loc 1 1340 33 is_stmt 0 view .LVU263
 688 02b2 6A6D     		ldr	r2, [r5, #84]
1341:Middlewares/ST/filex/common/src/fx_file_write.c ****                       file_ptr -> fx_file_current_relative_sector); i < sectors; i += media_ptr -> 
 689              		.loc 1 1341 32 view .LVU264
 690 02b4 A36B     		ldr	r3, [r4, #56]
1340:Middlewares/ST/filex/common/src/fx_file_write.c ****                       file_ptr -> fx_file_current_relative_sector); i < sectors; i += media_ptr -> 
 691              		.loc 1 1340 20 view .LVU265
 692 02b6 A2EB0308 		sub	r8, r2, r3
 693              	.LVL76:
 694              	.L34:
 695              		.loc 1 1341 69 is_stmt 1 discriminator 1 view .LVU266
1340:Middlewares/ST/filex/common/src/fx_file_write.c ****                       file_ptr -> fx_file_current_relative_sector); i < sectors; i += media_ptr -> 
 696              		.loc 1 1340 13 is_stmt 0 discriminator 1 view .LVU267
 697 02ba C845     		cmp	r8, r9
 698 02bc 1FD2     		bcs	.L37
1342:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1343:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1344:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1)
1345:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1346:Middlewares/ST/filex/common/src/fx_file_write.c ****                     cluster++;
1347:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1348:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else
1349:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1350:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1351:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status =  _fx_utility_FAT_entry_read(media_ptr, cluster, &next_cluster);
 699              		.loc 1 1351 21 is_stmt 1 view .LVU268
 700              		.loc 1 1351 31 is_stmt 0 view .LVU269
 701 02be 0BAA     		add	r2, sp, #44
 702 02c0 3946     		mov	r1, r7
 703 02c2 2846     		mov	r0, r5
 704 02c4 FFF7FEFF 		bl	_fx_utility_FAT_entry_read
 705              	.LVL77:
1352:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1353:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Determine if an error is present.  */
1354:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if ((status != FX_SUCCESS) || (next_cluster < FX_FAT_ENTRY_START) ||
 706              		.loc 1 1354 21 is_stmt 1 view .LVU270
 707              		.loc 1 1354 24 is_stmt 0 view .LVU271
 708 02c8 0246     		mov	r2, r0
 709 02ca 78B9     		cbnz	r0, .L35
 710              		.loc 1 1354 65 discriminator 1 view .LVU272
 711 02cc 0B9B     		ldr	r3, [sp, #44]
 712              		.loc 1 1354 48 discriminator 1 view .LVU273
 713 02ce 012B     		cmp	r3, #1
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 39


 714 02d0 0CD9     		bls	.L35
1355:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 715              		.loc 1 1355 51 discriminator 2 view .LVU274
 716 02d2 05F50051 		add	r1, r5, #8192
 717 02d6 D1F8A814 		ldr	r1, [r1, #1192]
1354:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 718              		.loc 1 1354 87 discriminator 2 view .LVU275
 719 02da 8B42     		cmp	r3, r1
 720 02dc 06D8     		bhi	.L35
1356:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
1357:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1358:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1359:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1360:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1361:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Release media protection.  */
1362:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_UNPROTECT
1363:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1364:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Send error message back to caller.  */
1365:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (status != FX_SUCCESS)
1366:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
1367:Middlewares/ST/filex/common/src/fx_file_write.c ****                             return(status);
1368:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
1369:Middlewares/ST/filex/common/src/fx_file_write.c ****                         else
1370:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
1371:Middlewares/ST/filex/common/src/fx_file_write.c ****                             return(FX_FILE_CORRUPT);
1372:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
1373:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
1374:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1375:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if (next_cluster != cluster + 1)
 721              		.loc 1 1375 21 is_stmt 1 view .LVU276
 722              		.loc 1 1375 49 is_stmt 0 view .LVU277
 723 02de 7A1C     		adds	r2, r7, #1
 724              		.loc 1 1375 24 view .LVU278
 725 02e0 9342     		cmp	r3, r2
 726 02e2 0CD1     		bne	.L37
1376:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
1377:Middlewares/ST/filex/common/src/fx_file_write.c ****                         break;
1378:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
1379:Middlewares/ST/filex/common/src/fx_file_write.c ****                     else
1380:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
1381:Middlewares/ST/filex/common/src/fx_file_write.c ****                         cluster = next_cluster;
 727              		.loc 1 1381 25 is_stmt 1 discriminator 1 view .LVU279
 728              	.LVL78:
1341:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 729              		.loc 1 1341 82 discriminator 1 view .LVU280
1341:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 730              		.loc 1 1341 97 is_stmt 0 discriminator 1 view .LVU281
 731 02e4 6A6D     		ldr	r2, [r5, #84]
1341:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 732              		.loc 1 1341 84 discriminator 1 view .LVU282
 733 02e6 9044     		add	r8, r8, r2
 734              	.LVL79:
 735              		.loc 1 1381 33 discriminator 1 view .LVU283
 736 02e8 1F46     		mov	r7, r3
 737 02ea E6E7     		b	.L34
 738              	.LVL80:
 739              	.L35:
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 40


1362:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 740              		.loc 1 1362 25 view .LVU284
 741 02ec 1746     		mov	r7, r2
 742              	.LVL81:
1362:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 743              		.loc 1 1362 25 is_stmt 1 view .LVU285
 744 02ee 0698     		ldr	r0, [sp, #24]
 745              	.LVL82:
1362:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 746              		.loc 1 1362 25 is_stmt 0 view .LVU286
 747 02f0 FFF7FEFF 		bl	_tx_mutex_put
 748              	.LVL83:
1365:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 749              		.loc 1 1365 25 is_stmt 1 view .LVU287
1365:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 750              		.loc 1 1365 28 is_stmt 0 view .LVU288
 751 02f4 002F     		cmp	r7, #0
 752 02f6 40F03F81 		bne	.L1
1371:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 753              		.loc 1 1371 35 view .LVU289
 754 02fa 0827     		movs	r7, #8
 755              	.LVL84:
1371:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 756              		.loc 1 1371 35 view .LVU290
 757 02fc 3CE1     		b	.L1
 758              	.LVL85:
 759              	.L37:
1382:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
1383:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1384:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1385:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1386:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1387:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1388:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (i < sectors)
 760              		.loc 1 1388 13 is_stmt 1 view .LVU291
 761              		.loc 1 1388 16 is_stmt 0 view .LVU292
 762 02fe 089B     		ldr	r3, [sp, #32]
 763 0300 9845     		cmp	r8, r3
 764 0302 00D3     		bcc	.L39
1336:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 765              		.loc 1 1336 21 view .LVU293
 766 0304 9846     		mov	r8, r3
 767              	.LVL86:
 768              	.L39:
1389:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1390:Middlewares/ST/filex/common/src/fx_file_write.c ****                 sectors = i;
1391:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1392:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1393:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Perform the data write directly from the user's buffer of
1394:Middlewares/ST/filex/common/src/fx_file_write.c ****                the appropriate number of sectors.  */
1395:Middlewares/ST/filex/common/src/fx_file_write.c ****             status =  _fx_utility_logical_sector_write(media_ptr, file_ptr -> fx_file_current_logic
 769              		.loc 1 1395 13 is_stmt 1 view .LVU294
 770              		.loc 1 1395 23 is_stmt 0 view .LVU295
 771 0306 0423     		movs	r3, #4
 772 0308 0293     		str	r3, [sp, #8]
 773 030a CDF80480 		str	r8, [sp, #4]
 774 030e 049B     		ldr	r3, [sp, #16]
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 41


 775 0310 0093     		str	r3, [sp]
 776 0312 D4E90A23 		ldrd	r2, [r4, #40]
 777 0316 2846     		mov	r0, r5
 778 0318 FFF7FEFF 		bl	_fx_utility_logical_sector_write
 779              	.LVL87:
1396:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        source_ptr, (ULONG) sectors, FX_DATA_SECTOR)
1397:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1398:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1399:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
 780              		.loc 1 1399 13 is_stmt 1 view .LVU296
 781              		.loc 1 1399 16 is_stmt 0 view .LVU297
 782 031c 28BB     		cbnz	r0, .L76
1400:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1401:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1402:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1403:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1404:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1405:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1406:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1407:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1408:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1409:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1410:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1411:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1412:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Now adjust the various file pointers.  */
1413:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1414:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Increment the current logical sector.  Subtract one from
1415:Middlewares/ST/filex/common/src/fx_file_write.c ****                the sector count because we are going to use the logical
1416:Middlewares/ST/filex/common/src/fx_file_write.c ****                offset to do additional sector/cluster arithmetic below.  */
1417:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_logical_sector =
 783              		.loc 1 1417 13 is_stmt 1 view .LVU298
1418:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector +
 784              		.loc 1 1418 26 is_stmt 0 view .LVU299
 785 031e A36A     		ldr	r3, [r4, #40]
 786 0320 E26A     		ldr	r2, [r4, #44]
1419:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (sectors - 1);
 787              		.loc 1 1419 26 view .LVU300
 788 0322 08F1FF31 		add	r1, r8, #-1
1418:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector +
 789              		.loc 1 1418 60 view .LVU301
 790 0326 5B18     		adds	r3, r3, r1
 791 0328 42F10002 		adc	r2, r2, #0
1417:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector +
 792              		.loc 1 1417 56 view .LVU302
 793 032c A362     		str	r3, [r4, #40]
 794 032e E262     		str	r2, [r4, #44]
1420:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1421:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Move the relative cluster and sector as well.  */
1422:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_relative_cluster = file_ptr -> fx_file_current_relative_clu
 795              		.loc 1 1422 13 is_stmt 1 view .LVU303
 796              		.loc 1 1422 69 is_stmt 0 view .LVU304
 797 0330 626B     		ldr	r2, [r4, #52]
1423:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) /
 798              		.loc 1 1423 27 view .LVU305
 799 0332 A36B     		ldr	r3, [r4, #56]
 800              		.loc 1 1423 62 view .LVU306
 801 0334 4344     		add	r3, r3, r8
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 42


 802 0336 013B     		subs	r3, r3, #1
1424:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_sectors_per_cluster;
 803              		.loc 1 1424 27 view .LVU307
 804 0338 696D     		ldr	r1, [r5, #84]
1423:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) /
 805              		.loc 1 1423 79 view .LVU308
 806 033a B3FBF1F1 		udiv	r1, r3, r1
1422:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) /
 807              		.loc 1 1422 105 view .LVU309
 808 033e 0A44     		add	r2, r2, r1
1422:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) /
 809              		.loc 1 1422 58 view .LVU310
 810 0340 6263     		str	r2, [r4, #52]
1425:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1426:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_relative_sector =
 811              		.loc 1 1426 13 is_stmt 1 view .LVU311
1427:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) %
1428:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_sectors_per_cluster;
 812              		.loc 1 1428 27 is_stmt 0 view .LVU312
 813 0342 6A6D     		ldr	r2, [r5, #84]
1427:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) %
 814              		.loc 1 1427 79 view .LVU313
 815 0344 B3FBF2F1 		udiv	r1, r3, r2
 816 0348 02FB1133 		mls	r3, r2, r1, r3
1426:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (file_ptr -> fx_file_current_relative_sector + (sectors - 1)) %
 817              		.loc 1 1426 57 view .LVU314
 818 034c A363     		str	r3, [r4, #56]
1429:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1430:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Increment the logical sector byte offset.  */
1431:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_logical_offset =
 819              		.loc 1 1431 13 is_stmt 1 view .LVU315
1432:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_bytes_per_sector;
 820              		.loc 1 1432 27 is_stmt 0 view .LVU316
 821 034e AB6A     		ldr	r3, [r5, #40]
1431:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_bytes_per_sector;
 822              		.loc 1 1431 56 view .LVU317
 823 0350 2363     		str	r3, [r4, #48]
1433:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1434:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_physical_cluster = cluster;
 824              		.loc 1 1434 13 is_stmt 1 view .LVU318
 825              		.loc 1 1434 58 is_stmt 0 view .LVU319
 826 0352 2762     		str	r7, [r4, #32]
1435:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1436:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Adjust the remaining bytes.  */
1437:Middlewares/ST/filex/common/src/fx_file_write.c ****             bytes_remaining =  bytes_remaining -
 827              		.loc 1 1437 13 is_stmt 1 view .LVU320
1438:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (((ULONG)media_ptr -> fx_media_bytes_per_sector) * sectors);
 828              		.loc 1 1438 36 is_stmt 0 view .LVU321
 829 0354 AB6A     		ldr	r3, [r5, #40]
 830              		.loc 1 1438 66 view .LVU322
 831 0356 08FB03F8 		mul	r8, r8, r3
 832              	.LVL88:
1437:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (((ULONG)media_ptr -> fx_media_bytes_per_sector) * sectors);
 833              		.loc 1 1437 29 view .LVU323
 834 035a B6EB0806 		subs	r6, r6, r8
 835              	.LVL89:
1437:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (((ULONG)media_ptr -> fx_media_bytes_per_sector) * sectors);
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 43


 836              		.loc 1 1437 29 view .LVU324
 837 035e 6AF1000A 		sbc	r10, r10, #0
 838              	.LVL90:
1439:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1440:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Adjust the pointer to the source buffer.  */
1441:Middlewares/ST/filex/common/src/fx_file_write.c ****             source_ptr =  source_ptr +
 839              		.loc 1 1441 13 is_stmt 1 view .LVU325
 840              		.loc 1 1441 24 is_stmt 0 view .LVU326
 841 0362 049B     		ldr	r3, [sp, #16]
 842 0364 4344     		add	r3, r3, r8
 843 0366 0493     		str	r3, [sp, #16]
 844              	.LVL91:
 845              		.loc 1 1441 24 view .LVU327
 846 0368 53E0     		b	.L33
 847              	.LVL92:
 848              	.L76:
1406:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 849              		.loc 1 1406 17 view .LVU328
 850 036a 0746     		mov	r7, r0
 851              	.LVL93:
1406:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 852              		.loc 1 1406 17 is_stmt 1 view .LVU329
 853 036c 0698     		ldr	r0, [sp, #24]
 854              	.LVL94:
1406:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 855              		.loc 1 1406 17 is_stmt 0 view .LVU330
 856 036e FFF7FEFF 		bl	_tx_mutex_put
 857              	.LVL95:
1409:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 858              		.loc 1 1409 17 is_stmt 1 view .LVU331
1409:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 859              		.loc 1 1409 23 is_stmt 0 view .LVU332
 860 0372 01E1     		b	.L1
 861              	.LVL96:
 862              	.L42:
1442:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (((ULONG)media_ptr -> fx_media_bytes_per_sector) * sectors);
1443:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1444:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1445:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* At this point, we have either written a partial sector or have successfully
1446:Middlewares/ST/filex/common/src/fx_file_write.c ****            written one or more whole sectors.  Determine if we are at the end of
1447:Middlewares/ST/filex/common/src/fx_file_write.c ****            the current logical sector.  */
1448:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (file_ptr -> fx_file_current_logical_offset >=
1449:Middlewares/ST/filex/common/src/fx_file_write.c ****             media_ptr -> fx_media_bytes_per_sector)
1450:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1451:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1452:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Determine if we are at the exact physical end of the file.  */
1453:Middlewares/ST/filex/common/src/fx_file_write.c ****             if ((bytes_remaining == 0) &&
1454:Middlewares/ST/filex/common/src/fx_file_write.c ****                 ((file_ptr -> fx_file_current_file_offset + size) >=
1455:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_current_available_size))
1456:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1457:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1458:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Skip the following file parameter adjustments.  The next write will
1459:Middlewares/ST/filex/common/src/fx_file_write.c ****                    detect the logical offset out of the range of the sector and reset
1460:Middlewares/ST/filex/common/src/fx_file_write.c ****                    all of the pertinent information.  */
1461:Middlewares/ST/filex/common/src/fx_file_write.c ****                 break;
1462:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1463:Middlewares/ST/filex/common/src/fx_file_write.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 44


1464:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* We need to move to the next logical sector, but first
1465:Middlewares/ST/filex/common/src/fx_file_write.c ****                determine if the next logical sector is within the same
1466:Middlewares/ST/filex/common/src/fx_file_write.c ****                cluster.  */
1467:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1468:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Increment the current relative sector in the cluster.  */
1469:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_relative_sector++;
 863              		.loc 1 1469 13 is_stmt 1 view .LVU333
 864              		.loc 1 1469 22 is_stmt 0 view .LVU334
 865 0374 A36B     		ldr	r3, [r4, #56]
 866              		.loc 1 1469 56 view .LVU335
 867 0376 0133     		adds	r3, r3, #1
 868 0378 A363     		str	r3, [r4, #56]
1470:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1471:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Determine if this is in a new cluster.  */
1472:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (file_ptr -> fx_file_current_relative_sector >=
 869              		.loc 1 1472 13 is_stmt 1 view .LVU336
1473:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_sectors_per_cluster)
 870              		.loc 1 1473 27 is_stmt 0 view .LVU337
 871 037a 6A6D     		ldr	r2, [r5, #84]
1472:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr -> fx_media_sectors_per_cluster)
 872              		.loc 1 1472 16 view .LVU338
 873 037c 9342     		cmp	r3, r2
 874 037e 74D2     		bcs	.L77
1474:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1475:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1476:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Yes, we need to move to the next cluster.  */
1477:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1478:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (file_ptr -> fx_file_dir_entry.fx_dir_entry_dont_use_fat & 1)
1479:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1480:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1481:Middlewares/ST/filex/common/src/fx_file_write.c ****                     next_cluster = file_ptr -> fx_file_current_physical_cluster + 1;
1482:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1483:Middlewares/ST/filex/common/src/fx_file_write.c ****                 else
1484:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1485:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1486:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1487:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Read the FAT entry of the current cluster to find
1488:Middlewares/ST/filex/common/src/fx_file_write.c ****                        the next cluster.  */
1489:Middlewares/ST/filex/common/src/fx_file_write.c ****                     status =  _fx_utility_FAT_entry_read(media_ptr,
1490:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                          file_ptr -> fx_file_current_physical_clust
1491:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1492:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Determine if an error is present.  */
1493:Middlewares/ST/filex/common/src/fx_file_write.c ****                     if ((status != FX_SUCCESS) || (next_cluster < FX_FAT_ENTRY_START) ||
1494:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
1495:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
1496:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1497:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1498:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1499:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1500:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Release media protection.  */
1501:Middlewares/ST/filex/common/src/fx_file_write.c ****                         FX_UNPROTECT
1502:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1503:Middlewares/ST/filex/common/src/fx_file_write.c ****                         /* Send error message back to caller.  */
1504:Middlewares/ST/filex/common/src/fx_file_write.c ****                         if (status != FX_SUCCESS)
1505:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
1506:Middlewares/ST/filex/common/src/fx_file_write.c ****                             return(status);
1507:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 45


1508:Middlewares/ST/filex/common/src/fx_file_write.c ****                         else
1509:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
1510:Middlewares/ST/filex/common/src/fx_file_write.c ****                             return(FX_FILE_CORRUPT);
1511:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
1512:Middlewares/ST/filex/common/src/fx_file_write.c ****                     }
1513:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1514:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1515:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1516:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1517:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Otherwise, we have a new cluster.  Save it in the file
1518:Middlewares/ST/filex/common/src/fx_file_write.c ****                    control block and calculate a new logical sector value.  */
1519:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_physical_cluster =  next_cluster;
1520:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_relative_cluster++;
1521:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector = ((ULONG)media_ptr -> fx_media_data_sec
1522:Middlewares/ST/filex/common/src/fx_file_write.c ****                     ((((ULONG64)next_cluster) - FX_FAT_ENTRY_START) *
1523:Middlewares/ST/filex/common/src/fx_file_write.c ****                      ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
1524:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_relative_sector =  0;
1525:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1526:Middlewares/ST/filex/common/src/fx_file_write.c ****             else
1527:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1528:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1529:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Still within the same cluster so just increment the
1530:Middlewares/ST/filex/common/src/fx_file_write.c ****                    logical sector.  */
1531:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector++;
 875              		.loc 1 1531 17 is_stmt 1 view .LVU339
 876              		.loc 1 1531 26 is_stmt 0 view .LVU340
 877 0380 A36A     		ldr	r3, [r4, #40]
 878 0382 E26A     		ldr	r2, [r4, #44]
 879              		.loc 1 1531 59 view .LVU341
 880 0384 0133     		adds	r3, r3, #1
 881 0386 42F10002 		adc	r2, r2, #0
 882 038a A362     		str	r3, [r4, #40]
 883 038c E262     		str	r2, [r4, #44]
 884              	.L47:
1532:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1533:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1534:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* In either case, we are now positioned at a new sector so
1535:Middlewares/ST/filex/common/src/fx_file_write.c ****                clear the logical sector offset.  */
1536:Middlewares/ST/filex/common/src/fx_file_write.c ****             file_ptr -> fx_file_current_logical_offset =  0;
 885              		.loc 1 1536 13 is_stmt 1 view .LVU342
 886              		.loc 1 1536 56 is_stmt 0 view .LVU343
 887 038e 0023     		movs	r3, #0
 888 0390 2363     		str	r3, [r4, #48]
 889              	.LVL97:
 890              	.L27:
1216:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
 891              		.loc 1 1216 11 is_stmt 1 view .LVU344
 892 0392 56EA0A03 		orrs	r3, r6, r10
 893 0396 4FD0     		beq	.L43
1220:Middlewares/ST/filex/common/src/fx_file_write.c ****             (bytes_remaining < media_ptr -> fx_media_bytes_per_sector))
 894              		.loc 1 1220 9 view .LVU345
1220:Middlewares/ST/filex/common/src/fx_file_write.c ****             (bytes_remaining < media_ptr -> fx_media_bytes_per_sector))
 895              		.loc 1 1220 23 is_stmt 0 view .LVU346
 896 0398 236B     		ldr	r3, [r4, #48]
1220:Middlewares/ST/filex/common/src/fx_file_write.c ****             (bytes_remaining < media_ptr -> fx_media_bytes_per_sector))
 897              		.loc 1 1220 12 view .LVU347
 898 039a 2BB9     		cbnz	r3, .L28
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 46


1221:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 899              		.loc 1 1221 42 discriminator 1 view .LVU348
 900 039c AA6A     		ldr	r2, [r5, #40]
1220:Middlewares/ST/filex/common/src/fx_file_write.c ****             (bytes_remaining < media_ptr -> fx_media_bytes_per_sector))
 901              		.loc 1 1220 58 discriminator 1 view .LVU349
 902 039e 9642     		cmp	r6, r2
 903 03a0 7AF10003 		sbcs	r3, r10, #0
 904 03a4 BFF47CAF 		bcs	.L29
 905              	.L28:
1264:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                           file_ptr -> fx_file_current_logical_secto
 906              		.loc 1 1264 17 is_stmt 1 view .LVU350
1266:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 907              		.loc 1 1266 69 is_stmt 0 view .LVU351
 908 03a8 AB68     		ldr	r3, [r5, #8]
1264:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                           file_ptr -> fx_file_current_logical_secto
 909              		.loc 1 1264 27 view .LVU352
 910 03aa 0422     		movs	r2, #4
 911 03ac 0292     		str	r2, [sp, #8]
 912 03ae 0122     		movs	r2, #1
 913 03b0 0192     		str	r2, [sp, #4]
 914 03b2 0093     		str	r3, [sp]
 915 03b4 D4E90A23 		ldrd	r2, [r4, #40]
 916 03b8 2846     		mov	r0, r5
 917 03ba FFF7FEFF 		bl	_fx_utility_logical_sector_read
 918              	.LVL98:
1270:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 919              		.loc 1 1270 13 is_stmt 1 view .LVU353
1270:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 920              		.loc 1 1270 16 is_stmt 0 view .LVU354
 921 03be 0028     		cmp	r0, #0
 922 03c0 7FF460AF 		bne	.L78
1284:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset;
 923              		.loc 1 1284 13 is_stmt 1 view .LVU355
1284:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset;
 924              		.loc 1 1284 37 is_stmt 0 view .LVU356
 925 03c4 AA6A     		ldr	r2, [r5, #40]
1285:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 926              		.loc 1 1285 26 view .LVU357
 927 03c6 236B     		ldr	r3, [r4, #48]
1284:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset;
 928              		.loc 1 1284 24 view .LVU358
 929 03c8 A2EB0308 		sub	r8, r2, r3
 930              	.LVL99:
1289:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 931              		.loc 1 1289 13 is_stmt 1 view .LVU359
1289:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 932              		.loc 1 1289 16 is_stmt 0 view .LVU360
 933 03cc 4645     		cmp	r6, r8
 934 03ce 7AF10002 		sbcs	r2, r10, #0
 935 03d2 00D2     		bcs	.L31
1293:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 936              		.loc 1 1293 17 is_stmt 1 view .LVU361
1293:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 937              		.loc 1 1293 28 is_stmt 0 view .LVU362
 938 03d4 B046     		mov	r8, r6
 939              	.LVL100:
 940              	.L31:
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 47


1297:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     file_ptr -> fx_file_current_logical_offset,
 941              		.loc 1 1297 13 is_stmt 1 view .LVU363
1297:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     file_ptr -> fx_file_current_logical_offset,
 942              		.loc 1 1297 69 is_stmt 0 view .LVU364
 943 03d6 A968     		ldr	r1, [r5, #8]
1297:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     file_ptr -> fx_file_current_logical_offset,
 944              		.loc 1 1297 13 view .LVU365
 945 03d8 4246     		mov	r2, r8
 946 03da 1944     		add	r1, r1, r3
 947 03dc 0498     		ldr	r0, [sp, #16]
 948              	.LVL101:
1297:Middlewares/ST/filex/common/src/fx_file_write.c ****                                     file_ptr -> fx_file_current_logical_offset,
 949              		.loc 1 1297 13 view .LVU366
 950 03de FFF7FEFF 		bl	_fx_utility_memory_copy
 951              	.LVL102:
1302:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        media_ptr -> fx_media_memory_buffer, ((ULONG
 952              		.loc 1 1302 13 is_stmt 1 view .LVU367
1303:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 953              		.loc 1 1303 66 is_stmt 0 view .LVU368
 954 03e2 AB68     		ldr	r3, [r5, #8]
1302:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        media_ptr -> fx_media_memory_buffer, ((ULONG
 955              		.loc 1 1302 23 view .LVU369
 956 03e4 0422     		movs	r2, #4
 957 03e6 0292     		str	r2, [sp, #8]
 958 03e8 0122     		movs	r2, #1
 959 03ea 0192     		str	r2, [sp, #4]
 960 03ec 0093     		str	r3, [sp]
 961 03ee D4E90A23 		ldrd	r2, [r4, #40]
 962 03f2 2846     		mov	r0, r5
 963 03f4 FFF7FEFF 		bl	_fx_utility_logical_sector_write
 964              	.LVL103:
1306:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 965              		.loc 1 1306 13 is_stmt 1 view .LVU370
1306:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 966              		.loc 1 1306 16 is_stmt 0 view .LVU371
 967 03f8 0028     		cmp	r0, #0
 968 03fa 7FF448AF 		bne	.L79
1321:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset + copy_bytes;
 969              		.loc 1 1321 13 is_stmt 1 view .LVU372
1322:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 970              		.loc 1 1322 26 is_stmt 0 view .LVU373
 971 03fe 236B     		ldr	r3, [r4, #48]
1322:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 972              		.loc 1 1322 60 view .LVU374
 973 0400 4344     		add	r3, r3, r8
1321:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_offset + copy_bytes;
 974              		.loc 1 1321 56 view .LVU375
 975 0402 2363     		str	r3, [r4, #48]
1325:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 976              		.loc 1 1325 13 is_stmt 1 view .LVU376
1325:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 977              		.loc 1 1325 29 is_stmt 0 view .LVU377
 978 0404 B6EB0806 		subs	r6, r6, r8
 979              	.LVL104:
1325:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 980              		.loc 1 1325 29 view .LVU378
 981 0408 6AF1000A 		sbc	r10, r10, #0
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 48


 982              	.LVL105:
1328:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 983              		.loc 1 1328 13 is_stmt 1 view .LVU379
1328:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
 984              		.loc 1 1328 24 is_stmt 0 view .LVU380
 985 040c 049B     		ldr	r3, [sp, #16]
 986 040e 4344     		add	r3, r3, r8
 987 0410 0493     		str	r3, [sp, #16]
 988              	.LVL106:
 989              	.L33:
1448:Middlewares/ST/filex/common/src/fx_file_write.c ****             media_ptr -> fx_media_bytes_per_sector)
 990              		.loc 1 1448 9 is_stmt 1 view .LVU381
1448:Middlewares/ST/filex/common/src/fx_file_write.c ****             media_ptr -> fx_media_bytes_per_sector)
 991              		.loc 1 1448 22 is_stmt 0 view .LVU382
 992 0412 226B     		ldr	r2, [r4, #48]
1449:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 993              		.loc 1 1449 23 view .LVU383
 994 0414 AB6A     		ldr	r3, [r5, #40]
1448:Middlewares/ST/filex/common/src/fx_file_write.c ****             media_ptr -> fx_media_bytes_per_sector)
 995              		.loc 1 1448 12 view .LVU384
 996 0416 9A42     		cmp	r2, r3
 997 0418 BBD3     		bcc	.L27
1453:Middlewares/ST/filex/common/src/fx_file_write.c ****                 ((file_ptr -> fx_file_current_file_offset + size) >=
 998              		.loc 1 1453 13 is_stmt 1 view .LVU385
1453:Middlewares/ST/filex/common/src/fx_file_write.c ****                 ((file_ptr -> fx_file_current_file_offset + size) >=
 999              		.loc 1 1453 16 is_stmt 0 view .LVU386
 1000 041a 56EA0A03 		orrs	r3, r6, r10
 1001 041e A9D1     		bne	.L42
1454:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_current_available_size))
 1002              		.loc 1 1454 28 discriminator 1 view .LVU387
 1003 0420 236C     		ldr	r3, [r4, #64]
 1004 0422 626C     		ldr	r2, [r4, #68]
1454:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_current_available_size))
 1005              		.loc 1 1454 59 discriminator 1 view .LVU388
 1006 0424 0599     		ldr	r1, [sp, #20]
 1007 0426 CB18     		adds	r3, r1, r3
 1008 0428 4BEB0202 		adc	r2, fp, r2
1455:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 1009              		.loc 1 1455 27 discriminator 1 view .LVU389
 1010 042c 206D     		ldr	r0, [r4, #80]
 1011              	.LVL107:
1455:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 1012              		.loc 1 1455 27 discriminator 1 view .LVU390
 1013 042e 616D     		ldr	r1, [r4, #84]
1453:Middlewares/ST/filex/common/src/fx_file_write.c ****                 ((file_ptr -> fx_file_current_file_offset + size) >=
 1014              		.loc 1 1453 40 discriminator 1 view .LVU391
 1015 0430 8342     		cmp	r3, r0
 1016 0432 72EB0103 		sbcs	r3, r2, r1
 1017 0436 9DD3     		bcc	.L42
 1018              	.LVL108:
 1019              	.L43:
1537:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1538:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1539:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1540:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1541:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (((replace_clusters > 0) && (data_append == FX_FALSE)) &&
1542:Middlewares/ST/filex/common/src/fx_file_write.c ****         (file_ptr -> fx_file_current_logical_offset || file_ptr -> fx_file_current_relative_sector)
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 49


1543:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1544:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1545:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Copy sectors in replaced cluster but not overwritten at the end. */
1546:Middlewares/ST/filex/common/src/fx_file_write.c ****         if (file_ptr -> fx_file_current_logical_offset == 0)
1547:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1548:Middlewares/ST/filex/common/src/fx_file_write.c ****             i = file_ptr -> fx_file_current_relative_sector;
1549:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1550:Middlewares/ST/filex/common/src/fx_file_write.c ****         else
1551:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1552:Middlewares/ST/filex/common/src/fx_file_write.c ****             i = file_ptr -> fx_file_current_relative_sector + 1;
1553:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1554:Middlewares/ST/filex/common/src/fx_file_write.c ****         for (; i < media_ptr -> fx_media_sectors_per_cluster; i++)
1555:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1556:Middlewares/ST/filex/common/src/fx_file_write.c ****             status =  _fx_utility_logical_sector_read(media_ptr,
1557:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       ((ULONG)media_ptr -> fx_media_data_sector_sta
1558:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       (((ULONG)(copy_tail_cluster - FX_FAT_ENTRY_ST
1559:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        ((ULONG)media_ptr -> fx_media_sectors_per_cl
1560:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                       media_ptr -> fx_media_memory_buffer, ((ULONG)
1561:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1562:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1563:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
1564:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1565:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1566:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1567:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1568:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1569:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1570:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1571:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1572:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1573:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1574:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1575:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Write back the current logical sector.  */
1576:Middlewares/ST/filex/common/src/fx_file_write.c ****             status =  _fx_utility_logical_sector_write(media_ptr,
1577:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        ((ULONG)media_ptr -> fx_media_data_sector_st
1578:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        (((ULONG)(file_ptr -> fx_file_current_physic
1579:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                         ((ULONG)media_ptr -> fx_media_sectors_per_c
1580:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                        media_ptr -> fx_media_memory_buffer, ((ULONG
1581:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1582:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Check for good completion status.  */
1583:Middlewares/ST/filex/common/src/fx_file_write.c ****             if (status !=  FX_SUCCESS)
1584:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1585:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1586:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1587:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1588:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Release media protection.  */
1589:Middlewares/ST/filex/common/src/fx_file_write.c ****                 FX_UNPROTECT
1590:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1591:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Return the error status.  */
1592:Middlewares/ST/filex/common/src/fx_file_write.c ****                 return(status);
1593:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1594:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1595:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1596:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1597:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1598:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Adjust the current file offset accordingly.  */
1599:Middlewares/ST/filex/common/src/fx_file_write.c ****     file_ptr -> fx_file_current_file_offset =
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 50


 1020              		.loc 1 1599 5 is_stmt 1 view .LVU392
1600:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_file_offset + size;
 1021              		.loc 1 1600 18 is_stmt 0 view .LVU393
 1022 0438 236C     		ldr	r3, [r4, #64]
 1023 043a 626C     		ldr	r2, [r4, #68]
 1024              		.loc 1 1600 49 view .LVU394
 1025 043c 0599     		ldr	r1, [sp, #20]
 1026 043e CB18     		adds	r3, r1, r3
 1027 0440 42F10002 		adc	r2, r2, #0
1599:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_file_offset + size;
 1028              		.loc 1 1599 45 view .LVU395
 1029 0444 2364     		str	r3, [r4, #64]
 1030 0446 6264     		str	r2, [r4, #68]
1601:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1602:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Copy the new file size into the directory entry.  */
1603:Middlewares/ST/filex/common/src/fx_file_write.c ****     file_ptr -> fx_file_dir_entry.fx_dir_entry_file_size =
 1031              		.loc 1 1603 5 is_stmt 1 view .LVU396
1604:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_file_size;
 1032              		.loc 1 1604 18 is_stmt 0 view .LVU397
 1033 0448 A06C     		ldr	r0, [r4, #72]
 1034 044a E16C     		ldr	r1, [r4, #76]
1603:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_file_size;
 1035              		.loc 1 1603 58 view .LVU398
 1036 044c C4F8A000 		str	r0, [r4, #160]
 1037 0450 C4F8A410 		str	r1, [r4, #164]
1605:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1606:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Determine if this write was done past the previous file size.  */
1607:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_current_file_offset >
 1038              		.loc 1 1607 5 is_stmt 1 view .LVU399
 1039              		.loc 1 1607 8 is_stmt 0 view .LVU400
 1040 0454 9842     		cmp	r0, r3
 1041 0456 9141     		sbcs	r1, r1, r2
 1042 0458 80F08180 		bcs	.L49
1608:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_file_size)
1609:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1610:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1611:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Yes, we have written past the previous end of the file.  Update
1612:Middlewares/ST/filex/common/src/fx_file_write.c ****            the file size.  */
1613:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_current_file_size =  file_ptr -> fx_file_current_file_offset;
 1043              		.loc 1 1613 9 is_stmt 1 view .LVU401
 1044              		.loc 1 1613 47 is_stmt 0 view .LVU402
 1045 045c A364     		str	r3, [r4, #72]
 1046 045e E264     		str	r2, [r4, #76]
1614:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1615:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifndef FX_DONT_UPDATE_OPEN_FILES
1616:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1617:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Search the opened files list to see if the same file is opened for reading.  */
1618:Middlewares/ST/filex/common/src/fx_file_write.c ****         open_count =  media_ptr -> fx_media_opened_file_count;
 1047              		.loc 1 1618 9 is_stmt 1 view .LVU403
 1048              		.loc 1 1618 20 is_stmt 0 view .LVU404
 1049 0460 D5F8CC70 		ldr	r7, [r5, #204]
 1050              	.LVL109:
1619:Middlewares/ST/filex/common/src/fx_file_write.c ****         search_ptr =  media_ptr -> fx_media_opened_file_list;
 1051              		.loc 1 1619 9 is_stmt 1 view .LVU405
 1052              		.loc 1 1619 20 is_stmt 0 view .LVU406
 1053 0464 D5F8C860 		ldr	r6, [r5, #200]
 1054              	.LVL110:
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 51


1620:Middlewares/ST/filex/common/src/fx_file_write.c ****         while (open_count)
 1055              		.loc 1 1620 9 is_stmt 1 view .LVU407
 1056              		.loc 1 1620 15 is_stmt 0 view .LVU408
 1057 0468 2EE0     		b	.L50
 1058              	.LVL111:
 1059              	.L77:
1489:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                          file_ptr -> fx_file_current_physical_clust
 1060              		.loc 1 1489 21 is_stmt 1 view .LVU409
1489:Middlewares/ST/filex/common/src/fx_file_write.c ****                                                          file_ptr -> fx_file_current_physical_clust
 1061              		.loc 1 1489 31 is_stmt 0 view .LVU410
 1062 046a 0BAA     		add	r2, sp, #44
 1063 046c 216A     		ldr	r1, [r4, #32]
 1064 046e 2846     		mov	r0, r5
 1065 0470 FFF7FEFF 		bl	_fx_utility_FAT_entry_read
 1066              	.LVL112:
1493:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 1067              		.loc 1 1493 21 is_stmt 1 view .LVU411
1493:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 1068              		.loc 1 1493 24 is_stmt 0 view .LVU412
 1069 0474 0246     		mov	r2, r0
 1070 0476 E8B9     		cbnz	r0, .L45
1493:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 1071              		.loc 1 1493 65 discriminator 1 view .LVU413
 1072 0478 0B9B     		ldr	r3, [sp, #44]
1493:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 1073              		.loc 1 1493 48 discriminator 1 view .LVU414
 1074 047a 012B     		cmp	r3, #1
 1075 047c 1AD9     		bls	.L45
1494:Middlewares/ST/filex/common/src/fx_file_write.c ****                     {
 1076              		.loc 1 1494 51 discriminator 2 view .LVU415
 1077 047e 05F50051 		add	r1, r5, #8192
 1078 0482 D1F8A814 		ldr	r1, [r1, #1192]
1493:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (next_cluster > media_ptr -> fx_media_fat_reserved))
 1079              		.loc 1 1493 87 discriminator 2 view .LVU416
 1080 0486 8B42     		cmp	r3, r1
 1081 0488 14D8     		bhi	.L45
1519:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_relative_cluster++;
 1082              		.loc 1 1519 17 is_stmt 1 view .LVU417
1519:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_relative_cluster++;
 1083              		.loc 1 1519 62 is_stmt 0 view .LVU418
 1084 048a 2362     		str	r3, [r4, #32]
1520:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector = ((ULONG)media_ptr -> fx_media_data_sec
 1085              		.loc 1 1520 17 is_stmt 1 view .LVU419
1520:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector = ((ULONG)media_ptr -> fx_media_data_sec
 1086              		.loc 1 1520 26 is_stmt 0 view .LVU420
 1087 048c 626B     		ldr	r2, [r4, #52]
1520:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_logical_sector = ((ULONG)media_ptr -> fx_media_data_sec
 1088              		.loc 1 1520 61 view .LVU421
 1089 048e 0132     		adds	r2, r2, #1
 1090 0490 6263     		str	r2, [r4, #52]
1521:Middlewares/ST/filex/common/src/fx_file_write.c ****                     ((((ULONG64)next_cluster) - FX_FAT_ENTRY_START) *
 1091              		.loc 1 1521 17 is_stmt 1 view .LVU422
1521:Middlewares/ST/filex/common/src/fx_file_write.c ****                     ((((ULONG64)next_cluster) - FX_FAT_ENTRY_START) *
 1092              		.loc 1 1521 80 is_stmt 0 view .LVU423
 1093 0492 296D     		ldr	r1, [r5, #80]
1521:Middlewares/ST/filex/common/src/fx_file_write.c ****                     ((((ULONG64)next_cluster) - FX_FAT_ENTRY_START) *
 1094              		.loc 1 1521 63 view .LVU424
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 52


 1095 0494 0020     		movs	r0, #0
 1096              	.LVL113:
1522:Middlewares/ST/filex/common/src/fx_file_write.c ****                      ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 1097              		.loc 1 1522 47 view .LVU425
 1098 0496 023B     		subs	r3, r3, #2
 1099 0498 40F1FF3C 		adc	ip, r0, #-1
1523:Middlewares/ST/filex/common/src/fx_file_write.c ****                 file_ptr -> fx_file_current_relative_sector =  0;
 1100              		.loc 1 1523 40 view .LVU426
 1101 049c 6F6D     		ldr	r7, [r5, #84]
1522:Middlewares/ST/filex/common/src/fx_file_write.c ****                      ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 1102              		.loc 1 1522 69 view .LVU427
 1103 049e A3FB0732 		umull	r3, r2, r3, r7
 1104 04a2 07FB0C22 		mla	r2, r7, ip, r2
1521:Middlewares/ST/filex/common/src/fx_file_write.c ****                     ((((ULONG64)next_cluster) - FX_FAT_ENTRY_START) *
 1105              		.loc 1 1521 111 view .LVU428
 1106 04a6 CB18     		adds	r3, r1, r3
 1107 04a8 42F10002 		adc	r2, r2, #0
1521:Middlewares/ST/filex/common/src/fx_file_write.c ****                     ((((ULONG64)next_cluster) - FX_FAT_ENTRY_START) *
 1108              		.loc 1 1521 60 view .LVU429
 1109 04ac A362     		str	r3, [r4, #40]
 1110 04ae E262     		str	r2, [r4, #44]
1524:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 1111              		.loc 1 1524 17 is_stmt 1 view .LVU430
1524:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
 1112              		.loc 1 1524 61 is_stmt 0 view .LVU431
 1113 04b0 A063     		str	r0, [r4, #56]
 1114 04b2 6CE7     		b	.L47
 1115              	.LVL114:
 1116              	.L45:
1501:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1117              		.loc 1 1501 25 view .LVU432
 1118 04b4 1746     		mov	r7, r2
1501:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1119              		.loc 1 1501 25 is_stmt 1 view .LVU433
 1120 04b6 0698     		ldr	r0, [sp, #24]
 1121              	.LVL115:
1501:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1122              		.loc 1 1501 25 is_stmt 0 view .LVU434
 1123 04b8 FFF7FEFF 		bl	_tx_mutex_put
 1124              	.LVL116:
1504:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 1125              		.loc 1 1504 25 is_stmt 1 view .LVU435
1504:Middlewares/ST/filex/common/src/fx_file_write.c ****                         {
 1126              		.loc 1 1504 28 is_stmt 0 view .LVU436
 1127 04bc 002F     		cmp	r7, #0
 1128 04be 5BD1     		bne	.L1
1510:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 1129              		.loc 1 1510 35 view .LVU437
 1130 04c0 0827     		movs	r7, #8
 1131              	.LVL117:
1510:Middlewares/ST/filex/common/src/fx_file_write.c ****                         }
 1132              		.loc 1 1510 35 view .LVU438
 1133 04c2 59E0     		b	.L1
 1134              	.LVL118:
 1135              	.L51:
1621:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
1622:Middlewares/ST/filex/common/src/fx_file_write.c **** 
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 53


1623:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Is this file the same file opened for reading?  */
1624:Middlewares/ST/filex/common/src/fx_file_write.c ****             if ((search_ptr != file_ptr) &&
1625:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector ==
1626:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector) &&
1627:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset ==
1628:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset))
1629:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
1630:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1631:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Yes, the same file is opened for reading.  */
1632:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1633:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Setup the new size.  */
1634:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_current_file_size =  file_ptr -> fx_file_current_file_offset;
1635:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1636:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Setup the new directory entry.  */
1637:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_cluster =      file_ptr -> fx_file_dir
1638:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_file_size =    file_ptr -> fx_file_dir
1639:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector =   file_ptr -> fx_file_dir
1640:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset =  file_ptr -> fx_file_dir
1641:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1642:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Setup the last cluster. This really isn't used during reading, but it is nice to
1643:Middlewares/ST/filex/common/src/fx_file_write.c ****                    consistent.  */
1644:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_last_physical_cluster =  file_ptr -> fx_file_last_physical_cl
1645:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1646:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Update the available clusters as well.  */
1647:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_current_available_size =  file_ptr -> fx_file_current_availab
1648:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1649:Middlewares/ST/filex/common/src/fx_file_write.c ****                 /* Determine if an empty file was previously opened.  */
1650:Middlewares/ST/filex/common/src/fx_file_write.c ****                 if (search_ptr -> fx_file_total_clusters == 0)
1651:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
1652:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1653:Middlewares/ST/filex/common/src/fx_file_write.c ****                     /* Setup initial parameters.  */
1654:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_total_clusters =            file_ptr -> fx_file_total_clu
1655:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_physical_cluster =  file_ptr -> fx_file_first_phy
1656:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_relative_cluster =  0;
1657:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media
1658:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(file_ptr -> fx_file_first_physical_cluster - FX_FAT_ENTRY_START
1659:Middlewares/ST/filex/common/src/fx_file_write.c ****                          ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
1660:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_relative_sector =   0;
1661:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_logical_offset =    0;
1662:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_file_offset =       0;
1663:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
1664:Middlewares/ST/filex/common/src/fx_file_write.c ****             }
1665:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1666:Middlewares/ST/filex/common/src/fx_file_write.c ****             /* Adjust the pointer and decrement the search count.  */
1667:Middlewares/ST/filex/common/src/fx_file_write.c ****             search_ptr =  search_ptr -> fx_file_opened_next;
 1136              		.loc 1 1667 13 is_stmt 1 view .LVU439
 1137              		.loc 1 1667 24 is_stmt 0 view .LVU440
 1138 04c4 F66D     		ldr	r6, [r6, #92]
 1139              	.LVL119:
1668:Middlewares/ST/filex/common/src/fx_file_write.c ****             open_count--;
 1140              		.loc 1 1668 13 is_stmt 1 view .LVU441
 1141              		.loc 1 1668 23 is_stmt 0 view .LVU442
 1142 04c6 013F     		subs	r7, r7, #1
 1143              	.LVL120:
 1144              	.L50:
1620:Middlewares/ST/filex/common/src/fx_file_write.c ****         {
 1145              		.loc 1 1620 15 is_stmt 1 view .LVU443
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 54


 1146 04c8 002F     		cmp	r7, #0
 1147 04ca 48D0     		beq	.L49
1624:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector ==
 1148              		.loc 1 1624 13 view .LVU444
1624:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector ==
 1149              		.loc 1 1624 16 is_stmt 0 view .LVU445
 1150 04cc A642     		cmp	r6, r4
 1151 04ce F9D0     		beq	.L51
1625:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector) &&
 1152              		.loc 1 1625 49 discriminator 1 view .LVU446
 1153 04d0 D6F8A800 		ldr	r0, [r6, #168]
 1154 04d4 D6F8AC20 		ldr	r2, [r6, #172]
1626:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset ==
 1155              		.loc 1 1626 47 discriminator 1 view .LVU447
 1156 04d8 D4F8A810 		ldr	r1, [r4, #168]
 1157 04dc D4F8AC30 		ldr	r3, [r4, #172]
1624:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector ==
 1158              		.loc 1 1624 42 discriminator 1 view .LVU448
 1159 04e0 9A42     		cmp	r2, r3
 1160 04e2 08BF     		it	eq
 1161 04e4 8842     		cmpeq	r0, r1
 1162 04e6 EDD1     		bne	.L51
1627:Middlewares/ST/filex/common/src/fx_file_write.c ****                  file_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset))
 1163              		.loc 1 1627 49 view .LVU449
 1164 04e8 D6F8B020 		ldr	r2, [r6, #176]
1628:Middlewares/ST/filex/common/src/fx_file_write.c ****             {
 1165              		.loc 1 1628 47 view .LVU450
 1166 04ec D4F8B030 		ldr	r3, [r4, #176]
1626:Middlewares/ST/filex/common/src/fx_file_write.c ****                 (search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset ==
 1167              		.loc 1 1626 73 view .LVU451
 1168 04f0 9A42     		cmp	r2, r3
 1169 04f2 E7D1     		bne	.L51
1634:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1170              		.loc 1 1634 17 is_stmt 1 view .LVU452
1634:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1171              		.loc 1 1634 69 is_stmt 0 view .LVU453
 1172 04f4 D4E91023 		ldrd	r2, [r4, #64]
1634:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1173              		.loc 1 1634 57 view .LVU454
 1174 04f8 C6E91223 		strd	r2, [r6, #72]
1637:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_file_size =    file_ptr -> fx_file_dir
 1175              		.loc 1 1637 17 is_stmt 1 view .LVU455
1637:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_file_size =    file_ptr -> fx_file_dir
 1176              		.loc 1 1637 106 is_stmt 0 view .LVU456
 1177 04fc D4F89C30 		ldr	r3, [r4, #156]
1637:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_file_size =    file_ptr -> fx_file_dir
 1178              		.loc 1 1637 70 view .LVU457
 1179 0500 C6F89C30 		str	r3, [r6, #156]
1638:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector =   file_ptr -> fx_file_dir
 1180              		.loc 1 1638 17 is_stmt 1 view .LVU458
1638:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector =   file_ptr -> fx_file_dir
 1181              		.loc 1 1638 106 is_stmt 0 view .LVU459
 1182 0504 D4E92823 		ldrd	r2, [r4, #160]
1638:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_log_sector =   file_ptr -> fx_file_dir
 1183              		.loc 1 1638 72 view .LVU460
 1184 0508 C6E92823 		strd	r2, [r6, #160]
1639:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset =  file_ptr -> fx_file_dir
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 55


 1185              		.loc 1 1639 17 is_stmt 1 view .LVU461
1639:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset =  file_ptr -> fx_file_dir
 1186              		.loc 1 1639 106 is_stmt 0 view .LVU462
 1187 050c D4E92A23 		ldrd	r2, [r4, #168]
1639:Middlewares/ST/filex/common/src/fx_file_write.c ****                 search_ptr -> fx_file_dir_entry.fx_dir_entry_byte_offset =  file_ptr -> fx_file_dir
 1188              		.loc 1 1639 73 view .LVU463
 1189 0510 C6E92A23 		strd	r2, [r6, #168]
1640:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1190              		.loc 1 1640 17 is_stmt 1 view .LVU464
1640:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1191              		.loc 1 1640 106 is_stmt 0 view .LVU465
 1192 0514 D4F8B030 		ldr	r3, [r4, #176]
1640:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1193              		.loc 1 1640 74 view .LVU466
 1194 0518 C6F8B030 		str	r3, [r6, #176]
1644:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1195              		.loc 1 1644 17 is_stmt 1 view .LVU467
1644:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1196              		.loc 1 1644 73 is_stmt 0 view .LVU468
 1197 051c E369     		ldr	r3, [r4, #28]
1644:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1198              		.loc 1 1644 61 view .LVU469
 1199 051e F361     		str	r3, [r6, #28]
1647:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1200              		.loc 1 1647 17 is_stmt 1 view .LVU470
1647:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1201              		.loc 1 1647 74 is_stmt 0 view .LVU471
 1202 0520 D4E91423 		ldrd	r2, [r4, #80]
1647:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1203              		.loc 1 1647 62 view .LVU472
 1204 0524 C6E91423 		strd	r2, [r6, #80]
1650:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 1205              		.loc 1 1650 17 is_stmt 1 view .LVU473
1650:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 1206              		.loc 1 1650 32 is_stmt 0 view .LVU474
 1207 0528 3369     		ldr	r3, [r6, #16]
1650:Middlewares/ST/filex/common/src/fx_file_write.c ****                 {
 1208              		.loc 1 1650 20 view .LVU475
 1209 052a 002B     		cmp	r3, #0
 1210 052c CAD1     		bne	.L51
1654:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_physical_cluster =  file_ptr -> fx_file_first_phy
 1211              		.loc 1 1654 21 is_stmt 1 view .LVU476
1654:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_physical_cluster =  file_ptr -> fx_file_first_phy
 1212              		.loc 1 1654 80 is_stmt 0 view .LVU477
 1213 052e 2369     		ldr	r3, [r4, #16]
1654:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_physical_cluster =  file_ptr -> fx_file_first_phy
 1214              		.loc 1 1654 58 view .LVU478
 1215 0530 3361     		str	r3, [r6, #16]
1655:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_relative_cluster =  0;
 1216              		.loc 1 1655 21 is_stmt 1 view .LVU479
1655:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_relative_cluster =  0;
 1217              		.loc 1 1655 80 is_stmt 0 view .LVU480
 1218 0532 6369     		ldr	r3, [r4, #20]
1655:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_relative_cluster =  0;
 1219              		.loc 1 1655 68 view .LVU481
 1220 0534 3362     		str	r3, [r6, #32]
1656:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 56


 1221              		.loc 1 1656 21 is_stmt 1 view .LVU482
1656:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_logical_sector =    ((ULONG)media_ptr -> fx_media
 1222              		.loc 1 1656 68 is_stmt 0 view .LVU483
 1223 0536 0020     		movs	r0, #0
 1224 0538 7063     		str	r0, [r6, #52]
1657:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(file_ptr -> fx_file_first_physical_cluster - FX_FAT_ENTRY_START
 1225              		.loc 1 1657 21 is_stmt 1 view .LVU484
1657:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(file_ptr -> fx_file_first_physical_cluster - FX_FAT_ENTRY_START
 1226              		.loc 1 1657 89 is_stmt 0 view .LVU485
 1227 053a 296D     		ldr	r1, [r5, #80]
1658:Middlewares/ST/filex/common/src/fx_file_write.c ****                          ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 1228              		.loc 1 1658 46 view .LVU486
 1229 053c 6369     		ldr	r3, [r4, #20]
1658:Middlewares/ST/filex/common/src/fx_file_write.c ****                          ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 1230              		.loc 1 1658 80 view .LVU487
 1231 053e 023B     		subs	r3, r3, #2
1659:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_relative_sector =   0;
 1232              		.loc 1 1659 44 view .LVU488
 1233 0540 6A6D     		ldr	r2, [r5, #84]
1658:Middlewares/ST/filex/common/src/fx_file_write.c ****                          ((ULONG)media_ptr -> fx_media_sectors_per_cluster));
 1234              		.loc 1 1658 103 view .LVU489
 1235 0542 A3FB0232 		umull	r3, r2, r3, r2
1657:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(file_ptr -> fx_file_first_physical_cluster - FX_FAT_ENTRY_START
 1236              		.loc 1 1657 120 view .LVU490
 1237 0546 C918     		adds	r1, r1, r3
 1238 0548 42F10002 		adc	r2, r2, #0
1657:Middlewares/ST/filex/common/src/fx_file_write.c ****                         (((ULONG64)(file_ptr -> fx_file_first_physical_cluster - FX_FAT_ENTRY_START
 1239              		.loc 1 1657 66 view .LVU491
 1240 054c B162     		str	r1, [r6, #40]
 1241 054e F262     		str	r2, [r6, #44]
1660:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_logical_offset =    0;
 1242              		.loc 1 1660 21 is_stmt 1 view .LVU492
1660:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_logical_offset =    0;
 1243              		.loc 1 1660 67 is_stmt 0 view .LVU493
 1244 0550 B063     		str	r0, [r6, #56]
1661:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_file_offset =       0;
 1245              		.loc 1 1661 21 is_stmt 1 view .LVU494
1661:Middlewares/ST/filex/common/src/fx_file_write.c ****                     search_ptr -> fx_file_current_file_offset =       0;
 1246              		.loc 1 1661 66 is_stmt 0 view .LVU495
 1247 0552 3063     		str	r0, [r6, #48]
1662:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 1248              		.loc 1 1662 21 is_stmt 1 view .LVU496
1662:Middlewares/ST/filex/common/src/fx_file_write.c ****                 }
 1249              		.loc 1 1662 63 is_stmt 0 view .LVU497
 1250 0554 0022     		movs	r2, #0
 1251 0556 0023     		movs	r3, #0
 1252 0558 C6E91023 		strd	r2, [r6, #64]
 1253 055c B2E7     		b	.L51
 1254              	.LVL121:
 1255              	.L49:
1669:Middlewares/ST/filex/common/src/fx_file_write.c ****         }
1670:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
1671:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1672:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1673:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Finally, mark this file as modified.  */
1674:Middlewares/ST/filex/common/src/fx_file_write.c ****     file_ptr -> fx_file_modified =  FX_TRUE;
 1256              		.loc 1 1674 5 is_stmt 1 view .LVU498
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 57


 1257              		.loc 1 1674 34 is_stmt 0 view .LVU499
 1258 055e 0123     		movs	r3, #1
 1259 0560 2373     		strb	r3, [r4, #12]
1675:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1676:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_FAULT_TOLERANT_DATA
1677:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1678:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Ensure that all file data is flushed out.  */
1679:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1680:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Flush the internal logical sector cache.  */
1681:Middlewares/ST/filex/common/src/fx_file_write.c ****     _fx_utility_logical_sector_flush(media_ptr, 1, media_ptr -> fx_media_total_sectors, FX_FALSE);
1682:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1683:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Lockout interrupts for time/date access.  */
1684:Middlewares/ST/filex/common/src/fx_file_write.c ****     FX_DISABLE_INTS
1685:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1686:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Set the new time and date.  */
1687:Middlewares/ST/filex/common/src/fx_file_write.c ****     file_ptr -> fx_file_dir_entry.fx_dir_entry_time =  _fx_system_time;
1688:Middlewares/ST/filex/common/src/fx_file_write.c ****     file_ptr -> fx_file_dir_entry.fx_dir_entry_date =  _fx_system_date;
1689:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1690:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Restore interrupts.  */
1691:Middlewares/ST/filex/common/src/fx_file_write.c ****     FX_RESTORE_INTS
1692:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1693:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1694:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (media_ptr -> fx_media_fault_tolerant_enabled)
1695:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1696:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1697:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Copy the new file size into the directory entry.  */
1698:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_dir_entry.fx_dir_entry_file_size = file_ptr -> fx_file_current_file_siz
1699:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1700:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1701:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1702:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Write the directory entry to the media.  */
1703:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1704:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (media_ptr -> fx_media_FAT_type == FX_exFAT)
1705:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1706:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1707:Middlewares/ST/filex/common/src/fx_file_write.c ****         status = _fx_directory_exFAT_entry_write(
1708:Middlewares/ST/filex/common/src/fx_file_write.c ****                 media_ptr, &(file_ptr -> fx_file_dir_entry), UPDATE_STREAM);
1709:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1710:Middlewares/ST/filex/common/src/fx_file_write.c ****     else
1711:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1712:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1713:Middlewares/ST/filex/common/src/fx_file_write.c ****         status =  _fx_directory_entry_write(media_ptr, &(file_ptr -> fx_file_dir_entry));
1714:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_EXFAT
1715:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1716:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_EXFAT */
1717:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1718:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Check for a good status.  */
1719:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (status != FX_SUCCESS)
1720:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1721:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1722:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_FAULT_TOLERANT_TRANSACTION_FAIL(media_ptr);
1723:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1724:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1725:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Release media protection.  */
1726:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_UNPROTECT
1727:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1728:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Error writing the directory.  */
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 58


1729:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(status);
1730:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1731:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif
1732:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1733:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Update the trace event with the bytes written.  */
1734:Middlewares/ST/filex/common/src/fx_file_write.c ****     FX_TRACE_EVENT_UPDATE(trace_event, trace_timestamp, FX_TRACE_FILE_WRITE, 0, 0, 0, size)
1735:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1736:Middlewares/ST/filex/common/src/fx_file_write.c **** #ifdef FX_ENABLE_FAULT_TOLERANT
1737:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* End transaction. */
1738:Middlewares/ST/filex/common/src/fx_file_write.c ****     status = _fx_fault_tolerant_transaction_end(media_ptr);
1739:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1740:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Check for a bad status.  */
1741:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (status != FX_SUCCESS)
1742:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1743:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1744:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Release media protection.  */
1745:Middlewares/ST/filex/common/src/fx_file_write.c ****         FX_UNPROTECT
1746:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1747:Middlewares/ST/filex/common/src/fx_file_write.c ****         /* Return the bad status.  */
1748:Middlewares/ST/filex/common/src/fx_file_write.c ****         return(status);
1749:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1750:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1751:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Update maximum size used if necessary. */
1752:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_current_file_offset > file_ptr -> fx_file_maximum_size_used)
1753:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1754:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_maximum_size_used = file_ptr -> fx_file_current_file_offset;
1755:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1756:Middlewares/ST/filex/common/src/fx_file_write.c **** #endif /* FX_ENABLE_FAULT_TOLERANT */
1757:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1758:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Invoke file write callback. */
1759:Middlewares/ST/filex/common/src/fx_file_write.c ****     if (file_ptr -> fx_file_write_notify)
 1260              		.loc 1 1759 5 is_stmt 1 view .LVU500
 1261              		.loc 1 1759 18 is_stmt 0 view .LVU501
 1262 0562 D4F8DC31 		ldr	r3, [r4, #476]
 1263              		.loc 1 1759 8 view .LVU502
 1264 0566 0BB1     		cbz	r3, .L53
1760:Middlewares/ST/filex/common/src/fx_file_write.c ****     {
1761:Middlewares/ST/filex/common/src/fx_file_write.c ****         file_ptr -> fx_file_write_notify(file_ptr);
 1265              		.loc 1 1761 9 is_stmt 1 view .LVU503
 1266 0568 2046     		mov	r0, r4
 1267 056a 9847     		blx	r3
 1268              	.LVL122:
 1269              	.L53:
1762:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
1763:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1764:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Release media protection.  */
1765:Middlewares/ST/filex/common/src/fx_file_write.c ****     FX_UNPROTECT
 1270              		.loc 1 1765 5 view .LVU504
 1271 056c 0698     		ldr	r0, [sp, #24]
 1272 056e FFF7FEFF 		bl	_tx_mutex_put
 1273              	.LVL123:
1766:Middlewares/ST/filex/common/src/fx_file_write.c **** 
1767:Middlewares/ST/filex/common/src/fx_file_write.c ****     /* Return a successful status to the caller.  */
1768:Middlewares/ST/filex/common/src/fx_file_write.c ****     return(FX_SUCCESS);
 1274              		.loc 1 1768 5 view .LVU505
 1275              		.loc 1 1768 11 is_stmt 0 view .LVU506
 1276 0572 079F     		ldr	r7, [sp, #28]
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 59


 1277 0574 00E0     		b	.L1
 1278              	.LVL124:
 1279              	.L54:
 155:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 1280              		.loc 1 155 15 view .LVU507
 1281 0576 0727     		movs	r7, #7
 1282              	.LVL125:
 1283              	.L1:
1769:Middlewares/ST/filex/common/src/fx_file_write.c **** }
 1284              		.loc 1 1769 1 view .LVU508
 1285 0578 3846     		mov	r0, r7
 1286 057a 0DB0     		add	sp, sp, #52
 1287              	.LCFI2:
 1288              		.cfi_remember_state
 1289              		.cfi_def_cfa_offset 36
 1290              		@ sp needed
 1291 057c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1292              	.LVL126:
 1293              	.L55:
 1294              	.LCFI3:
 1295              		.cfi_restore_state
 178:Middlewares/ST/filex/common/src/fx_file_write.c ****     }
 1296              		.loc 1 178 15 view .LVU509
 1297 0580 0A27     		movs	r7, #10
 1298 0582 F9E7     		b	.L1
 1299              	.LVL127:
 1300              	.L57:
 190:Middlewares/ST/filex/common/src/fx_file_write.c **** 
 1301              		.loc 1 190 5 view .LVU510
 1302 0584 1127     		movs	r7, #17
 1303 0586 F7E7     		b	.L1
 1304              		.cfi_endproc
 1305              	.LFE8:
 1307              		.text
 1308              	.Letext0:
 1309              		.file 2 "Middlewares/ST/threadx/ports/cortex_m4/gnu/inc/tx_port.h"
 1310              		.file 3 "Middlewares/ST/threadx/common/inc/tx_api.h"
 1311              		.file 4 "Middlewares/ST/filex/common/inc/fx_api.h"
 1312              		.file 5 "Middlewares/ST/filex/common/inc/fx_utility.h"
ARM GAS  C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s 			page 60


DEFINED SYMBOLS
                            *ABS*:00000000 fx_file_write.c
C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s:21     .text._fx_file_write:00000000 $t
C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s:27     .text._fx_file_write:00000000 _fx_file_write
C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s:665    .text._fx_file_write:00000298 $d
C:\Users\HP\AppData\Local\Temp\ccl2t4cV.s:671    .text._fx_file_write:000002a0 $t

UNDEFINED SYMBOLS
__aeabi_uldivmod
_tx_mutex_get
_tx_mutex_put
_fx_utility_FAT_entry_read
_fx_utility_FAT_entry_write
_fx_utility_logical_sector_write
_fx_utility_logical_sector_read
_fx_utility_memory_copy
